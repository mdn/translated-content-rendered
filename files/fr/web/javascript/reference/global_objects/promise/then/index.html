---
title: Promise.prototype.then()
slug: Web/JavaScript/Reference/Global_Objects/Promise/then
tags:
  - ECMAScript6
  - JavaScript
  - Méthode
  - Promise
  - Prototype
  - Reference
translation_of: Web/JavaScript/Reference/Global_Objects/Promise/then
original_slug: Web/JavaScript/Reference/Objets_globaux/Promise/then
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux">Objets standards</a></strong></li><li><strong><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise"><code>Promise</code></a></strong></li><li data-default-state="open"><a href="#"><strong>Méthodes</strong></a><ol><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise/all"><code>Promise.all()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise/allSettled"><code>Promise.allSettled()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise/any"><code>Promise.any()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise/catch"><code>Promise.prototype.catch()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise/finally"><code>Promise.prototype.finally()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise/then"><code>Promise.prototype.then()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise/race"><code>Promise.race()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise/reject"><code>Promise.reject()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise/resolve"><code>Promise.resolve()</code></a></li></ol></li><li><strong>Héritage :</strong></li><li><strong><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function"><code>Function</code></a></strong></li><li><a href="#"><strong>Propriétés</strong></a><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API obsolète ne doit plus être utilisée, mais elle peut continuer à fonctionner."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function/arguments"><code>Function.arguments</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API obsolète ne doit plus être utilisée, mais elle peut continuer à fonctionner."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function/caller"><code>Function.caller</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span></span><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function/displayName"><code>Function.displayName</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function/length"><code>Function.length</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function/name"><code>Function.name</code></a></li></ol></li><li><a href="#"><strong>Méthodes</strong></a><ol><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function/apply"><code>Function.prototype.apply()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function/bind"><code>Function.prototype.bind()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function/call"><code>Function.prototype.call()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function/toSource"><code>Function.prototype.toSource()</code></a></s></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function/toString"><code>Function.prototype.toString()</code></a></li></ol></li><li><strong><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object"><code>Object</code></a></strong></li><li><a href="#"><strong>Propriétés</strong></a><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API obsolète ne doit plus être utilisée, mais elle peut continuer à fonctionner."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/proto"><code>Object.prototype.__proto__</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/constructor"><code>Object.prototype.constructor</code></a></li></ol></li><li><a href="#"><strong>Méthodes</strong></a><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API obsolète ne doit plus être utilisée, mais elle peut continuer à fonctionner."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/defineGetter"><code>Object.prototype.__defineGetter__()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API obsolète ne doit plus être utilisée, mais elle peut continuer à fonctionner."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/defineSetter"><code>Object.prototype.__defineSetter__()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API obsolète ne doit plus être utilisée, mais elle peut continuer à fonctionner."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/lookupGetter"><code>Object.prototype.__lookupGetter__()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API obsolète ne doit plus être utilisée, mais elle peut continuer à fonctionner."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/lookupSetter"><code>Object.prototype.__lookupSetter__()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/hasOwnProperty"><code>Object.prototype.hasOwnProperty()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/isPrototypeOf"><code>Object.prototype.isPrototypeOf()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/propertyIsEnumerable"><code>Object.prototype.propertyIsEnumerable()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/toLocaleString"><code>Object.prototype.toLocaleString()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/toSource"><code>Object.prototype.toSource()</code></a></s></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/toString"><code>Object.prototype.toString()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/valueOf"><code>Object.prototype.valueOf()</code></a></li><li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/setPrototypeOf"><code>Object.setPrototypeOf()</code></a></li></ol></li></ol></section></div>

<p>La méthode <code><strong>then()</strong></code> renvoie un objet <a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise"><code>Promise</code></a>. Elle peut prendre jusqu&apos;à deux arguments qui sont deux fonctions <em>callback</em> à utiliser en cas de complétion ou d&apos;échec de la <code>Promise</code>.</p>

<div><iframe class="interactive interactive-js" frameborder="0" height="250" src="https://interactive-examples.mdn.mozilla.net/pages/js/promise-then.html" title="MDN Web Docs Interactive Example" width="100%"></iframe></div>

<p class="hidden">Le code source de cet exemple interactif est disponible dans un dépôt GitHub. Si vous souhaitez contribuez à ces exemples, n&apos;hésitez pas à cloner <a href="https://github.com/mdn/interactive-examples">https://github.com/mdn/interactive-examples</a> et à envoyer une <em>pull request</em> !</p>

<div class="note notecard">
<p><strong>Note :</strong> Si aucun des deux arguments n&apos;est utilisé ou que les objets fournis ne sont pas des fonctions, une nouvelle promesse est créée sans autre gestionnaire supplémentaire. Si le premier argument est absent ou qu&apos;un objet qui n&apos;est pas une fonction est passé, la nouvelle promesse utilisera la fonction de réussite de la promesse originelle. De même, si le deuxième argument n&apos;est pas passé ou que ce n&apos;est pas une fonction, la nouvelle promesse créée utilisera la fonction de rejet de la promesse appelante.</p>
</div>

<h2 id="Syntaxe">Syntaxe</h2>

<pre class="syntaxbox notranslate"><var>p.then(siTenue);
p.then(siTenue, siRejetée)</var>;

p.then((valeur) =&gt; {
    // Promesse tenue
  }, (raison) =&gt; {
    // Rejet de la promesse
});
</pre>

<h3 id="Paramètres">Paramètres</h3>

<ul>
</ul>

<dl>
 <dt><code>siTenue</code></dt>
 <dd>Une <a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function">fonction</a> appelée lorsque la <code>Promise</code> est tenue. Cette fonction a un seul argument, la <code>valeur</code> qui a permis de résoudre la promesse. Si <code>siTenue</code> n&apos;est pas une fonction, elle est implicitement remplacée par une fonction « identité » qui renvoie l&apos;argument tel quel.</dd>
 <dt><code>siRejetée</code> <span class="optional optionalInline notecard inline">Facultatif</span></dt>
 <dd>Une <a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Function">fonction</a> appelée lorsque la <code>Promise</code> est rejetée. Cette fonction a un seul argument, la <code>raison</code> pour laquelle la promesse a été rejetée. Si <code>siRejetée</code> n&apos;est pas une fonction, elle est implicitement remplacée par une fonction qui lève une erreur avec la <code>raison</code> passée en argument.</dd>
</dl>

<h3 id="Valeur_de_retour">Valeur de retour</h3>

<p>La méthode <code>then()</code> renvoie une promesse (<a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise"><code>Promise</code></a>) en attente de résolution et dont la valeur est déterminée selon les deux fonctions passées en arguments et qui seront appelées de façon asynchrone :</p>

<ul>
 <li>Si <code>siRejetée</code> ou <code>siTenue</code> lève une exception ou renvoie une promesse rompue, la promesse renvoyée par <code>then()</code> est rompue et la valeur fournie est l&apos;exception ou l&apos;explication de la promesse rompue.</li>
 <li>Si <code>siRejetée</code> ou <code>siTenue</code> renvoie une promesse tenue ou n&apos;importe quelle autre valeur, la promesse renvoyée est tenue et la valeur de résolution est la même que celle de la promesse tenue.</li>
 <li>Si <code>siRejetée</code> ou <code>siTenue</code> renvoie une promesse en attente de résolution, la promesse renvoyée par <code>then()</code> sera résolue de la même façon que la promesse renvoyée par le gestionnaire. En fait, dans ce cas, la promesse renvoyée par <code>then()</code> est la même que la promesse renvoyée par le gestionnaire (<code>siTenue</code> ou <code>siRejetée</code>).</li>
</ul>

<h2 id="Description">Description</h2>

<p>Comme les méthodes <code>then()</code> et <a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise/catch"><code>Promise.prototype.catch()</code></a> renvoient des promesses, on peut enchaîner ces opérations (c&apos;est ce qu&apos;on appelle la <em>composition</em> de promesses, voir l&apos;exemple ci-après).</p>

<h2 id="Exemples">Exemples</h2>

<h3 id="Utilisation_de_la_méthode_then">Utilisation de la méthode <code>then()</code></h3>

<pre class="brush: js notranslate">var p1 = new Promise(function(resolve, reject) {
  resolve(&quot;Succès !&quot;);
  // ou
  // reject(&quot;Erreur !&quot;);
});

p1.then((valeur) =&gt; {
  console.log(valeur); // Succès !
  }, (raison) =&gt; {
  console.log(raison); // Erreur !
});
</pre>

<h3 id="Composition_-_Chaînage">Composition - Chaînage</h3>

<p>La méthode <code>then()</code> renvoie un objet <code>Promise</code>, ce qui permet d&apos;enchaîner les opération. On peut passer une fonction lambda à then puis utiliser la promesse obtenue pour la passer à la méthode suivante. Dans l&apos;exemple ci-après, on simule un code asynchrone avec la fonction <code>setTimeout</code>.</p>

<pre class="brush: js notranslate">Promise.resolve(&quot;toto&quot;)
  // 1. Première étape, on reçoit &quot;toto&quot; et on le concatène avec
  //    &quot;truc&quot;, ce qui résoud la première étape puis on passe au
  //    deuxième then
  .then(function(string) {
    return new Promise(function(resolve, reject) {
      setTimeout(function() {
        string += &apos;truc&apos;;
        resolve(string);
      }, 1);
    });
  })
  // 2. Deuxième étape, on reçoit &quot;tototruc&quot; et on enregistre une
  //    fonction de rappel pour manipuler cette chaîne puis l&apos;imprimer
  //    dans la console. Avant cela, on passe la chaîne intacte au
  //    prochain then
  .then(function(string) {
    setTimeout(function() {
      string += &apos;baz&apos;;
      console.log(string);
    }, 1)
    return string;
  })
  // 3. On affiche un message sur le code, celui-ci sera affiché
  //    avant que la chaîne soit traitée dans le bloc précédent
  //    qui agit comme un bloc asynchrone.
  .then(function(string) {
    console.log(&quot;Et voilà la dernière, qui risque d&apos;arriver avant la 2e&quot;);

    // Ici, la chaîne n&apos;aura pas le morceau &apos;baz&apos; car la fonction
    // setTimeout retarde l&apos;exécution du code.
    console.log(string);
});
</pre>

<p>Lorsqu&apos;une valeur est simplement renvoyée depuis une fonction lambda <code>then</code>, celle-ci renverra <code>Promise.resolve(&lt;la valeur renvoyée par le gestionnaire appelé&gt;)</code>.</p>

<pre class="brush: js notranslate">var p2 = new Promise(function(resolve, reject) {
  resolve(1);
});

p2.then(function(valeur) {
  console.log(valeur); // 1
  return valeur + 1;
  }).then(function(valeur) {
  console.log(valeur + &quot;- cette utilisation synchrone est un peu inutile&quot;);
  // 2- cette utilisation synchrone est un peu inutile
});

p2.then(function(valeur) {
  console.log(valeur); // 1
});
</pre>

<p>Appeler <code>then()</code> renverra une promesse rompue si la fonction lève une exception ou si elle renvoie une promesse rompue.</p>

<pre class="brush: js notranslate">Promise.resolve()
  .then( () =&gt; {
    // Ici .then() lève une exception
    throw &apos;Oh zut :( !&apos;;
  })
  .then( () =&gt; {
    console.log( &quot;Ceci n&apos;est pas appelé.&quot; );
  }, raison =&gt; {
    console.error( &apos;la fonction siRompue est appelée : &apos; + raison );
});</pre>

<p>Dans tous les autres cas, un promesse de résolution est renvoyée. Dans l&apos;exemple qui suit, le premier <code>then()</code> renvoie <code>42</code> même si la promesse précédente a été rompue :</p>

<pre class="brush: js notranslate">Promise.reject()
  .then( () =&gt; 99, () =&gt; 42 ) // la valeur 42 est renvoyée dans une promesse
  .then( solution =&gt; console.log( &apos;Résolue avec &apos; + solution ) ); // Résolue avec 42</pre>

<p>En pratique, il est souvent préférable d&apos;attraper les promesses rompues plutôt que d&apos;utiliser la syntaxe de <code>then()</code> avec deux fonctions :</p>

<pre class="brush: js notranslate">Promise.resolve()
  .then( () =&gt; {
    // .then() renvoie une promesse rompue
    throw &apos;Oh zut !&apos;;
  })
  .catch( raison =&gt; {
    console.error( &apos;fonction siRompue appelée : &apos; + raison );
  })
  .then( () =&gt; {
    console.log(&quot;Je suis toujours appelée, même si il y a un souci avant&quot;);
  });</pre>

<p>Le chaînage peut également être utilisé pour implémenter une fonction utilisant une API basée sur les promesses et encapsuler une autre fonction :</p>

<pre class="brush: js notranslate">function fetch_current_data() {
  // L&apos;API fetch renvoie une promesse. Cette fonction
  // expose une API similaire mais lorsque la promesse
  // est tenue, on effectue plus de tâches
  return fetch(&quot;current-data.json&quot;).then((response) =&gt; {
    if (response.headers.get(&quot;content-type&quot;) != &quot;application/json&quot;) {
      throw new TypeError();
    }
    var j = response.json();
    // on peut ici manipuler j si besoin
    return j; // la valeur fournie à l&apos;utilisateur de
              // fetch_current_data().then()
  });
}
</pre>

<p>Si le gestionnaire <code><em>siTenue</em></code> renvoie une promesse, la valeur de retour de <code>then()</code> sera alors résolue/rompue par cette promesse.</p>

<pre class="brush: js notranslate">function resoudrePlusTard(resolve, reject) {
  setTimeout(function () {
    resolve(10);
  }, 1000);
}
function romprePlusTard(resolve, reject) {
  setTimeout(function () {
    reject(20);
  }, 1000);
}

var p1 = Promise.resolve(&quot;toto&quot;);
var p2 = p1.then(function() {
  // On renvoie une nouvelle promesse
  // qui sera résolue avec la valeur 10
  // au bout d&apos;une seconde
  return new Promise(resoudrePlusTard);
});
p2.then(function(v) {
  console.log(&quot;tenue&quot;, v);
  // &quot;tenue&quot;, 10
}, function(e) {
  // ceci n&apos;est pas appelé
  console.log(&quot;rompue&quot;, e);
});

var p3 = p1.then(function() {
  // Ici, on renvoie une promesse
  // qui sera rompue avec la valeur
  // 20 au bout d&apos;une seconde
  return new Promise(romprePlusTard);
});
p3.then(function(v) {
  // ceci n&apos;est pas appelé
  console.log(&quot;tenue&quot;, v);
}, function(e) {
  console.log(&quot;rompue&quot;, e);
  // &quot;rompue&quot;, 20
});
</pre>

<h2 id="Spécifications">Spécifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Spécification</th>
   <th scope="col">État</th>
   <th scope="col">Commentaires</th>
  </tr>
  <tr>
   <td><a class="external" href="https://www.ecma-international.org/ecma-262/6.0/#sec-promise.prototype.then" hreflang="en" lang="en">ECMAScript 2015 (6th Edition, ECMA-262)<br><small lang="fr">La définition de &apos;Promise.prototype.then&apos; dans cette spécification.</small></a></td>
   <td><span class="spec-Standard">Standard</span></td>
   <td>Définition initiale au sein d&apos;un standard ECMA.</td>
  </tr>
  <tr>
   <td><a class="external" href="https://tc39.es/ecma262/#sec-promise.prototype.then" hreflang="en" lang="en">ECMAScript (ECMA-262)<br><small lang="fr">La définition de &apos;Promise.prototype.then&apos; dans cette spécification.</small></a></td>
   <td><span class="spec-Living">Standard évolutif</span></td>
   <td></td>
  </tr>
 </tbody>
</table>

<h2 id="Compatibilité_des_navigateurs">Compatibilité des navigateurs</h2>

<p class="hidden">Pour contribuer à ces données de compatibilité, vous pouvez envoyer une poule requête sur : <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a>.</p>

<div class="bc-data" id="bcd:javascript.builtins.Promise.then"></div>

<h2 id="Voir_aussi">Voir aussi</h2>

<ul>
 <li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise"><code>Promise</code></a></li>
 <li><a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise/catch"><code>Promise.prototype.catch()</code></a></li>
</ul>
