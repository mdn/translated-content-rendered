---
title: Déplacer la balle
slug: Games/Tutorials/2D_Breakout_game_pure_JavaScript/Move_the_ball
tags:
  - 2D
  - Boucle
  - Canevas
  - Débutant
  - JavaScript
  - Mouvement
  - Tutoriel
translation_of: Games/Tutorials/2D_Breakout_game_pure_JavaScript/Move_the_ball
original_slug: Games/Workflows/2D_Breakout_game_pure_JavaScript/Move_the_ball
---
<div><section class="Quick_links" id="Quick_Links">
  <ol>
    <li class="toggle">
        <details>
            <summary>Introduction</summary>
            <ol>
              <li><a href="/fr/docs/Games/Introduction">Introduction</a></li>
              <li><a href="/fr/docs/Games/Anatomy">Anatomie d&apos;un jeu vidéo</a></li>
              <li><a href="/fr/docs/Games/Examples">Exemples</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>API pour le développement de jeux</summary>
            <ol>
              <li><a href="/fr/docs/Web/API/Canvas_API">Canvas</a></li>
              <li><a href="/fr/docs/Web/CSS">CSS</a></li>
              <li><a href="/fr/docs/Web/Apps/Fundamentals/User_notifications/Full_screen_api">Full Screen (plein écran)</a></li>
              <li><a href="/fr/docs/Web/API/Gamepad_API">Gamepad (manette)</a></li>
              <li><a href="/fr/docs/Web/API/IndexedDB_API">IndexedDB</a></li>
              <li><a href="/fr/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="/fr/docs/Web/API/Pointer_Lock_API">Pointer Lock (verrou de pointeur)</a></li>
              <li><a href="/fr/docs/Web/SVG">SVG</a></li>
              <li><a href="/fr/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">Typed Arrays (tableaux typés)</a></li>
              <li><a href="/fr/docs/Web/API/Web_Audio_API">Web Audio</a></li>
              <li><a href="/fr/docs/Web/API/WebGL_API">WebGL</a></li>
              <li><a href="/fr/docs/Web/API/WebRTC_API">WebRTC</a></li>
              <li><a href="/fr/docs/Web/API/WebSockets_API">WebSockets</a></li>
              <li><a href="/fr/docs/Web/API/WebVR_API">WebVR (réalité virtuelle)</a></li>
              <li><a href="/fr/docs/Web/API/Web_Workers_API">Web Workers</a></li>
              <li><a href="/fr/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Techniques</summary>
            <ol>
              <li><a href="/fr/docs/Games/Techniques/Async_scripts">Utiliser des scripts asynchrones pour asm.js</a></li>
              <li><a href="/fr/docs/Web/Apps/Developing/Optimizing_startup_performance">Optimiser les performances de démarrage</a></li>
              <li><a href="/fr/docs/Games/Techniques/WebRTC_data_channels">Utiliser WebRTC - canaux de données pair-à-pair</a></li>
              <li><a href="/fr/docs/Games/Techniques/Efficient_animation_for_web_games">Animation efficace pour un jeu internet</a></li>
              <li><a href="/fr/docs/Games/Techniques/Audio_for_Web_Games">Audio pour les jeux web</a></li>
              <li><a href="/fr/docs/Games/Techniques/2D_collision_detection">Détection de collision 2D</a></li>
              <li><a href="/fr/docs/Games/Techniques/Tilemaps">Carreaux et carrelages</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Jeux 3D sur le Web</summary>
            <ol>
              <li><a href="/fr/docs/Games/Techniques/3D_on_the_web">Aperçu des jeux 3D sur le Web</a></li>
              <li><a href="/fr/docs/Games/Techniques/3D_on_the_web/Basic_theory">Théorie de base sur la 3D</a></li>
              <li><a href="/fr/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_A-Frame">Construire une démo avec A-Frame</a></li>
              <li><a href="/fr/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Babylon.js">Construire une démo avec Babylon.js</a></li>
              <li><a href="/fr/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_PlayCanvas">Construire une démo avec PlayCanvas</a></li>
              <li><a href="/fr/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Three.js">Construire une démo avec Three.js</a></li>
              <li><a href="/fr/docs/Games/Techniques/3D_on_the_web/WebVR">WebVR (réalité virtuelle)</a></li>
              <li><a href="/fr/docs/Games/Techniques/3D_collision_detection">Détection de collision en 3D</a></li>
              <li><a href="/fr/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js">Détection de collision de volumes avec THREE.js</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Mise en place des contrôle du jeu</summary>
            <ol>
              <li><a href="/fr/docs/Games/Techniques/Control_mechanisms">Aperçu des mécanismes de contrôle du jeu</a></li>
              <li><a href="/fr/docs/Games/Techniques/Control_mechanisms/Mobile_touch">Commandes tactiles mobiles</a></li>
              <li><a href="/fr/docs/Games/Techniques/Control_mechanisms/Desktop_with_mouse_and_keyboard">Commandes à la souris et au clavier</a></li>
              <li><a href="/fr/docs/Games/Techniques/Control_mechanisms/Desktop_with_gamepad">Commandes à la manette</a></li>
              <li><a href="/fr/docs/Games/Techniques/Control_mechanisms/Other">Contrôles non conventionnels</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Tutoriels</summary>
            <ol>
              <li><a href="/fr/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript">Jeu de casse-briques 2D avec du pur JavaScript</a></li>
              <li><a href="/fr/docs/Games/Tutorials/2D_breakout_game_Phaser">Jeu de casse-tête 2D avec Phaser</a></li>
              <li><a href="/fr/docs/Games/Tutorials/HTML5_Gamedev_Phaser_Device_Orientation">Jeu de labyrinthe 2D avec orientation du périphérique</a></li>
              <li><a href="https://mozdevs.github.io/html5-games-workshop/en/guides/platformer/start-here/">Jeu de plateforme 2D avec Phaser</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Publication de jeux</summary>
            <ol>
              <li><a href="/fr/docs/Games/Publishing_games">Aperçu des outils de publication des jeux</a></li>
              <li><a href="/fr/docs/Games/Publishing_games/Game_distribution">Distribution des jeux</a></li>
              <li><a href="/fr/docs/Games/Publishing_games/Game_promotion">Promotion des jeux</a></li>
              <li><a href="/fr/docs/Games/Publishing_games/Game_monetization">Monétisation des jeux</a></li>
            </ol>
        </details>
    </li>
  </ol>
</section></div>

<div></div>

<div class="prevnext" style="text-align: right;">
    <p><a href="/fr/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript/creer_element_canvas_et_afficher" style="float: left;" class="button">« Précédent</a><a href="/fr/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript/Faire_rebondir_la_balle_sur_les_murs" class="button">Suivant  »</a></p>
</div>

<div class="summary">
<p>Voici la deuxième étape de ce <a href="/fr/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript">tutoriel</a>. Vous pouvez retrouver le code source de cette leçon sur <a href="https://github.com/end3r/Gamedev-Canvas-workshop/blob/gh-pages/lesson02.html">Gamedev-Canvas-workshop/lesson2.html</a>.</p>
</div>

<p><span class="seoSummary">Nous avons vu dans l&apos;article précédent comment dessiner une balle, maintenant déplaçons là. Techniquement, nous afficherons la balle sur l&apos;écran, puis nous l&apos;effacerons et ensuite nous la repeindrons dans une position légèrement différente et ceci à chaque image afin de donner l&apos;impression d&apos;un mouvement (tout comme le fonctionnement du mouvement dans les films).</span></p>

<h2 id="Définir_une_boucle_de_dessin">Définir une boucle de dessin</h2>

<p>Afin que le dessin soit mis à jour sur le canevas à chaque image, nous allons définir une fonction <code>draw()</code> qui sera exécutée en continu et qui utilisera des variables pour les positions des sprites, etc. Pour qu&apos;une fonction s&apos;exécute de façon répétée avec JavaScript, on pourra utiliser les méthodes <a href="/fr/docs/Web/API/WindowTimers/setInterval"><code>setInterval()</code></a> ou <a href="/fr/docs/Web/API/Window/requestAnimationFrame"><code>requestAnimationFrame()</code></a>.</p>

<p>Supprimez tout le JavaScript que vous avez actuellement dans votre HTML à l&apos;exception des deux premières lignes puis ajoutez ce qui suit en dessous de ces lignes. La fonction <code>draw()</code> sera exécutée toutes les 10 millisecondes (environ) grâce à <code>setInterval</code> :</p>

<pre class="brush: js notranslate">function draw() {
  // le code pour dessiner
}
setInterval(draw, 10);</pre>

<p>Grâce à la nature infinie de <code>setInterval</code>, la fonction <code>draw()</code> sera appelée toutes les 10 millisecondes, sans arrêt jusqu&apos;à ce que nous y mettions un terme. Maintenant, dessinons la balle — ajoutons le code ci-dessous à notre fonction <code>draw()</code> :</p>

<pre class="brush: js notranslate">ctx.beginPath();
ctx.arc(50, 50, 10, 0, Math.PI*2);
ctx.fillStyle = &quot;#0095DD&quot;;
ctx.fill();
ctx.closePath();
</pre>

<p>Essayez votre code mis à jour maintenant, la balle devrait être repeinte sur chaque image.</p>

<h2 id="Déplacer_la_balle">Déplacer la balle</h2>

<p>Pour le moment, vous ne voyez pas la balle &quot;repeinte&quot; car elle ne bouge pas. Améliorons tout ça. Pour commencer, au lieu d&apos;une position bloquée à (50,50), nous allons définir un point de départ en bas et au milieu du canevas grâce aux variables <code>x</code> et <code>y</code> que nous utiliserons pour définir la position où le cercle est dessiné.</p>

<p>Ajoutez d&apos;abord les deux lignes suivantes au-dessus de votre fonction <code>draw()</code> pour définir <code>x</code> et <code>y</code> :</p>

<pre class="brush: js notranslate">var x = canvas.width/2;
var y = canvas.height-30;
</pre>

<p>Ensuite, mettez à jour la fonction <code>draw()</code> afin d&apos;utiliser les variables x et y dans la méthode <a href="/fr/docs/Web/API/CanvasRenderingContext2D/arc"><code>arc()</code></a> , comme indiqué dans la ligne mise en évidence ci-dessous :</p>

<pre class="brush: js; highlight:[3] notranslate">function draw() {
  ctx.beginPath();
<strong>  ctx.arc(x, y, 10, 0, Math.PI*2);</strong>
  ctx.fillStyle = &quot;#0095DD&quot;;
  ctx.fill();
  ctx.closePath();
}
</pre>

<p>Nous voici à la partie importante : nous voulons ajouter une valeur à <code>x</code> et <code>y</code> après que chaque image ait été dessinée afin de faire croire que la balle bouge. On définit ces valeurs comme <code>dx</code> et <code>dy</code> avec comme valeurs respectives 2 et -2. Ajoutez le code après la déclaration des variables <code>x</code> et <code>y</code> :</p>

<pre class="brush: js notranslate">var dx = 2;
var dy = -2;
</pre>

<p>La dernière chose à faire est de mettre à jour <code>x</code> et <code>y</code> avec nos variables <code>dx</code> et  <code>dy</code> sur chaque image, de sorte que la balle sera peinte dans la nouvelle position à chaque nouvelle image. Ajoutez les deux nouvelles lignes, indiquées ci-dessous, à votre fonction <code>draw()</code> :</p>

<pre class="brush: js notranslate">function draw() {
  ctx.beginPath();
  ctx.arc(x, y, 10, 0, Math.PI*2);
  ctx.fillStyle = &quot;#0095DD&quot;;
  ctx.fill();
  ctx.closePath();
  x += dx;
  y += dy;
}</pre>

<p>Enregistrez à nouveau votre code et essayez-le dans votre navigateur. Vous devriez avoir le résultat suivant : ça fonctionne mais on a une trainée laissée par la balle derrière elle :</p>

<p><img alt src="https://mdn.mozillademos.org/files/10430/ball-trail.png" style="display: block; height: 320px; margin: 0px auto; width: 480px;"></p>

<h2 id="Effacer_le_canevas_avant_chaque_image_frame">Effacer le canevas avant chaque image (<em>frame</em>)</h2>

<p>La balle laisse une trace parce que qu&apos;une nouveau cercle est dessiné sur chaque frame sans qu&apos;on enlève le précédent. Pas d&apos;inquiétude, il existe un moyen d&apos;effacer le contenu du canevas : <a href="/fr/docs/Web/API/CanvasRenderingContext2D/clearRect"><code>clearRect()</code></a>. Cette méthode prend en compte quatre paramètres: les coordonnées x et y du coin supérieur gauche d&apos;un rectangle et les coordonnées x et y du coin inférieur droit d&apos;un rectangle. Toute la zone couverte par ce rectangle sera effacée.</p>

<p>Ajoutez la nouvelle ligne en surbrillance ci-dessous à la fonction <code>draw()</code> :</p>

<pre class="brush: js; highlight:[2] notranslate">function draw() {
<strong>  ctx.clearRect(0, 0, canvas.width, canvas.height);</strong>
  ctx.beginPath();
  ctx.arc(x, y, 10, 0, Math.PI*2);
  ctx.fillStyle = &quot;#0095DD&quot;;
  ctx.fill();
  ctx.closePath();
  x += dx;
  y += dy;
}
</pre>

<p>Enregistrez votre code et essayez à nouveau. Cette fois, vous verrez la balle se déplacer sans laisser de trace. Toutes les 10 millisecondes, le canvas est effacé, la balle est dessinée sur une position donnée et les valeurs <code>x</code> et <code>y</code> sont mises à jour pour l&apos;image suivante (en anglais, on parle de &quot;<em>frame&quot;</em>).</p>

<h2 id="Nettoyer_notre_code">Nettoyer notre code</h2>

<p>Dans les prochains articles, nous allons ajouter de plus en plus de d&apos;instructions à la fonction <code>draw()</code>. Mieux vaut donc la garder aussi simple et propre que possible. Commençons par déplacer le code s&apos;occupant de dessiner de la balle vers une fonction séparée.</p>

<p>Remplacez la fonction <code>draw()</code> existante par les deux fonctions suivantes :</p>

<pre class="brush: js notranslate">function drawBall() {
  ctx.beginPath();
  ctx.arc(x, y, 10, 0, Math.PI*2);
  ctx.fillStyle = &quot;#0095DD&quot;;
  ctx.fill();
  ctx.closePath();
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawBall();
  x += dx;
  y += dy;
}</pre>

<h2 id="Comparez_votre_code">Comparez votre code</h2>

<p>Vous pouvez vérifier le code de cet article avec la démo qui suit et jouer avec pour mieux comprendre comment il fonctionne :</p>

<p><iframe frameborder="0" height="395" src="https://jsfiddle.net/end3r/3x5foxb1/embedded/" width="100%"></iframe></p>

<div class="summary">
<p>Exercice : Essayez de changer la vitesse de la balle en mouvement ou la direction dans laquelle elle se déplace.</p>
</div>

<h2 id="Prochaines_étapes">Prochaines étapes</h2>

<p>Nous avons dessiné nottre balle et elle se déplace mais elle ne cesse de disparaître du bord de notre canevas. Dans le troisième chapitre, nous verrons comment <a href="/fr/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript/Faire_rebondir_la_balle_sur_les_murs">faire rebondir la balle</a> contre les bords.</p>

<div class="prevnext" style="text-align: right;">
    <p><a href="/fr/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript/creer_element_canvas_et_afficher" style="float: left;" class="button">« Précédent</a><a href="/fr/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript/Faire_rebondir_la_balle_sur_les_murs" class="button">Suivant  »</a></p>
</div>
