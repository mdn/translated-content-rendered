---
title: WeakMap
slug: Web/JavaScript/Reference/Global_Objects/WeakMap
tags:
  - ECMAScript 2015
  - JavaScript
  - WeakMap
translation_of: Web/JavaScript/Reference/Global_Objects/WeakMap
original_slug: Web/JavaScript/Referencia/Objetos_globales/WeakMap
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales">Standard built-in objects</a></strong></li><li><strong><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/WeakMap"><code>WeakMap</code></a></strong></li><li data-default-state="open"><a href="#"><strong>Métodos</strong></a><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/WeakMap/clear"><code>WeakMap.prototype.clear()</code></a></s></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/WeakMap/delete"><code>WeakMap.prototype.delete()</code></a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/WeakMap/get"><code>WeakMap.prototype.get()</code></a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/WeakMap/has"><code>WeakMap.prototype.has()</code></a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/WeakMap/set"><code>WeakMap.prototype.set()</code></a></li></ol></li><li><strong>Herencia</strong></li><li><strong><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Function"><code>Function</code></a></strong></li><li><a href="#"><strong>Propiedades</strong></a><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Function/arguments"><code>Function.arguments</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Function/caller"><code>Function.caller</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Function/displayName"><code>Function.displayName</code></a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Function/length"><code>Function.length</code></a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Function/name"><code>Function.name</code></a></li></ol></li><li><a href="#"><strong>Métodos</strong></a><ol><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Function/apply"><code>Function.prototype.apply()</code></a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Function/bind"><code>Function.prototype.bind()</code></a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Function/call"><code>Function.prototype.call()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Function/toSource"><code>Function.prototype.toSource()</code></a></s></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Function/toString"><code>Function.prototype.toString()</code></a></li></ol></li><li><strong><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object"><code>Object</code></a></strong></li><li><a href="#"><strong>Propiedades</strong></a><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/proto"><code>Object.prototype.__proto__</code></a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/constructor"><code>Object.prototype.constructor</code></a></li></ol></li><li><a href="#"><strong>Métodos</strong></a><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/__defineGetter__"><code>Object.prototype.__defineGetter__()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/es/docs/Web/JavaScript/Reference/Global_Objects/Object/__defineSetter__"><code>Object.prototype.__defineSetter__()</code></a> <a href="/es/docs/Web/JavaScript/Reference/Global_Objects/Object/__defineSetter__$translate" style="opacity: 0.5;">[Traducir]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/__lookupGetter__"><code>Object.prototype.__lookupGetter__()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/es/docs/Web/JavaScript/Reference/Global_Objects/Object/__lookupSetter__"><code>Object.prototype.__lookupSetter__()</code></a> <a href="/es/docs/Web/JavaScript/Reference/Global_Objects/Object/__lookupSetter__$translate" style="opacity: 0.5;">[Traducir]</a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/hasOwnProperty"><code>Object.prototype.hasOwnProperty()</code></a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/isPrototypeOf"><code>Object.prototype.isPrototypeOf()</code></a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/propertyIsEnumerable"><code>Object.prototype.propertyIsEnumerable()</code></a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/toLocaleString"><code>Object.prototype.toLocaleString()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/toSource"><code>Object.prototype.toSource()</code></a></s></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/toString"><code>Object.prototype.toString()</code></a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/valueOf"><code>Object.prototype.valueOf()</code></a></li><li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Object/setPrototypeOf"><code>Object.setPrototypeOf()</code></a></li></ol></li></ol></section></div>

<p>El objeto <strong><code>WeakMap</code></strong> es una colección de pares clave/valor en la que las claves son objetos y los valores son valores arbitrarios.</p>

<h2 id="Sintaxis">Sintaxis</h2>

<pre class="syntaxbox notranslate"><code>new WeakMap([iterable])
</code></pre>

<h3 id="Parámetros">Parámetros</h3>

<dl>
 <dt><code>iterable</code></dt>
 <dd>Iterable es un Array u otro objeto iterable cuyos elementos son pares clave-valor (Arrays de dos elementos). Cada par clave-valor será añadido al nuevo WeakMap. null es tratado como undefined.</dd>
</dl>

<h2 id="Descripción">Descripción</h2>

<p>Las claves de los WeakMaps solamente pueden ser del tipo<code> Object</code>. Los <a href="/es/docs/Glossary/Primitivo">Primitive data types</a> como claves no están permitidos (ej. un <a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Symbol"><code>Symbol</code></a> no pueden ser una clave de <code>WeakMap</code>).</p>

<h3 id="¿Por_qué_WeakMap">¿Por qué <em>Weak</em>Map?</h3>

<p>El programador de JavaScript experimentado se habrá dado cuenta que esta API podría ser implementada en JavaScript con dos arrays (uno para las claves, otro para los valores) compartidos por los cuatro métodos de la API. Dicha implementación habría tenido dos inconvenientes principales: El primero es una búsqueda O(n) (siendo n el número de claves en el mapa). El segundo es un problema de pérdida de memoria. Con mapas escritos manualmente, el array de las claves mantendría referencias a la objetos clave, impidiéndoles ser recolectados. En los WeakMap nativos, las referencias a los objetos clave son mantenidas &quot;débilmente&quot;, lo que quiere decir que no impiden la recolección de basura en caso de que no haya otras referencias al objeto.</p>

<p>Dado que las referencias son débiles, <code>las claves de WeakMap</code> no son enumerables (ej: no existe un método que te devuelva la lista de las claves). Si existiera, la lista dependería de la recolección de basura, introduciendo indeterminismo. Si quieres una lista de las claves, se debe usar un  <a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Map"><code>Map</code></a> o mantenerla tu mismo.</p>

<h2 id="Propiedades">Propiedades</h2>

<dl>
 <dt><code>WeakMap.length</code></dt>
 <dd>El valor de la propiedad <code>length</code> es 0.</dd>
 <dt><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/WeakMap/prototype"><code>WeakMap.prototype</code></a></dt>
 <dd>Representa el prototipo para el nuevo constructor<code> WeakMap</code>. Permite añadir propiedades a todos los objetos <code>WeakMap</code>.</dd>
</dl>

<h2 id="Instancias_de_WeakMap"><code>Instancias de WeakMap</code></h2>

<p>Todas las instancias de <code>WeakMap</code> heredan de <a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/WeakMap/prototype"><code>WeakMap.prototype</code></a>.</p>

<h3 id="Propiedades_2">Propiedades</h3>



<h3 id="Métodos">Métodos</h3>



<h2 id="Ejemplos">Ejemplos</h2>

<h3 id="Usando_WeakMap">Usando <code>WeakMap</code></h3>

<pre class="brush: js notranslate">var wm1 = new WeakMap(),
    wm2 = new WeakMap(),
    wm3 = new WeakMap();
var o1 = {},
    o2 = function(){},
    o3 = window;

wm1.set(o1, 37);
wm1.set(o2, &quot;azerty&quot;);
wm2.set(o1, o2); // un valor puede ser cualquier cosa, incluidos objetos o funciones
wm2.set(o3, undefined);
wm2.set(wm1, wm2); // claves y valores pueden ser objetos cualesquiera. !Incluso WeakMaps!

wm1.get(o2); // &quot;azerty&quot;
wm2.get(o2); // undefined, porque no hay valor para o2 en wm2
wm2.get(o3); // undefined, porque es es el valor del conjunto
wm1.has(o2); // true
wm2.has(o2); // false
wm2.has(o3); // true (incluso si el valor es &apos;undefined&apos;)

wm3.set(o1, 37);
wm3.get(o1); // 37

wm1.has(o1);   // true
wm1.delete(o1);
wm1.has(o1);   // false

</pre>

<h3 id="Implementando_una_clase_tipo-WeakMap_con_un_método_.clear">Implementando una clase tipo-<code>WeakMap</code> con un método .clear()</h3>

<p>Con propósito expositivo, el siguiente ejemplo usa el nuevo costruct class  de ECMAScript 2015, que actualmente no ha sido implementado de forma amplia.</p>

<pre class="brush: js notranslate">class ClearableWeakMap {
  constructor(init) {
    this._wm = new WeakMap(init)
  }
  clear() {
    this._wm = new WeakMap()
  }
  delete(k) {
    return this._wm.delete(k)
  }
  get(k) {
    return this._wm.get(k)
  }
  has(k) {
    return this._wm.has(k)
  }
  set(k, v) {
    this._wm.set(k, v)
    return this
  }
}
</pre>

<h2 id="Especificaciones">Especificaciones</h2>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">Especificación</th>
   <th scope="col">Estado</th>
   <th scope="col">Comentario</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><a class="external" href="https://www.ecma-international.org/ecma-262/6.0/#sec-weakmap-objects" hreflang="en" lang="en">ECMAScript 2015 (6th Edition, ECMA-262)<br><small lang="es">La definición de &apos;WeakMap&apos; en esta especificación.</small></a></td>
   <td><span class="spec-Standard">Standard</span></td>
   <td>Definición inicial.</td>
  </tr>
 </tbody>
</table>

<h2 id="Compatibilidad_de_navegadores">Compatibilidad de navegadores</h2>

<div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/es/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Escritorio</a></li>
        <li><a>Móvil</a></li>
    </ul>
</div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Característica</th>
   <th>Chrome</th>
   <th>Firefox (SpiderMonkey)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>Soporte básico</td>
   <td>36</td>
   <td><a href="/en-US/Firefox/Releases/6">6.0</a> (6.0)</td>
   <td>11</td>
   <td>23</td>
   <td>7.1</td>
  </tr>
  <tr>
   <td><code>new WeakMap(iterable)</code></td>
   <td>38</td>
   <td><a href="/en-US/Firefox/Releases/36">36</a> (36)</td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td>25</td>
   <td><span style="color: #f00;">Sin soporte</span></td>
  </tr>
  <tr>
   <td><code>clear()</code></td>
   <td>36</td>
   <td><a href="/en-US/Firefox/Releases/20">20.0</a> (20.0)</td>
   <td>11</td>
   <td>23</td>
   <td>7.1</td>
  </tr>
  <tr>
   <td>Constructor argument: <code>new WeakMap(null)</code></td>
   <td><span style="color: #888;" title="Por favor actualiza esto con la versión más reciente que de soporte.">(Yes)</span></td>
   <td><a href="/en-US/Firefox/Releases/37">37</a> (37)</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
  </tr>
  <tr>
   <td>Monkey-patched <code>set()</code> in Constructor</td>
   <td><span style="color: #888;" title="Por favor actualiza esto con la versión más reciente que de soporte.">(Yes)</span></td>
   <td><a href="/en-US/Firefox/Releases/37">37</a> (37)</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
  </tr>
  <tr>
   <td><code>WeakMap()</code> without <code>new</code> throws</td>
   <td><span style="color: #888;" title="Por favor actualiza esto con la versión más reciente que de soporte.">(Yes)</span></td>
   <td><a href="/en-US/Firefox/Releases/42">42</a> (42)</td>
   <td>11</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Característica</th>
   <th>Android</th>
   <th>Firefox Mobile (SpiderMonkey)</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Soporte básico</td>
   <td>35</td>
   <td>6.0 (6.0)</td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td>iOS 8</td>
  </tr>
  <tr>
   <td><code>new WeakMap(iterable)</code></td>
   <td>38</td>
   <td>36.0 (36)</td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td><span style="color: #f00;">Sin soporte</span></td>
  </tr>
  <tr>
   <td><code>clear()</code></td>
   <td>35</td>
   <td>20.0 (20.0)</td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td>iOS 8</td>
  </tr>
  <tr>
   <td>Constructor argument: <code>new WeakMap(null)</code></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td><span style="color: #888;" title="Por favor actualiza esto con la versión más reciente que de soporte.">(Yes)</span></td>
   <td>37.0 (37)</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
  </tr>
  <tr>
   <td>Monkey-patched <code>set()</code> in Constructor</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td><span style="color: #888;" title="Por favor actualiza esto con la versión más reciente que de soporte.">(Yes)</span></td>
   <td>37.0 (37)</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
  </tr>
  <tr>
   <td><code>WeakMap()</code> without <code>new</code> throws</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td>42.0 (42)</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td></td>
   <td></td>
  </tr>
 </tbody>
</table>
</div>

<h2 id="sect1"></h2>

<h2 id="Ver_también">Ver también</h2>

<ul>
 <li><a class="link-https" href="https://bugzilla.mozilla.org/show_bug.cgi?id=547941">WeakMap bug en Mozilla</a></li>
 <li><a href="http://fitzgeraldnick.com/weblog/53/">Ocultando los detalles de implementación con los WeakMaps de ECMAScript </a>2015</li>
 <li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Map"><code>Map</code></a></li>
 <li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Set"><code>Set</code></a></li>
 <li><a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/WeakSet"><code>WeakSet</code></a></li>
</ul>
