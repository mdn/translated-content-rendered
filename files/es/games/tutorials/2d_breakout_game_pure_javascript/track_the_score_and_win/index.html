---
title: Poner un contador y terminar ganando
slug: Games/Tutorials/2D_Breakout_game_pure_JavaScript/Track_the_score_and_win
translation_of: Games/Tutorials/2D_Breakout_game_pure_JavaScript/Track_the_score_and_win
original_slug: Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Track_the_score_and_win
---
<div><section class="Quick_links" id="Quick_Links">
  <ol>
    <li class="toggle">
        <details>
            <summary>Introducción para desarrollo de juegos para la Web</summary>
            <ol>
              <li><a href="/es/docs/Games/Introduction">Introducción para desarrollo de juegos para la Web</a></li>
              <li><a href="/es/docs/Games/Anatomy">Anatomía de un videojuego</a></li>
              <li><a href="/es/docs/Games/Examples">Examples</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>APIs for game development</summary>
            <ol>
              <li><a href="/es/docs/Web/API/Canvas_API">Canvas</a></li>
              <li><a href="/es/docs/Web/CSS">CSS</a></li>
              <li><a href="/es/docs/Web/Apps/Fundamentals/User_notifications/Full_screen_api">Full screen</a></li>
              <li><a href="/es/docs/Web/API/Gamepad_API">Gamepad</a></li>
              <li><a href="/es/docs/Web/API/IndexedDB_API">IndexedDB</a></li>
              <li><a href="/es/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="/es/docs/Web/API/Pointer_Lock_API">Pointer Lock</a></li>
              <li><a href="/es/docs/Web/SVG">SVG</a></li>
              <li><a href="/es/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">Typed Arrays</a></li>
              <li><a href="/es/docs/Web/API/Web_Audio_API">Web Audio</a></li>
              <li><a href="/es/docs/Web/API/WebGL_API">WebGL</a></li>
              <li><a href="/es/docs/Web/API/WebRTC_API">WebRTC</a></li>
              <li><a href="/es/docs/Web/API/WebSockets_API">WebSockets</a></li>
              <li><a href="/es/docs/Web/API/WebVR_API">WebVR</a></li>
              <li><a href="/es/docs/Web/API/Web_Workers_API">Web Workers</a></li>
              <li><a href="/es/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Técnicas</summary>
            <ol>
              <li><a href="/es/docs/Games/Techniques/Async_scripts">asm.js</a></li>
              <li><a href="/es/docs/Web/Apps/Developing/Optimizing_startup_performance">Optimizar rendimiento de inicio</a></li>
              <li><a href="/es/docs/Games/Techniques/WebRTC_data_channels">persona-a-persona</a></li>
              <li><a href="/es/docs/Games/Techniques/Efficient_animation_for_web_games">Animaciones eficientes</a></li>
              <li><a href="/es/docs/Games/Techniques/Audio_for_Web_Games">Audio for Web Games</a></li>
              <li><a href="/es/docs/Games/Techniques/2D_collision_detection">2D collision detection</a></li>
              <li><a href="/es/docs/Games/Techniques/Tilemaps">Tiles and tilemaps overview</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>3D games on the Web</summary>
            <ol>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web">3D games on the Web overview</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Basic_theory">Explaining basic 3D theory</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_A-Frame">Building up a basic demo with A-Frame</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Babylon.js">Building up a basic demo with Babylon.js</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_PlayCanvas">Building up a basic demo with PlayCanvas</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Three.js">Building up a basic demo with Three.js</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/WebVR">WebVR</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_collision_detection">3D collision detection</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js">Bounding volume collision detection with THREE.js</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Implementing game control mechanisms</summary>
            <ol>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms">Control mechanisms</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Mobile_touch">Mobile touch</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Desktop_with_mouse_and_keyboard">Desktop with mouse and keyboard</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Desktop_with_gamepad">Desktop with gamepad</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Other">Other</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Tutorials</summary>
            <ol>
              <li><a href="/es/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript">2D breakout game using pure JavaScript</a></li>
              <li><a href="/es/docs/Games/Tutorials/2D_breakout_game_Phaser">2D breakout game using Phaser</a></li>
              <li><a href="/es/docs/Games/Tutorials/HTML5_Gamedev_Phaser_Device_Orientation">2D maze_game with device orientation</a></li>
              <li><a href="https://mozdevs.github.io/html5-games-workshop/en/guides/platformer/start-here/">2D platform game using Phaser</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Publishing games</summary>
            <ol>
              <li><a href="/es/docs/Games/Publishing_games">Publishing games overview</a></li>
              <li><a href="/es/docs/Games/Publishing_games/Game_distribution">Game distribution</a></li>
              <li><a href="/es/docs/Games/Publishing_games/Game_promotion">Game promotion</a></li>
              <li><a href="/es/docs/Games/Publishing_games/Game_monetization">Game monetization</a></li>
            </ol>
        </details>
    </li>
  </ol>
</section></div><div></div>

<p></p><div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Deteccion_colisiones" class="button">« Anterior</a><a href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Controles_raton" class="button">Siguiente  »</a></p>
</div><p></p>

<div class="summary">
<p>Este es el octavo capítulo de 10, del <a href="https://developer.mozilla.org/en-US/docs/Games/Workflows/Breakout_game_from_scratch">Gamedev Canvas tutorial</a>. Puedes encontrar el código fuente como debería quedar tras este capítulo en <a href="https://github.com/end3r/Gamedev-Canvas-workshop/blob/gh-pages/lesson08.html">Gamedev-Canvas-workshop/lesson8.html</a>.</p>
</div>

<p><span class="seoSummary">Destruir los ladrillos mola, pero para que el juego sea aún mejor, podría dar puntos cada vez que el jugador rompe un ladrillo, y mostrar un contador.</span></p>

<h2 id="El_contador">El contador</h2>

<p>Si puedes ver el contador mientras juegas, puede que consigas impresionar a tus amigos. Necesitas una variable para guardar el contador. Añade esto a tu JavaScript, después de las otras definiciones de variables:</p>

<pre class="brush: js">var score = 0;</pre>

<p>También necesitas una función <code>drawScore()</code> para enseñar el contador por pantalla. Añade esto después de la función <code>collisionDetection()</code>:</p>

<pre class="brush: js">function drawScore() {
    ctx.font = &quot;16px Arial&quot;;
    ctx.fillStyle = &quot;#0095DD&quot;;
    ctx.fillText(&quot;Score: &quot;+score, 8, 20);
}</pre>

<p>Dibujar texto en el &lt;canvas&gt; es similar a dibujar un círculo o cualquier otra figura. La definición del tipo de letra (fuente) se hace igual que en CSS, puedes fijar el tamaño y fuente con el método <a href="/es/docs/Web/API/CanvasRenderingContext2D/font" title="La documentación acerca de este tema no ha sido escrita todavía . ¡Por favor  considera contribuir !"><code>font()</code></a> method. Despúes utilizas <a href="/es/docs/Web/API/CanvasRenderingContext2D/fillStyle" title="La documentación acerca de este tema no ha sido escrita todavía . ¡Por favor  considera contribuir !"><code>fillStyle()</code></a> para fijar el color y <a href="/es/docs/Web/API/CanvasRenderingContext2D/fillText" title="La documentación acerca de este tema no ha sido escrita todavía . ¡Por favor  considera contribuir !"><code>fillText()</code></a> para escribir el texto y el lugar en el que se va a dibujar. El primer parámetro es el texto en si y los otros dos son las coordenadas.</p>

<p>Para sumar un punto cada vez que se rompe un ladrillo, añade la línea que está marcada aquí debajo:</p>

<pre class="brush: js; highlight:[9]">function collisionDetection() {
    for(c=0; c&lt;brickColumnCount; c++) {
        for(r=0; r&lt;brickRowCount; r++) {
            var b = bricks[c][r];
            if(b.status == 1) {
                if(x &gt; b.x &amp;&amp; x &lt; b.x+brickWidth &amp;&amp; y &gt; b.y &amp;&amp; y &lt; b.y+brickHeight) {
                    dy = -dy;
                    b.status = 0;
                    score++;
                }
            }
        }
    }
}</pre>

<p>Llamando a <code>drawScore()</code> (dibujar contador) desde la función <code>draw()</code> hace que se muestre el contador actualizado en la pantalla. Añade la línea siguiente en <code>draw()</code>, justo debajo de la llamada a <code>drawPaddle()</code>:</p>

<pre class="brush: js">drawScore();</pre>

<h2 id="Mostrar_un_mensaje_de_victoria_cuando_se_hayan_destruido_todos_los_ladrillos">Mostrar un mensaje de victoria cuando se hayan destruido todos los ladrillos</h2>

<p>Lo de sumar puntos funciona, pero tiene un final. ¿Qué ocurrirá cuando no queden ladrillos? Precisamente ese es el principal objetivo del juego, tendrás que dibujar un mensaje de victoria. Añade las líneas marcadas a tu función <code>collisionDetection()</code>:</p>

<pre class="brush: js; highlight:[10,11,12,13]">function collisionDetection() {
    for(c=0; c&lt;brickColumnCount; c++) {
        for(r=0; r&lt;brickRowCount; r++) {
            var b = bricks[c][r];
            if(b.status == 1) {
                if(x &gt; b.x &amp;&amp; x &lt; b.x+brickWidth &amp;&amp; y &gt; b.y &amp;&amp; y &lt; b.y+brickHeight) {
                    dy = -dy;
                    b.status = 0;
                    score++;
                    if(score == brickRowCount*brickColumnCount) {
                        alert(&quot;YOU WIN, CONGRATULATIONS!&quot;);
                        document.location.reload();
                    }
                }
            }
        }
    }
}</pre>

<p>Gracias a esto, los jugadores pueden ganar cuando rompen todos los ladrillos, que es muy importante. La función <code>document.location.reload()</code> vuelve a cargar la página y el juego empieza de nuevo, una vez se hace clic sobre el botón del alert().</p>

<h2 id="Compara_tu_código">Compara tu código</h2>

<p>Puedes comparar tu código con este:</p>

<p></p><p><iframe src="https://jsfiddle.net/end3r/mvfkcydz/embedded/" width="100%" height="320" frameborder="0"></iframe></p><p></p>

<div class="note notecard">
<p><strong>Ejercicio</strong>: añade más puntos por ladrillo y muestra el contador cuando salga el alert() del final del juego con victoria.</p>
</div>

<h2 id="Pasos_siguientes">Pasos siguientes</h2>

<p>El juego, ahora mismo, ya tiene buena pinta. En la siguiente lección conseguirás que sea más atractivo porque añadirás el <a href="https://developer.mozilla.org/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Controles_raton">Control del ratón</a>.</p>

<p></p><div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Deteccion_colisiones" class="button">« Anterior</a><a href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Controles_raton" class="button">Siguiente  »</a></p>
</div><p></p>
