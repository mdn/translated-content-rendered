---
title: Controles del ratón
slug: Games/Tutorials/2D_Breakout_game_pure_JavaScript/Mouse_controls
translation_of: Games/Tutorials/2D_Breakout_game_pure_JavaScript/Mouse_controls
original_slug: Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Controles_raton
---
<div><section class="Quick_links" id="Quick_Links">
  <ol>
    <li class="toggle">
        <details>
            <summary>Introducción para desarrollo de juegos para la Web</summary>
            <ol>
              <li><a href="/es/docs/Games/Introduction">Introducción para desarrollo de juegos para la Web</a></li>
              <li><a href="/es/docs/Games/Anatomy">Anatomía de un videojuego</a></li>
              <li><a href="/es/docs/Games/Examples">Examples</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>APIs for game development</summary>
            <ol>
              <li><a href="/es/docs/Web/API/Canvas_API">Canvas</a></li>
              <li><a href="/es/docs/Web/CSS">CSS</a></li>
              <li><a href="/es/docs/Web/Apps/Fundamentals/User_notifications/Full_screen_api">Full screen</a></li>
              <li><a href="/es/docs/Web/API/Gamepad_API">Gamepad</a></li>
              <li><a href="/es/docs/Web/API/IndexedDB_API">IndexedDB</a></li>
              <li><a href="/es/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="/es/docs/Web/API/Pointer_Lock_API">Pointer Lock</a></li>
              <li><a href="/es/docs/Web/SVG">SVG</a></li>
              <li><a href="/es/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">Typed Arrays</a></li>
              <li><a href="/es/docs/Web/API/Web_Audio_API">Web Audio</a></li>
              <li><a href="/es/docs/Web/API/WebGL_API">WebGL</a></li>
              <li><a href="/es/docs/Web/API/WebRTC_API">WebRTC</a></li>
              <li><a href="/es/docs/Web/API/WebSockets_API">WebSockets</a></li>
              <li><a href="/es/docs/Web/API/WebVR_API">WebVR</a></li>
              <li><a href="/es/docs/Web/API/Web_Workers_API">Web Workers</a></li>
              <li><a href="/es/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Técnicas</summary>
            <ol>
              <li><a href="/es/docs/Games/Techniques/Async_scripts">asm.js</a></li>
              <li><a href="/es/docs/Web/Apps/Developing/Optimizing_startup_performance">Optimizar rendimiento de inicio</a></li>
              <li><a href="/es/docs/Games/Techniques/WebRTC_data_channels">persona-a-persona</a></li>
              <li><a href="/es/docs/Games/Techniques/Efficient_animation_for_web_games">Animaciones eficientes</a></li>
              <li><a href="/es/docs/Games/Techniques/Audio_for_Web_Games">Audio for Web Games</a></li>
              <li><a href="/es/docs/Games/Techniques/2D_collision_detection">2D collision detection</a></li>
              <li><a href="/es/docs/Games/Techniques/Tilemaps">Tiles and tilemaps overview</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>3D games on the Web</summary>
            <ol>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web">3D games on the Web overview</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Basic_theory">Explaining basic 3D theory</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_A-Frame">Building up a basic demo with A-Frame</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Babylon.js">Building up a basic demo with Babylon.js</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_PlayCanvas">Building up a basic demo with PlayCanvas</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Three.js">Building up a basic demo with Three.js</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/WebVR">WebVR</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_collision_detection">3D collision detection</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js">Bounding volume collision detection with THREE.js</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Implementing game control mechanisms</summary>
            <ol>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms">Control mechanisms</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Mobile_touch">Mobile touch</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Desktop_with_mouse_and_keyboard">Desktop with mouse and keyboard</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Desktop_with_gamepad">Desktop with gamepad</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Other">Other</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Tutorials</summary>
            <ol>
              <li><a href="/es/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript">2D breakout game using pure JavaScript</a></li>
              <li><a href="/es/docs/Games/Tutorials/2D_breakout_game_Phaser">2D breakout game using Phaser</a></li>
              <li><a href="/es/docs/Games/Tutorials/HTML5_Gamedev_Phaser_Device_Orientation">2D maze_game with device orientation</a></li>
              <li><a href="https://mozdevs.github.io/html5-games-workshop/en/guides/platformer/start-here/">2D platform game using Phaser</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Publishing games</summary>
            <ol>
              <li><a href="/es/docs/Games/Publishing_games">Publishing games overview</a></li>
              <li><a href="/es/docs/Games/Publishing_games/Game_distribution">Game distribution</a></li>
              <li><a href="/es/docs/Games/Publishing_games/Game_promotion">Game promotion</a></li>
              <li><a href="/es/docs/Games/Publishing_games/Game_monetization">Game monetization</a></li>
            </ol>
        </details>
    </li>
  </ol>
</section></div><div></div>

<p></p><div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Track_the_score_and_win" class="button">« Anterior</a><a href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Terminando" class="button">Siguiente  »</a></p>
</div><p></p>

<div class="summary">
<p>Este es el noveno paso de 10 del <a href="https://developer.mozilla.org/en-US/docs/Games/Workflows/Breakout_game_from_scratch">tutorial Canvas para el desarrollo de juegos</a>. Puedes encontrar el código y pegarle un vistazo después de completar esta lección <a href="https://github.com/end3r/Gamedev-Canvas-workshop/blob/gh-pages/lesson09.html">Gamedev-Canvas-workshop/lesson9.html</a>.</p>
</div>

<p>El juego en sí está terminado, así que ahora vamos a pulirlo. Ya le hemos puesto el control del teclado y ahora le añadiremos el control del ratón<span class="seoSummary">.</span></p>

<h2 id="Detectar_el_movimiento_del_ratón">Detectar el movimiento del ratón</h2>

<p>Detectar el movimiento del ratón es más fácil que detectar las pulsaciones de las teclas. Todo lo que necesitamos es un añadir &quot;escuchador&quot; al evento <code><a href="/es/docs/Web/Reference/Events/mousemove" title="/es/docs/Web/Reference/Events/mousemove">mousemove</a></code>.Añade esta línea destrás de los otros &quot;listeners&quot;, justo debajo del evento <code>keyup</code>:</p>

<pre class="brush: js">document.addEventListener(&quot;mousemove&quot;, mouseMoveHandler, false);</pre>

<h2 id="Asociar_el_movimiento_de_la_pala_con_el_movimiento_del_ratón">Asociar el movimiento de la pala con el movimiento del ratón</h2>

<p>Podemos cambiar la posición de la pala basándonos en las coordenadas del puntero del ratón. Eso es lo que hace la función siguiente. Añádela detrás de la línea que acabas de añadir:</p>

<pre class="brush: js">function mouseMoveHandler(e) {
    var relativeX = e.clientX - canvas.offsetLeft;
    if(relativeX &gt; 0 &amp;&amp; relativeX &lt; canvas.width) {
        paddleX = relativeX - paddleWidth/2;
    }
}</pre>

<p>En esta función calculamos un valor <code style="font-style: normal; font-weight: normal;">relativeX</code>, que es la posición horizontal del ratón en el &quot;viewport&quot; (<code style="font-style: normal; font-weight: normal;">e.clientX</code>), menos la distancia entre el borde izquierdo del terreno de juego y el borde izquierdo del &quot;viewport&quot; (<code style="font-style: normal; font-weight: normal;">canvas.offsetLeft</code>).</p>

<p>Si el valor resultante es mayor que cero y menor que el ancho del terreno de juego, es que el ratón está dentro de los límites, y calculamos la posición de la paleta poniéndole el valor <code style="font-style: normal; font-weight: normal;">relativeX</code> menos la mitad del ancho de la paleta, para que el movimiento sea de verdad relativo a la mitad de la paleta.</p>

<p>Ahora, la paleta seguirá la posición del cursor del ratón pero, como restringimos el movimiento al &lt;canvas&gt;, no desaparecerá completamente por los lados.</p>

<h2 id="Compara_tu_código">Compara tu código</h2>

<p>Aquí tienes el código para comparar:</p>

<p></p><p><iframe src="https://jsfiddle.net/end3r/L3gngab5/embedded/" width="100%" height="320" frameborder="0"></iframe></p><p></p>

<div class="summary">
<p>Ejercicio: ajusta los límites del movimiento de la pala para que siempre se vea la pala completa (ahora sólo se ve media en los laterales).</p>
</div>

<h2 id="Pasos_siguientes">Pasos siguientes</h2>

<p>Ya tenemos el juego terminado, pero aún lo podemos mejorar con algunos trucos <a href="https://developer.mozilla.org/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Terminando">Finalizando</a>.</p>

<p></p><div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Track_the_score_and_win" class="button">« Anterior</a><a href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Terminando" class="button">Siguiente  »</a></p>
</div><p></p>
