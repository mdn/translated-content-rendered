---
title: Construye el muro de ladrillos
slug: Games/Tutorials/2D_Breakout_game_pure_JavaScript/Build_the_brick_field
translation_of: Games/Tutorials/2D_Breakout_game_pure_JavaScript/Build_the_brick_field
original_slug: Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Construye_grupo_bloques
---
<div><section class="Quick_links" id="Quick_Links">
  <ol>
    <li class="toggle">
        <details>
            <summary>Introducción para desarrollo de juegos para la Web</summary>
            <ol>
              <li><a href="/es/docs/Games/Introduction">Introducción para desarrollo de juegos para la Web</a></li>
              <li><a href="/es/docs/Games/Anatomy">Anatomía de un videojuego</a></li>
              <li><a href="/es/docs/Games/Examples">Examples</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>APIs for game development</summary>
            <ol>
              <li><a href="/es/docs/Web/API/Canvas_API">Canvas</a></li>
              <li><a href="/es/docs/Web/CSS">CSS</a></li>
              <li><a href="/es/docs/Web/Apps/Fundamentals/User_notifications/Full_screen_api">Full screen</a></li>
              <li><a href="/es/docs/Web/API/Gamepad_API">Gamepad</a></li>
              <li><a href="/es/docs/Web/API/IndexedDB_API">IndexedDB</a></li>
              <li><a href="/es/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="/es/docs/Web/API/Pointer_Lock_API">Pointer Lock</a></li>
              <li><a href="/es/docs/Web/SVG">SVG</a></li>
              <li><a href="/es/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">Typed Arrays</a></li>
              <li><a href="/es/docs/Web/API/Web_Audio_API">Web Audio</a></li>
              <li><a href="/es/docs/Web/API/WebGL_API">WebGL</a></li>
              <li><a href="/es/docs/Web/API/WebRTC_API">WebRTC</a></li>
              <li><a href="/es/docs/Web/API/WebSockets_API">WebSockets</a></li>
              <li><a href="/es/docs/Web/API/WebVR_API">WebVR</a></li>
              <li><a href="/es/docs/Web/API/Web_Workers_API">Web Workers</a></li>
              <li><a href="/es/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Técnicas</summary>
            <ol>
              <li><a href="/es/docs/Games/Techniques/Async_scripts">asm.js</a></li>
              <li><a href="/es/docs/Web/Apps/Developing/Optimizing_startup_performance">Optimizar rendimiento de inicio</a></li>
              <li><a href="/es/docs/Games/Techniques/WebRTC_data_channels">persona-a-persona</a></li>
              <li><a href="/es/docs/Games/Techniques/Efficient_animation_for_web_games">Animaciones eficientes</a></li>
              <li><a href="/es/docs/Games/Techniques/Audio_for_Web_Games">Audio for Web Games</a></li>
              <li><a href="/es/docs/Games/Techniques/2D_collision_detection">2D collision detection</a></li>
              <li><a href="/es/docs/Games/Techniques/Tilemaps">Tiles and tilemaps overview</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>3D games on the Web</summary>
            <ol>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web">3D games on the Web overview</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Basic_theory">Explaining basic 3D theory</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_A-Frame">Building up a basic demo with A-Frame</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Babylon.js">Building up a basic demo with Babylon.js</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_PlayCanvas">Building up a basic demo with PlayCanvas</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Three.js">Building up a basic demo with Three.js</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/WebVR">WebVR</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_collision_detection">3D collision detection</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js">Bounding volume collision detection with THREE.js</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Implementing game control mechanisms</summary>
            <ol>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms">Control mechanisms</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Mobile_touch">Mobile touch</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Desktop_with_mouse_and_keyboard">Desktop with mouse and keyboard</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Desktop_with_gamepad">Desktop with gamepad</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Other">Other</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Tutorials</summary>
            <ol>
              <li><a href="/es/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript">2D breakout game using pure JavaScript</a></li>
              <li><a href="/es/docs/Games/Tutorials/2D_breakout_game_Phaser">2D breakout game using Phaser</a></li>
              <li><a href="/es/docs/Games/Tutorials/HTML5_Gamedev_Phaser_Device_Orientation">2D maze_game with device orientation</a></li>
              <li><a href="https://mozdevs.github.io/html5-games-workshop/en/guides/platformer/start-here/">2D platform game using Phaser</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Publishing games</summary>
            <ol>
              <li><a href="/es/docs/Games/Publishing_games">Publishing games overview</a></li>
              <li><a href="/es/docs/Games/Publishing_games/Game_distribution">Game distribution</a></li>
              <li><a href="/es/docs/Games/Publishing_games/Game_promotion">Game promotion</a></li>
              <li><a href="/es/docs/Games/Publishing_games/Game_monetization">Game monetization</a></li>
            </ol>
        </details>
    </li>
  </ol>
</section></div><div></div>

<p></p><div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Fin_del_juego" class="button">« Anterior</a><a href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Deteccion_colisiones" class="button">Siguiente  »</a></p>
</div><p></p>

<div class="summary">
<p>Este es el sexto<strong> paso de 10 del</strong> <a href="https://developer.mozilla.org/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro">Tutorial del Lienzo (Canvas) para desarrollar juegos (Gamedev Canvas Tutorial)</a>. Puedes encontrar el código fuente como debería quedar tras completar esta lección en <a href="https://github.com/end3r/Gamedev-Canvas-workshop/blob/gh-pages/lesson06.html">Gamedev-Canvas-workshop/lesson6.html</a>.</p>
</div>

<p>Hemos cambiado la mecánica del juego y ahora ya podemos perder.<span class="seoSummary"> Esto es genial porque significa que el juego finalmente se comporta como un juego. Sin embargo, pronto resultará aburrido si todo lo que puedes conseguir es hacer rebotar la pelota en las paredes y en la pala. Lo que el juego necesitamos es romper ladrillos con la bola. Ahora vamos a dibujar los ladrillos.</span></p>

<h2 id="Declarar_e_inicializar_las_variables_de_los_ladrillos">Declarar e inicializar las variables de los ladrillos</h2>

<p>El propósito principal de esta lección consiste en escribir unas pocas líneas de código para los ladrillos, utilizando un bucle anidado que recorra una matriz bidimensional. Pero, antes, necesitamos preparar unas variables que definan la información sobre los ladrillos, como su ancho y alto, filas y columnas, etc. Añade estas líneas a tu programa, debajo de las otras variables que has definido antes:</p>

<pre class="brush: js">var brickRowCount = 3;
var brickColumnCount = 5;
var brickWidth = 75;
var brickHeight = 20;
var brickPadding = 10;
var brickOffsetTop = 30;
var brickOffsetLeft = 30;</pre>

<p>Aquí hemos definido el número de filas (Row) y columnas (Column) de ladrillos, su ancho (Width) y alto (Height), el hueco entre los ladrillos para que no se toquen (Padding), y un margen superior (Top) e izquierdo (Left) para que no se dibujen tocando los bordes.</p>

<p>Guardaremos nuestros ladrillos en una matriz bidimensional que contendrá las columnas (c) de los ladrillos. Cada columna contendrá, a su vez, toda la fila (r) de ladrillos. Cada ladrillo se va a representar con un objeto con las posiciones &quot;x&quot; e &quot;y&quot; en las que se dibujará. Añade esto detrás de las definiciones de las variables:</p>

<pre class="brush: js">var bricks = [];
for(c=0; c&lt;brickColumnCount; c++) {
    bricks[c] = [];
    for(r=0; r&lt;brickRowCount; r++) {
        bricks[c][r] = { x: 0, y: 0 };
    }
}</pre>

<p>El código anterior pasará por las filas y las columnas y creará los ladrillos. TEN EN CUENTA que esos objetos que representan a los ladrillos también se utilizarán para detectar colisiones más adelante.</p>

<p>Por si no lo terminas de entender... bricks[0][0] es el primer ladrillo (columna 0, fila 0) y se dibujará en &quot;x&quot; 0 e &quot;y&quot; 0. El siguiente ladrillo será el brick[0][1] (columna 0, fila 1) y se dibujará también en (0,0). Así, continuaremos hasta el final de la primera columna, que será el ladrillo bricks[0][2] porque hay 3 filas, de la 0 a la 2. Terminará así el bucle de dentro y seguirá el de fuera, valiendo ahora la &quot;c&quot; 1. Seguiremos recorriendo bricks[] hasta llegar a bricks[2][4], que es el último ladrillo.</p>

<h2 id="Dibujar_los_bloques">Dibujar los bloques</h2>

<p>Ahora vamos a crear una función para recorrer todos los bloques de la matriz y dibujarlos en la pantalla:</p>

<pre class="brush: js">function drawBricks() {
    for(c=0; c&lt;brickColumnCount; c++) {
        for(r=0; r&lt;brickRowCount; r++) {
            bricks[c][r].x = 0;
            bricks[c][r].y = 0;
            ctx.beginPath();
            ctx.rect(0, 0, brickWidth, brickHeight);
            ctx.fillStyle = &quot;#0095DD&quot;;
            ctx.fill();
            ctx.closePath();
        }
    }
}
</pre>

<p>Viene a ser lo mismo de antes, sólo que hemos añadido ctx.rect() para dibujar un rectángulo por cada ladrillo, además de otras llamadas a funciones para que, efectivamente, se dibuje el rectángulo.</p>

<p>Cada ladrillo se dibujará en la posición (0, 0), tendrá un ancho brickWidth y un alto de brickHeight.</p>

<p>Estupendo pero... ¡estamos dibujando todos los ladrillos en el mismo sitio! ¡Eso no puede ser!</p>

<p>Vamos a calcular en qué posición &quot;x&quot; e &quot;y&quot; se tiene que dibujar cada ladrillo así:</p>

<pre class="brush: js">var brickX = (c*(brickWidth+brickPadding))+brickOffsetLeft;
var brickY = (r*(brickHeight+brickPadding))+brickOffsetTop;
</pre>

<p>El primer ladrillo se dibujará arriba a la izquierda, concretamente en (brickoffsetLeft, brickOffsetTop), porque c y r valen 0.</p>

<p>El siguiente ladrillo (columna 0, fila 1) se dibujará más abajo.</p>

<p>Intenta hacer tú mismo los cálculos y verás cómo cada ladrillo de la misma columna se dibujará más abajo o más arriba según en qué fila se encuentre.</p>

<p>También verás cómo cada ladrillo de la misma fila se dibujará más a la izquierda o a la derecha según en qué columna se encuentre.</p>

<p>Vamos a terminar la función drawBricks() para que quede así:</p>

<pre class="brush: js">function drawBricks() {
    for(c=0; c&lt;brickColumnCount; c++) {
        for(r=0; r&lt;brickRowCount; r++) {
            var brickX = (c*(brickWidth+brickPadding))+brickOffsetLeft;
            var brickY = (r*(brickHeight+brickPadding))+brickOffsetTop;
            bricks[c][r].x = brickX;
            bricks[c][r].y = brickY;
            ctx.beginPath();
            ctx.rect(brickX, brickY, brickWidth, brickHeight);
            ctx.fillStyle = &quot;#0095DD&quot;;
            ctx.fill();
            ctx.closePath();
        }
    }
}</pre>

<h2 id="Dibujar_los_bloques_(ahora_sí)">Dibujar los bloques (ahora sí)</h2>

<p>Lo estamos haciendo muy bien, pero si has probado te habrás dado cuenta de que no se dibuja nada. ¿Qué es lo que falla?</p>

<p>Pues, sencillamente, que tenemos definida la función drawBricks() pero no la llamamos desde ningún sitio.</p>

<p>Añade drawBricks() dentro de draw(), justo antes de drawBall ():</p>

<pre class="brush: js">drawBricks();
</pre>

<h2 id="Compara_tu_código">Compara tu código</h2>

<p>Compara tu código con este:</p>

<p></p><p><iframe src="https://jsfiddle.net/kundan333/myd4vbwg/2/embedded/" width="100%" height="320" frameborder="0"></iframe></p><p></p>

<div class="note notecard">
<p>Ejercicio: Prueba a cambiar el número de bloques por fila o columna, o sus posiciones (utiliza las variables que definiste al principio de este capítulo).</p>
</div>

<h2 id="Pasos_siguientes">Pasos siguientes</h2>

<p>¡Así que ahora tenemos ladrillos! Un gran avance pero... la pelota no los rompe, simplemente los atraviesa. En el siguiente capítulo lo arreglaremos: <a href="https://developer.mozilla.org/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Deteccion_colisiones">Detección de colisiones</a>.</p>

<p></p><div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Fin_del_juego" class="button">« Anterior</a><a href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Deteccion_colisiones" class="button">Siguiente  »</a></p>
</div><p></p>
