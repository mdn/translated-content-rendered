---
title: Terminando
slug: Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Terminando
translation_of: Games/Tutorials/2D_Breakout_game_pure_JavaScript/Finishing_up
---
<div><section class="Quick_links" id="Quick_Links">
  <ol>
    <li class="toggle">
        <details>
            <summary>Introducción para desarrollo de juegos para la Web</summary>
            <ol>
              <li><a href="/es/docs/Games/Introduction">Introducción para desarrollo de juegos para la Web</a></li>
              <li><a href="/es/docs/Games/Anatomy">Anatomía de un videojuego</a></li>
              <li><a href="/es/docs/Games/Examples">Examples</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>APIs for game development</summary>
            <ol>
              <li><a href="/es/docs/Web/API/Canvas_API">Canvas</a></li>
              <li><a href="/es/docs/Web/CSS">CSS</a></li>
              <li><a href="/es/docs/Web/Apps/Fundamentals/User_notifications/Full_screen_api">Full screen</a></li>
              <li><a href="/es/docs/Web/API/Gamepad_API">Gamepad</a></li>
              <li><a href="/es/docs/Web/API/IndexedDB_API">IndexedDB</a></li>
              <li><a href="/es/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="/es/docs/Web/API/Pointer_Lock_API">Pointer Lock</a></li>
              <li><a href="/es/docs/Web/SVG">SVG</a></li>
              <li><a href="/es/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">Typed Arrays</a></li>
              <li><a href="/es/docs/Web/API/Web_Audio_API">Web Audio</a></li>
              <li><a href="/es/docs/Web/API/WebGL_API">WebGL</a></li>
              <li><a href="/es/docs/Web/API/WebRTC_API">WebRTC</a></li>
              <li><a href="/es/docs/Web/API/WebSockets_API">WebSockets</a></li>
              <li><a href="/es/docs/Web/API/WebVR_API">WebVR</a></li>
              <li><a href="/es/docs/Web/API/Web_Workers_API">Web Workers</a></li>
              <li><a href="/es/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Técnicas</summary>
            <ol>
              <li><a href="/es/docs/Games/Techniques/Async_scripts">asm.js</a></li>
              <li><a href="/es/docs/Web/Apps/Developing/Optimizing_startup_performance">Optimizar rendimiento de inicio</a></li>
              <li><a href="/es/docs/Games/Techniques/WebRTC_data_channels">persona-a-persona</a></li>
              <li><a href="/es/docs/Games/Techniques/Efficient_animation_for_web_games">Animaciones eficientes</a></li>
              <li><a href="/es/docs/Games/Techniques/Audio_for_Web_Games">Audio for Web Games</a></li>
              <li><a href="/es/docs/Games/Techniques/2D_collision_detection">2D collision detection</a></li>
              <li><a href="/es/docs/Games/Techniques/Tilemaps">Tiles and tilemaps overview</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>3D games on the Web</summary>
            <ol>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web">3D games on the Web overview</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Basic_theory">Explaining basic 3D theory</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_A-Frame">Building up a basic demo with A-Frame</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Babylon.js">Building up a basic demo with Babylon.js</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_PlayCanvas">Building up a basic demo with PlayCanvas</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Three.js">Building up a basic demo with Three.js</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_on_the_web/WebVR">WebVR</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_collision_detection">3D collision detection</a></li>
              <li><a href="/es/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js">Bounding volume collision detection with THREE.js</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Implementing game control mechanisms</summary>
            <ol>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms">Control mechanisms</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Mobile_touch">Mobile touch</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Desktop_with_mouse_and_keyboard">Desktop with mouse and keyboard</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Desktop_with_gamepad">Desktop with gamepad</a></li>
              <li><a href="/es/docs/Games/Techniques/Control_mechanisms/Other">Other</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Tutorials</summary>
            <ol>
              <li><a href="/es/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript">2D breakout game using pure JavaScript</a></li>
              <li><a href="/es/docs/Games/Tutorials/2D_breakout_game_Phaser">2D breakout game using Phaser</a></li>
              <li><a href="/es/docs/Games/Tutorials/HTML5_Gamedev_Phaser_Device_Orientation">2D maze_game with device orientation</a></li>
              <li><a href="https://mozdevs.github.io/html5-games-workshop/en/guides/platformer/start-here/">2D platform game using Phaser</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Publishing games</summary>
            <ol>
              <li><a href="/es/docs/Games/Publishing_games">Publishing games overview</a></li>
              <li><a href="/es/docs/Games/Publishing_games/Game_distribution">Game distribution</a></li>
              <li><a href="/es/docs/Games/Publishing_games/Game_promotion">Game promotion</a></li>
              <li><a href="/es/docs/Games/Publishing_games/Game_monetization">Game monetization</a></li>
            </ol>
        </details>
    </li>
  </ol>
</section></div><div></div>

<p></p><div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Controles_raton" class="button">« Anterior</a><br></p>
</div><p></p>

<div class="summary">
<p>Este es el último de los 10 pasos del <a href="https://developer.mozilla.org/en-US/docs/Games/Workflows/Breakout_game_from_scratch">Gamedev Canvas tutorial</a>. Puedes encontrar el código fuente tal y como quedará al terminar esta lección en <a href="https://github.com/end3r/Gamedev-Canvas-workshop/blob/gh-pages/lesson10.html">Gamedev-Canvas-workshop/lesson10.html</a>.</p>
</div>

<p>Siempre es posible mejorar cualquier juego que hagamos. Por ejemplo, podemos dar vidas al jugador. Así, aunque pierda la bola una o dos veces, todavía puede intentar derribar todo el muro. También podemos mejorar los aspectos gráficos.</p>

<h2 id="Dar_vidas_al_jugador">Dar vidas al jugador</h2>

<p>Dar vidas es bastante sencillo. Primero, añade una variable para guardar el número de vidas que tiene en cada momento. Ponla después de las que ya tienes:</p>

<pre class="brush: js">var lives = 3;</pre>

<p>Mostrar por pantalla el número de vidas es prácticamente lo mismo que mostrar el contador de puntos. Añade la función siguiente detrás de la función <code>drawScore()</code>:</p>

<pre class="brush: js">function drawLives() {
    ctx.font = &quot;16px Arial&quot;;
    ctx.fillStyle = &quot;#0095DD&quot;;
    ctx.fillText(&quot;Lives: &quot;+lives, canvas.width-65, 20);
}</pre>

<p>En lugar de terminar el juego inmediatamente, restaremos una vida hasta que ya no quede ninguna. También podemos colocar la bola y la paleta en la posición inicial cuando el jugador empiece con la vida siguiente. En la función <code style="font-style: normal; font-weight: normal;">draw()</code> cambia las dos líneas siguientes...</p>

<pre class="brush: js">alert(&quot;GAME OVER&quot;);
document.location.reload();</pre>

<p>... por estas otras:</p>

<pre class="brush: js">lives--;
if(!lives) {
    alert(&quot;GAME OVER&quot;);
    document.location.reload();
}
else {
    x = canvas.width/2;
    y = canvas.height-30;
    dx = 2;
    dy = -2;
    paddleX = (canvas.width-paddleWidth)/2;
}</pre>

<p>Ahora, cuando la bola toca el fondo, restamos una vida. Si no queda ninguna, el jugador pierde y termina la partida. Si queda alguna, entonces colocamos la bola y la paleta en el centro, y hacemos que la bola vaya en la nueva dirección correcta y a la velocidad inicial.</p>

<h3 id="Sacar_por_pantalla_el_contador_de_vidas">Sacar por pantalla el contador de vidas</h3>

<p>Tienes que añadir una llamada a <code>drawLives()</code> dentro de <code>draw()</code> debajo de la llamada a <code>drawScore():</code></p>

<pre class="brush: js">drawLives();
</pre>

<h2 id="Mejorar_el_refresco_con_requestAnimationFrame()">Mejorar el refresco con requestAnimationFrame()</h2>

<p>Ahora vamos a ocuparnos de algo que no es particular de este juego, sino de la forma en la que se muestran las imágenes en pantalla.</p>

<p><a href="/es/docs/Web/API/Window/requestAnimationFrame" title="window.requestAnimationFrame informa al navegador que quieres realizar una animación y solicita que el navegador programe el repintado de la ventana para el próximo ciclo de animación. El método acepta como argumento una función a la que llamar antes de efectuar el repintado."><code>requestAnimationFrame</code></a> ayuda al navegador a refrescar la imagen mejor que con el método <a href="/es/docs/Web/API/WindowTimers/setInterval" title="El valor de retorno procesoID es un valor numérico distinto de cero que identifica al temporizador que fue creado al llamar setInterval(); este valor puede ser usado como parámetro en la función Window.clearInterval() para detener el temporizador. Las funciones setInterval() y setTimeout() comparten la misma pila de IDs, por lo que, técnicamente, los comandos clearInterval() y clearTimeout() pueden usarse indiscriminadamente. Sin embargo, por motivos de claridad y mantenimiento, es importante usarlos como corresponde."><code>setInterval()</code></a> que estamos utilizando. Cambia la línea siguiente...</p>

<pre class="brush: js">setInterval(draw, 10);</pre>

<p>...por esta otra:</p>

<pre class="brush: js">draw();</pre>

<p>Y, ahora, al final de la función draw(), justo antes de la llave que la cierra, añade la línea siguiente, que hará que la función <code>draw()</code> se llame a sí misma una y otra vez:</p>

<pre class="brush: js">requestAnimationFrame(draw);</pre>

<p>Ahora draw() se ejecuta una y otra vez con un bucle <code>requestAnimationFrame()</code> pero, en lugar de hacerlo cada 10 milisegundos, dejamos que sea el navegadro quien decida cada cuánto tiempo. El navegador sincronizará el refresco, es decir, el número de fotogramas por segundo, a lo que sea capaz la máquina que está ejecutando el juego. De este modo la animación será más eficiente y más suave que el viejo método <code>setInterval()</code>.</p>

<h2 id="Compara_tu_código">Compara tu código</h2>

<p>Ya hemos terminado. ¡La versión final del juego está lista para publicar!</p>

<p></p><p><iframe src="https://jsfiddle.net/end3r/9temh0ta/embedded/" width="100%" height="320" frameborder="0"></iframe></p><p></p>

<div class="note">
<p><strong>Ejercicio</strong>: cambia el número de vidas y el ángulo de la trayectoria de la bola cuando golpea la paleta.</p>
</div>

<h2 id="Game_over_-_de_momento!">Game over - de momento!</h2>

<p>Enhorabuena, has terminado todas las lecciones. Ya has aprendido las técnicas básicas de manipulación del &lt;canvas&gt; y la lógica que hay detrás de los juegos 2D sencillos.</p>

<p>Ahora sería un buen momento para aprender a utilizar entornos de desarrollo (frameworks) y de continuar con el desarrollo de juegos. Puedes echar un vistazo a estas otra forma de realizar el mismo juego que has visto en <a href="https://developer.mozilla.org/en-US/docs/Games/Workflows/2D_breakout_game_Phaser">2D breakout game using Phaser</a>, o de echar un vistazo al tutorial <a href="https://developer.mozilla.org/en-US/docs/Games/Workflows/HTML5_Gamedev_Phaser_Device_Orientation">Cyber Orb built in Phaser</a>. También puedes leer el contenido de <a href="https://developer.mozilla.org/en/docs/Games">Games section on MDN</a> para inspirarte y seguir aprendiendo.</p>

<p>También puedes volve al <a href="https://developer.mozilla.org/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro">índice de este tutorial</a>. ¡Diviértete programando!</p>

<p></p><div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/es/docs/Games/Workflows/Famoso_juego_2D_usando_JavaScript_puro/Controles_raton" class="button">« Anterior</a><br></p>
</div><p></p>
