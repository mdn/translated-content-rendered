---
title: Updating web applications for Firefox 3
slug: Mozilla/Firefox/Releases/3/Updating_web_applications
tags:
  - Firefox 3
  - 要更新
translation_of: Mozilla/Firefox/Releases/3/Updating_web_applications
---
<p> 来たる Firefox 3 では、あなたが利用したいであろう新機能と同様に、ウェブサイトやウェブアプリケーションに影響するであろう多くの変更が施されています。この記事は Firefox 3 を最大限活用するためにあなたのコンテンツを更新する作業の出発点となるでしょう。</p>

<p><span id="DOM_changes"></span></p>

<h3 id="DOM_.E3.81.AE.E5.A4.89.E6.9B.B4" name="DOM_.E3.81.AE.E5.A4.89.E6.9B.B4">DOM の変更</h3>

<p></p><p>外部ドキュメントからのノードは、現在のドキュメントに挿入する前に <a href="/ja/docs/Web/API/Document/importNode" title="外部ドキュメントからノードのコピーを作成し、現在のドキュメントに挿入できるようにします。"><code>document.importNode()</code></a> を使ってクローンを作る (あるいは
    <a href="/ja/docs/Web/API/Document/adoptNode" title="外部ドキュメントからノードを取り込みます。ノードとそのサブツリーは、(もしあれば) 元あったドキュメントから削除され、ownerDocument が現在のドキュメントに変更されます。そして、そのノードが現在のドキュメントに挿入できるようになります。"><code>document.adoptNode()</code></a> を使って取り込む) べきです。<a href="/ja/docs/Web/API/Node/ownerDocument" title="ownerDocument プロパティは、指定ノードを内包するノードツリーのトップレベルのドキュメントオブジェクトを返します。"><code>Node.ownerDocument</code></a> 問題の詳細については
    <a href="http://www.w3.org/DOM/faq.html#ownerdoc" class="external" rel="noopener">W3C DOM FAQ</a> を参照してください。</p>

    <p>Firefox では現在このルールを強制していません。Firefox 3 の開発中には強制していた時期もありましたが、このルールを強制すると多くのサイトが機能しなくなってしまうため取りやめになりました。
    将来的な互換性を高めるため、Web 開発者にはこのルールに従ってコードを修正することを推奨します。</p><p></p>

<p><span id="HTML_changes"></span></p>

<h3 id="HTML_.E3.81.AE.E5.A4.89.E6.9B.B4" name="HTML_.E3.81.AE.E5.A4.89.E6.9B.B4">HTML の変更</h3>

<p><span id="Changes_to_character_set_inheritance"></span></p>

<h4 id=".E3.82.AD.E3.83.A3.E3.83.A9.E3.82.AF.E3.82.BF.E3.82.BB.E3.83.83.E3.83.88.E7.B6.99.E6.89.BF.E3.81.AB.E5.AF.BE.E3.81.99.E3.82.8B.E5.A4.89.E6.9B.B4" name=".E3.82.AD.E3.83.A3.E3.83.A9.E3.82.AF.E3.82.BF.E3.82.BB.E3.83.83.E3.83.88.E7.B6.99.E6.89.BF.E3.81.AB.E5.AF.BE.E3.81.99.E3.82.8B.E5.A4.89.E6.9B.B4">キャラクタセット継承に対する変更</h4>

<p>Firefox 3 では、frame や iframe が親のキャラクタセットを継承できてしまうセキュリティ上のバグが修正されています。これにより、場合によっては問題が起こる可能性があります。フレームが親のキャラクタセットを継承できるのは、フレームと親がともに同じサーバーから読み込まれている場合に限られます。もしあなたのページが、他のサーバーから読み込まれたフレームが同じキャラクタセットを継承することを前提に作られているなら、フレームの HTML を更新してキャラクタセットを明確に指定するべきです。</p>

<p><span id="Change_to_the_SCRIPT_element"></span></p>

<h4 id="SCRIPT_.E8.A6.81.E7.B4.A0.E3.81.AB.E5.AF.BE.E3.81.99.E3.82.8B.E5.A4.89.E6.9B.B4" name="SCRIPT_.E8.A6.81.E7.B4.A0.E3.81.AB.E5.AF.BE.E3.81.99.E3.82.8B.E5.A4.89.E6.9B.B4">SCRIPT 要素に対する変更</h4>

<p><code>text/html</code> 文書における <span class="nowiki">&lt;script&gt;</span> 要素は、たとえ 間に内容を含めなくても、HTML 4 文書における 閉じ タグである <span class="nowiki">&lt;/script&gt;</span> を必要とするようになりました。以前のバージョンの Firefox では、以下のようにすることが可能でした。：</p>

<pre class="eval">&lt;script ... /&gt;
</pre>

<p>今バージョンからマークアップは HTML の仕様に従わなければならず（それが実際に HTML である場合）、以下のように実際に閉じなければなりません。：</p>

<pre class="eval">&lt;script ...&gt;&lt;/script&gt;
</pre>

<p>これは互換性とセキュリティの両方を改善します。</p>

<p><span id="CSS_changes"></span></p>

<h3 id="CSS_.E3.81.AE.E5.A4.89.E6.9B.B4" name="CSS_.E3.81.AE.E5.A4.89.E6.9B.B4">CSS の変更</h3>

<p><span id="Change_to_font-size_based_on_em,_ex_units"></span></p>

<h4 id="em.E3.80.81ex_.E5.8D.98.E4.BD.8D.E3.81.AB.E5.9F.BA.E3.81.A5.E3.81.84.E3.81.9F_font-size_.E3.81.AB.E5.AF.BE.E3.81.99.E3.82.8B.E5.A4.89.E6.9B.B4" name="em.E3.80.81ex_.E5.8D.98.E4.BD.8D.E3.81.AB.E5.9F.BA.E3.81.A5.E3.81.84.E3.81.9F_font-size_.E3.81.AB.E5.AF.BE.E3.81.99.E3.82.8B.E5.A4.89.E6.9B.B4">em、ex 単位に基づいた font-size に対する変更</h4>

<p>em、ex 単位での font-size の値はユーザの最小フォントサイズ設定の影響を受けていました。例えば、フォントが最小フォントサイズより大きく表示されるなら、em と ex 単位で font-size を指定されたフォントは最小フォントサイズ設定に従って拡大されるでしょう。これは割合に基づいたフォントサイズの振る舞いと矛盾していました。</p>

<p>em 及び ex 単位での font-size の値は、ユーザの最小フォントサイズの影響を受けることなく、&quot;意図されたフォントサイズ&quot; に基づくようになりました。言い換えれば、フォントサイズは常にデザイナーの意図に従って計算され、その後に最小フォントサイズのための調整が行われるようになったということです。</p>

<p>デモは <a href="https://bugzilla.mozilla.org/attachment.cgi?id=322943" class="link-https" rel="freelink">https://bugzilla.mozilla.org/attachment.cgi?id=322943</a> を参照してください（違いを知るためには最小フォントサイズを 6 以上にして見る必要があります。二つの箱のカスケードは Firefox 2 では異なった振る舞いをします。なぜなら、em ベースのフォントサイズは最小フォントサイズの &quot;影響を受ける&quot; からです）。</p>

<p><span id="Security_changes"></span></p>

<h3 id=".E3.82.BB.E3.82.AD.E3.83.A5.E3.83.AA.E3.83.86.E3.82.A3.E3.81.AB.E9.96.A2.E3.81.99.E3.82.8B.E5.A4.89.E6.9B.B4" name=".E3.82.BB.E3.82.AD.E3.83.A5.E3.83.AA.E3.83.86.E3.82.A3.E3.81.AB.E9.96.A2.E3.81.99.E3.82.8B.E5.A4.89.E6.9B.B4">セキュリティに関する変更</h3>

<p><span id="Chrome_access"></span></p>

<h4 id=".E3.82.AF.E3.83.AD.E3.83.BC.E3.83.A0.E3.81.B8.E3.81.AE.E3.82.A2.E3.82.AF.E3.82.BB.E3.82.B9" name=".E3.82.AF.E3.83.AD.E3.83.BC.E3.83.A0.E3.81.B8.E3.81.AE.E3.82.A2.E3.82.AF.E3.82.BB.E3.82.B9">クロームへのアクセス</h4>

<p>Firefox のこれまでのバージョンでは、Web ページは <code><a class="external" rel="freelink">chrome://</a></code> プロトコルを使ってクロームからスクリプトや画像を読み込むことが可能でした。特に、このような仕様によって、アドオンがインストールされているかどうかをサイトが判別することが可能でした。これは、ブラウザにセキュリティ機能を追加するアドオンを回避して、ユーザのセキュリティを侵害するのに利用される恐れがありました。</p>

<p>Firefox 3 では、Web コンテンツは <code><a class="external" rel="freelink">chrome://browser/</a></code> および <code><a class="external" rel="freelink">chrome://toolkit/</a></code> 以下にあるコンテンツに限ってアクセスできます。これらのファイルは Web コンテンツからアクセスされることを意図したものです。他のクロームコンテンツはすべて、Web からのアクセスが禁止されます。</p>

<p>ただし、拡張機能が、内部のコンテンツを Web からアクセス可能にする方法があります。その方法とは、以下のように、<code>chrome.manifest</code> ファイルに特別なフラグを指定することです。</p>

<p>content mypackage location/ contentaccessible=yes</p>

<p>これは頻繁に必要となるものではありませんが、Web からのアクセスが必要な、まれなケースのために用意されています。Firefox はユーザに拡張が <code>contentaccessible</code> フラグをこのような方法で用いることで潜在的セキュリティリスクになることを警告するかもしれないことに注意してください。</p>

<div class="note notecard"><strong>注意:</strong> Firefox 2 では <code>contentaccessible</code> フラグが認識されない (フラグを含む行全体が無視されてしまう) ことから、アドオンを Firefox 2 と Firefox 3 の両方に対応させたい場合は、以下のように指定します。

<pre class="eval">content mypackage location/
content mypackage location/ contentaccessible=yes
</pre>
</div>

<p><span id="File_upload_fields"></span></p>

<h4 id=".E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.A2.E3.83.83.E3.83.97.E3.83.AD.E3.83.BC.E3.83.89.E7.94.A8.E3.83.95.E3.82.A9.E3.83.BC.E3.83.A0.E9.A0.85.E7.9B.AE" name=".E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.A2.E3.83.83.E3.83.97.E3.83.AD.E3.83.BC.E3.83.89.E7.94.A8.E3.83.95.E3.82.A9.E3.83.BC.E3.83.A0.E9.A0.85.E7.9B.AE">ファイルアップロード用フォーム項目</h4>

<p>Firefox のこれまでのバージョンでは、ユーザがファイルをアップロードするために送信する際、そのファイルのフルパスが Web アプリケーションに公開されてしまう場合がありました。このプライバシーの懸念は、Firefox 3 で、ファイル名のみをWeb アプリケーションに公開するよう仕様を変更することで解決されました。</p>

<p><span id="JavaScript_changes"></span></p>

<h3 id="JavaScript_.E3.81.AE.E5.A4.89.E6.9B.B4" name="JavaScript_.E3.81.AE.E5.A4.89.E6.9B.B4">JavaScript の変更</h3>

<p>Firefox 3 は <a href="ja/New_in_JavaScript_1.8">JavaScript 1.8</a> をサポートします。あなたの Web サイトや Web アプリケーションの更新が必要となりうる重要な変更点としては、時代遅れであり非標準の <code>Script</code> オブジェクトがサポートされなくなることが挙げられます。これは <code><span class="nowiki">&lt;script&gt;</span></code> タグではなく、標準化されることのなかった JavaScript オブジェクトのことです。どちらにしてもあなたが使用していた可能性は低いでしょうから、これが問題になることは恐らくないでしょう。</p>

<p><span id="See_also"></span></p>

<h3 id=".E5.8F.82.E8.80.83" name=".E5.8F.82.E8.80.83">参考</h3>

<ul>
 <li><a href="ja/Firefox_3_for_developers">開発者のための Firefox 3</a></li>
 <li><a href="ja/New_in_JavaScript_1.8">New in JavaScript 1.8</a></li>
 <li><a href="ja/Updating_extensions_for_Firefox_3">拡張機能を Firefox 3 のためにアップデート</a></li>
</ul>
