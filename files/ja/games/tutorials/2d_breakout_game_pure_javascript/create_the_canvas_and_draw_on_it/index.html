---
title: Canvasを作ってその上に描画する
slug: >-
  Games/Tutorials/2D_Breakout_game_pure_JavaScript/Create_the_Canvas_and_draw_on_it
translation_of: >-
  Games/Tutorials/2D_Breakout_game_pure_JavaScript/Create_the_Canvas_and_draw_on_it
original_slug: >-
  Games/Workflows/2D_Breakout_game_pure_JavaScript/Create_the_Canvas_and_draw_on_it
---
<div><section class="Quick_links" id="Quick_Links">
  <ol>
    <li class="toggle">
        <details>
            <summary>Web のゲーム開発紹介</summary>
            <ol>
              <li><a href="/ja/docs/Games/Introduction">Web のゲーム開発紹介</a></li>
              <li><a href="/ja/docs/Games/Anatomy">ビデオゲームとの違い</a></li>
              <li><a href="/ja/docs/Games/Examples">Examples</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>ツール</summary>
            <ol>
              <li><a href="/ja/docs/Web/API/Canvas_API">Canvas</a></li>
              <li><a href="/ja/docs/Web/CSS">CSS</a></li>
              <li><a href="/ja/docs/Web/Apps/Fundamentals/User_notifications/Full_screen_api">Full screen</a></li>
              <li><a href="/ja/docs/Web/API/Gamepad_API">Gamepad</a></li>
              <li><a href="/ja/docs/Web/API/IndexedDB_API">IndexedDB</a></li>
              <li><a href="/ja/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="/ja/docs/Web/API/Pointer_Lock_API">Pointer Lock</a></li>
              <li><a href="/ja/docs/Web/SVG">SVG</a></li>
              <li><a href="/ja/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">Typed Arrays</a></li>
              <li><a href="/ja/docs/Web/API/Web_Audio_API">Web Audio</a></li>
              <li><a href="/ja/docs/Web/API/WebGL_API">WebGL</a></li>
              <li><a href="/ja/docs/Web/API/WebRTC_API">WebRTC</a></li>
              <li><a href="/ja/docs/Web/API/WebSockets_API">WebSockets</a></li>
              <li><a href="/ja/docs/Web/API/WebVR_API">WebVR</a></li>
              <li><a href="/ja/docs/Web/API/Web_Workers_API">Web Workers</a></li>
              <li><a href="/ja/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>ゲーム開発テクニック</summary>
            <ol>
              <li><a href="/ja/docs/Games/Techniques/Async_scripts">asm.js の同期スクリプトを利用する</a></li>
              <li><a href="/ja/docs/Web/Apps/Developing/Optimizing_startup_performance">起動パフォーマンスを最適化する</a></li>
              <li><a href="/ja/docs/Games/Techniques/WebRTC_data_channels">ピア通信チャンネルとして WebRTC を利用する</a></li>
              <li><a href="/ja/docs/Games/Techniques/Efficient_animation_for_web_games">Web ゲームの効率的なアニメーション</a></li>
              <li><a href="/ja/docs/Games/Techniques/Audio_for_Web_Games">Web ゲーム向けの音</a></li>
              <li><a href="/ja/docs/Games/Techniques/2D_collision_detection">2D 衝突検出</a></li>
              <li><a href="/ja/docs/Games/Techniques/Tilemaps">タイルとタイルマップの概要</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Web上の 3D ゲームの概要</summary>
            <ol>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web">Web上の 3D ゲームの概要</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web/Basic_theory">基本の 3D理論の説明</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_A-Frame">A-Frame</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Babylon.js">Babylon.js</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_PlayCanvas">PlayCanvas を利用した基本的なデモの制作</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Three.js">Three.js を使った基本的なデモ製作</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web/WebVR">WebVR</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_collision_detection">3D 衝突検出の概要</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js">THREE.js を使ったバウンディングボリューム衝突検出</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Implementing game control mechanisms</summary>
            <ol>
              <li><a href="/ja/docs/Games/Techniques/Control_mechanisms">Control mechanisms</a></li>
              <li><a href="/ja/docs/Games/Techniques/Control_mechanisms/Mobile_touch">Mobile touch</a></li>
              <li><a href="/ja/docs/Games/Techniques/Control_mechanisms/Desktop_with_mouse_and_keyboard">Desktop with mouse and keyboard</a></li>
              <li><a href="/ja/docs/Games/Techniques/Control_mechanisms/Desktop_with_gamepad">Desktop with gamepad</a></li>
              <li><a href="/ja/docs/Games/Techniques/Control_mechanisms/Other">Other</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>チュートリアル</summary>
            <ol>
              <li><a href="/ja/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript">そのままの JavaScript を使ったブロックくずしゲーム</a></li>
              <li><a href="/ja/docs/Games/Tutorials/2D_breakout_game_Phaser">Phaser を使ったブロックくずしゲーム</a></li>
              <li><a href="/ja/docs/Games/Tutorials/HTML5_Gamedev_Phaser_Device_Orientation">デバイス回転方向を使った 2D 迷路ゲーム</a></li>
              <li><a href="https://mozdevs.github.io/html5-games-workshop/en/guides/platformer/start-here/">Phaser を使った 2D プラットフォームゲーム</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>ゲームを公開する</summary>
            <ol>
              <li><a href="/ja/docs/Games/Publishing_games">ゲームを公開するには</a></li>
              <li><a href="/ja/docs/Games/Publishing_games/Game_distribution">ゲームの配信</a></li>
              <li><a href="/ja/docs/Games/Publishing_games/Game_promotion">ゲームのプロモーション</a></li>
              <li><a href="/ja/docs/Games/Publishing_games/Game_monetization">ゲームのマネタイズ</a></li>
            </ol>
        </details>
    </li>
  </ol>
</section></div><div></div>

<p></p><div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/ja/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript" class="button">« 前のページ</a><a href="/ja/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript/Move_the_ball" class="button">次のページ  »</a></p>
</div><p></p>

<div class="summary">
<p>これは<a href="https://developer.mozilla.org/en-US/docs/Games/Workflows/Breakout_game_from_scratch">ゲーム開発Canvasチュートリアル</a>の10ステップのうち<strong>1番最初</strong>のステップです。このレッスンを終えたあとの完成予想のソースコードは<a href="https://github.com/end3r/Gamedev-Canvas-workshop/blob/gh-pages/lesson01.html">Gamedev-Canvas-workshop/lesson1.html</a>で入手できます。</p>
</div>

<p><span class="seoSummary">ゲームの機能を書き始める前に、ゲーム内部を記述する基本的な構造を作る必要があります。これにはHTMLと<a href="/ja/docs/Web/HTML/Element/canvas" title="HTML の &lt;canvas&gt; 要素 と Canvas スクリプティング API や WebGL API を使用して、グラフィックスやアニメーションを描画することができます。"><code>&lt;canvas&gt;</code></a>要素を用います。</span></p>

<h2 id="ゲームのHTML">ゲームのHTML</h2>

<p>ゲームは全て<a href="/ja/docs/Web/HTML/Element/canvas" title="HTML の &lt;canvas&gt; 要素 と Canvas スクリプティング API や WebGL API を使用して、グラフィックスやアニメーションを描画することができます。"><code>&lt;canvas&gt;</code></a>要素に描画されるため、HTML文書構造は極めて簡潔です。好きなテキストエディタを使って新しいHTML文書を作成し、適当な場所に<code>index.html</code>として保存してください。そして、そのHTML文書に次のコードを追加します。</p>

<pre class="brush: html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;title&gt;Gamedev Canvas Workshop&lt;/title&gt;
    &lt;style&gt;
    	* { padding: 0; margin: 0; }
    	canvas { background: #eee; display: block; margin: 0 auto; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;canvas id=&quot;myCanvas&quot; width=&quot;480&quot; height=&quot;320&quot;&gt;&lt;/canvas&gt;

&lt;script&gt;
	// JavaScriptのコードがここに入ります
&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>

<p><code>charset</code> を定義し、<a href="/ja/docs/Web/HTML/Element/title" title="HTML 題名要素 (&lt;title&gt;) は、ブラウザーのタイトルバーやページのタブに表示される文書の題名を定義します。"><code>&lt;title&gt;</code></a>と簡単ななCSSをヘッダに記述しました。本体には<a href="/ja/docs/Web/HTML/Element/canvas" title="HTML の &lt;canvas&gt; 要素 と Canvas スクリプティング API や WebGL API を使用して、グラフィックスやアニメーションを描画することができます。"><code>&lt;canvas&gt;</code></a>と<a href="/ja/docs/Web/HTML/Element/script" title="HTML の &lt;script&gt; 要素は、実行できるコードを埋め込んだり参照したりするために使用されます。ふつうは JavaScript のコードの埋め込みや参照に使用されます。"><code>&lt;script&gt;</code></a>要素があり、前者にはゲームを描画し、後者にはそれを制御するJavaScriptのコードを記述します。<a href="/ja/docs/Web/HTML/Element/canvas" title="HTML の &lt;canvas&gt; 要素 と Canvas スクリプティング API や WebGL API を使用して、グラフィックスやアニメーションを描画することができます。"><code>&lt;canvas&gt;</code></a>要素は簡単に参照を取得できるように<code>myCanvas</code>という<code>id</code>を持ち、幅は480ピクセル、高さは320ピクセルとしています。このチュートリアルで書く全てのJavaScriptのコードは開始の<code>&lt;script&gt;</code>と終了の<code>&lt;/script&gt;</code>タグの間に配置されます。</p>

<h2 id="Canvasの基本">Canvasの基本</h2>

<p>実際に<a href="/ja/docs/Web/HTML/Element/canvas" title="HTML の &lt;canvas&gt; 要素 と Canvas スクリプティング API や WebGL API を使用して、グラフィックスやアニメーションを描画することができます。"><code>&lt;canvas&gt;</code></a>要素に映像を描画するために、まずはJavaScriptから要素への参照を取得しなければなりません。次のコードを開始の<code>&lt;script&gt;</code>タグのあとに追記してください。</p>

<pre class="brush: js">var canvas = document.getElementById(&quot;myCanvas&quot;);
var ctx = canvas.getContext(&quot;2d&quot;);</pre>

<p>ここでは<a href="/ja/docs/Web/HTML/Element/canvas" title="HTML の &lt;canvas&gt; 要素 と Canvas スクリプティング API や WebGL API を使用して、グラフィックスやアニメーションを描画することができます。"><code>&lt;canvas&gt;</code></a>要素への参照を<code>canvas</code>に保存しています。それから2D描画コンテキストを保存するために<code>ctx</code>変数を作成しています。2D描画コンテキストは実際にCanvasに描画するために使うツールとなります。</p>

<p>赤い四角形をキャンバスの上に表示するコード例を見てみましょう。下記のコードを先程記述したJavaScriptのあとに追記して、<code>index.html</code>をブラウザで読み込んでみてください。</p>

<pre class="brush: js">ctx.beginPath();
ctx.rect(20, 40, 50, 50);
ctx.fillStyle = &quot;#FF0000&quot;;
ctx.fill();
ctx.closePath();</pre>

<p>全ての命令は<a href="/ja/docs/Web/API/CanvasRenderingContext2D/beginPath" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>beginPath()</code></a>メソッドと <a href="/ja/docs/Web/API/CanvasRenderingContext2D/closePath" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>closePath()</code></a>メソッドの間に記述されています。四角形を<a href="/ja/docs/Web/API/CanvasRenderingContext2D/rect" title="Canvas 2D APIのCanvasRenderingContext2D.rect() メソッドは、2Dウィンドウのサイズ(width, height)や開始位置(x, y)を定義できるメソッドです。"><code>rect()</code></a>を用いて定義しています。最初の2つの値は左上の角のキャンバス上での座標を指定し、あとの2つの値は幅と高さを指定しています。今回描画された四角形は画面の左端から20ピクセル、上端から40ピクセルの位置に幅50ピクセル、高さ50ピクセルの大きさで、正方形になっています。<a href="/ja/docs/Web/API/CanvasRenderingContext2D/fillStyle" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>fillStyle</code></a>プロパティは<a href="/ja/docs/Web/API/CanvasRenderingContext2D/fill" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>fill()</code></a>メソッドで用いられる色 (今回は赤) を保存します。</p>

<p>もちろん四角形だけではありません。ここでは緑の円を描画するコードを紹介します。次のコードを自分のJavaScriptの最後に追記し、保存して再読込してみてください。</p>

<pre class="brush: js">ctx.beginPath();
ctx.arc(240, 160, 20, 0, Math.PI*2, false);
ctx.fillStyle = &quot;green&quot;;
ctx.fill();
ctx.closePath();</pre>

<p>見て分かるとおり、<a href="/ja/docs/Web/API/CanvasRenderingContext2D/beginPath" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>beginPath()</code></a>メソッドと<a href="/ja/docs/Web/API/CanvasRenderingContext2D/closePath" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>closePath()</code></a>メソッドが再び用いられています。その間にこのコードで最も重要な部分、<a href="/ja/docs/Web/API/CanvasRenderingContext2D/arc" title="Canvas 2D APIのCanvasRenderingContext2D.arc()メソッドは、パスに円弧を加えます。円弧の中心座標は(x, y)で半径がr、角度startAngleからendAngleまで、anticlockwiseの向きに描かれます(デフォルトは時計回り)。"><code>arc()</code></a>メソッドが呼び出されています。このメソッドは6つのパラメーターを持ちます。</p>

<ul>
 <li>円の中心の<code>x</code>、<code>y</code>座標</li>
 <li>円の半径</li>
 <li>開始角度と終了角度 (円を描く始める時点の角度と描き終えたあとの角度をラジアンで)</li>
 <li>描く方向 (時計回りは<code>false</code>で、デフォルト。半時計回りは<code>true</code>。) この最後のパラメーターは省略可能です。</li>
</ul>

<p><a href="/ja/docs/Web/API/CanvasRenderingContext2D/fillStyle" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>fillStyle</code></a>プロパティは先程とは違う形になっています。これはCSSでそうであるように、色は16進値、色キーワード、<code>rgba()</code>関数、その他利用可能な色メソッドなら何でも指定することができるからです。</p>

<p>図形を<a href="/ja/docs/Web/API/CanvasRenderingContext2D/fill" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>fill()</code></a>で塗りつぶすかわりに<a href="/ja/docs/Web/API/CanvasRenderingContext2D/stroke" title="Canvas 2D API の CanvasRenderingContext2D.stroke() メソッドは、現在のあるいは渡されたパスを、ノンゼロワインディング規則を使って、現在のストロークスタイルで描きます。"><code>stroke()</code></a>で縁だけ色を付けることも出来ます。次のコードも自分のJavaScriptに追記してみてください。</p>

<pre class="brush: js">ctx.beginPath();
ctx.rect(160, 10, 100, 40);
ctx.strokeStyle = &quot;rgba(0, 0, 255, 0.5)&quot;;
ctx.stroke();
ctx.closePath();</pre>

<p>上記のコードは青く縁取られたからの四角形を描画します。<code>rgba()</code>関数内のアルファチャネルにより青色は半透明になっています。</p>

<h2 id="自分のコードと比べる">自分のコードと比べる</h2>

<p>以下がJSFiddleで即実行可能な最初のレッスンのソースコード全てです。</p>

<p> </p>

<p></p><p><iframe src="https://jsfiddle.net/end3r/x62h15e2/embedded/" width="100%" height="395" frameborder="0"></iframe></p><p></p>

<p> </p>

<div class="note notecard">
<p><strong>練習</strong>: 与えられた図形の大きさや色を変えてみましょう。</p>
</div>

<h2 id="次のステップ">次のステップ</h2>

<p>ここまでで基本的なHTMLを組み上げcanvasに少し学習しました。それでは、第2章に進み<a href="https://developer.mozilla.org/ja/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript/Move_the_ball">どうやってゲーム内のボールを動かすか</a>学びましょう。</p>

<p></p><div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/ja/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript" class="button">« 前のページ</a><a href="/ja/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript/Move_the_ball" class="button">次のページ  »</a></p>
</div><p></p>
