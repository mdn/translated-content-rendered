---
title: ゲームオーバー
slug: Games/Tutorials/2D_Breakout_game_pure_JavaScript/Game_over
translation_of: Games/Tutorials/2D_Breakout_game_pure_JavaScript/Game_over
original_slug: Games/Workflows/2D_Breakout_game_pure_JavaScript/Game_over
---
<div><section class="Quick_links" id="Quick_Links">
  <ol>
    <li class="toggle">
        <details>
            <summary>Web のゲーム開発紹介</summary>
            <ol>
              <li><a href="/ja/docs/Games/Introduction">Web のゲーム開発紹介</a></li>
              <li><a href="/ja/docs/Games/Anatomy">ビデオゲームとの違い</a></li>
              <li><a href="/ja/docs/Games/Examples">Examples</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>ツール</summary>
            <ol>
              <li><a href="/ja/docs/Web/API/Canvas_API">Canvas</a></li>
              <li><a href="/ja/docs/Web/CSS">CSS</a></li>
              <li><a href="/ja/docs/Web/Apps/Fundamentals/User_notifications/Full_screen_api">Full screen</a></li>
              <li><a href="/ja/docs/Web/API/Gamepad_API">Gamepad</a></li>
              <li><a href="/ja/docs/Web/API/IndexedDB_API">IndexedDB</a></li>
              <li><a href="/ja/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="/ja/docs/Web/API/Pointer_Lock_API">Pointer Lock</a></li>
              <li><a href="/ja/docs/Web/SVG">SVG</a></li>
              <li><a href="/ja/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">Typed Arrays</a></li>
              <li><a href="/ja/docs/Web/API/Web_Audio_API">Web Audio</a></li>
              <li><a href="/ja/docs/Web/API/WebGL_API">WebGL</a></li>
              <li><a href="/ja/docs/Web/API/WebRTC_API">WebRTC</a></li>
              <li><a href="/ja/docs/Web/API/WebSockets_API">WebSockets</a></li>
              <li><a href="/ja/docs/Web/API/WebVR_API">WebVR</a></li>
              <li><a href="/ja/docs/Web/API/Web_Workers_API">Web Workers</a></li>
              <li><a href="/ja/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>ゲーム開発テクニック</summary>
            <ol>
              <li><a href="/ja/docs/Games/Techniques/Async_scripts">asm.js の同期スクリプトを利用する</a></li>
              <li><a href="/ja/docs/Web/Apps/Developing/Optimizing_startup_performance">起動パフォーマンスを最適化する</a></li>
              <li><a href="/ja/docs/Games/Techniques/WebRTC_data_channels">ピア通信チャンネルとして WebRTC を利用する</a></li>
              <li><a href="/ja/docs/Games/Techniques/Efficient_animation_for_web_games">Web ゲームの効率的なアニメーション</a></li>
              <li><a href="/ja/docs/Games/Techniques/Audio_for_Web_Games">Web ゲーム向けの音</a></li>
              <li><a href="/ja/docs/Games/Techniques/2D_collision_detection">2D 衝突検出</a></li>
              <li><a href="/ja/docs/Games/Techniques/Tilemaps">タイルとタイルマップの概要</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Web上の 3D ゲームの概要</summary>
            <ol>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web">Web上の 3D ゲームの概要</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web/Basic_theory">基本の 3D理論の説明</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_A-Frame">A-Frame</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Babylon.js">Babylon.js</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_PlayCanvas">PlayCanvas を利用した基本的なデモの制作</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Three.js">Three.js を使った基本的なデモ製作</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_on_the_web/WebVR">WebVR</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_collision_detection">3D 衝突検出の概要</a></li>
              <li><a href="/ja/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js">THREE.js を使ったバウンディングボリューム衝突検出</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Implementing game control mechanisms</summary>
            <ol>
              <li><a href="/ja/docs/Games/Techniques/Control_mechanisms">Control mechanisms</a></li>
              <li><a href="/ja/docs/Games/Techniques/Control_mechanisms/Mobile_touch">Mobile touch</a></li>
              <li><a href="/ja/docs/Games/Techniques/Control_mechanisms/Desktop_with_mouse_and_keyboard">Desktop with mouse and keyboard</a></li>
              <li><a href="/ja/docs/Games/Techniques/Control_mechanisms/Desktop_with_gamepad">Desktop with gamepad</a></li>
              <li><a href="/ja/docs/Games/Techniques/Control_mechanisms/Other">Other</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>チュートリアル</summary>
            <ol>
              <li><a href="/ja/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript">そのままの JavaScript を使ったブロックくずしゲーム</a></li>
              <li><a href="/ja/docs/Games/Tutorials/2D_breakout_game_Phaser">Phaser を使ったブロックくずしゲーム</a></li>
              <li><a href="/ja/docs/Games/Tutorials/HTML5_Gamedev_Phaser_Device_Orientation">デバイス回転方向を使った 2D 迷路ゲーム</a></li>
              <li><a href="https://mozdevs.github.io/html5-games-workshop/en/guides/platformer/start-here/">Phaser を使った 2D プラットフォームゲーム</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>ゲームを公開する</summary>
            <ol>
              <li><a href="/ja/docs/Games/Publishing_games">ゲームを公開するには</a></li>
              <li><a href="/ja/docs/Games/Publishing_games/Game_distribution">ゲームの配信</a></li>
              <li><a href="/ja/docs/Games/Publishing_games/Game_promotion">ゲームのプロモーション</a></li>
              <li><a href="/ja/docs/Games/Publishing_games/Game_monetization">ゲームのマネタイズ</a></li>
            </ol>
        </details>
    </li>
  </ol>
</section></div>

<div></div>

<p></p><div class="prevnext" style="text-align: right;">
    <p><a href="/ja/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript/Paddle_and_keyboard_controls" style="float: left;" class="button">« 前のページ</a><a href="/ja/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript/Build_the_brick_field" class="button">次のページ  »</a></p>
</div><p></p>

<div class="summary">これは<a href="https://developer.mozilla.org/en-US/docs/Games/Workflows/Breakout_game_from_scratch">ゲーム開発Canvasチュートリアル</a>の10ステップのうち<strong>5番目</strong>のステップです。このレッスンを終えたあとの完成予想のソースコードは<a class="external external-icon" href="https://github.com/end3r/Gamedev-Canvas-workshop/blob/gh-pages/lesson05.html" rel="noopener">Gamedev-Canvas-workshop/lesson5.html</a>で入手できます。</div>

<p><span class="seoSummary">ボールが壁で弾むのを見たりパドルを左右雨に動かしたりできるのは楽しいですが、そのことを除くとこのゲームは何もせず、進捗や最終目標といったものが全くありません。ゲームプレイの観点からすると、まず負けることができるようにするのが良いでしょう。ブロック崩しで負けるということの裏にある論理は簡潔です。もしパドルでボールを逃してボールが画面の下端についてしまったらゲームオーバーになるのです。</span></p>

<h2 id="ゲームオーバーを実装する">ゲームオーバーを実装する</h2>

<p>自分のゲームにゲームオーバーを実装してみましょう。3章ではボールを壁で弾むようにしました。以下はその引用です。</p>

<pre class="brush: js">if(x + dx &gt; canvas.width-ballRadius || x + dx &lt; ballRadius) {
    dx = -dx;
}

if(y + dy &gt; canvas.height-ballRadius || y + dy &lt; ballRadius) {
    dy = -dy;
}</pre>

<p>4辺全てでボールを弾ませるのではなく、3辺、すなわち上端と左右のみで弾むようにしましょう。底を打ったときゲームは終わりになります。2番目のif節を編集して、ボールがキャンバスの下端で衝突したときにゲームオーバー状態が発動するif else節にしましょう。ここでは簡単に、アラートメッセージを表示して、ページの再読込によりゲームを再開するだけにしましょう。</p>

<p>まず、 <code>setInterval()</code> を最初に呼び出しているところを置き換えます。</p>

<p> </p>

<pre class="line-numbers language-html"><code class="language-html">setInterval(draw, 10);</code></pre>

<p> </p>

<p>置き換え後</p>

<pre class="line-numbers language-html"><code class="language-html">var interval = setInterval(draw, 10);</code></pre>

<p> </p>

<p>次に2番目のif節を次の内容で置き換えましょう。</p>

<pre class="brush: js line-numbers language-js"><code class="language-js"><span class="keyword token">if</span><span class="punctuation token">(</span>y <span class="operator token">+</span> dy <span class="operator token">&lt;</span> ballRadius<span class="punctuation token">)</span> <span class="punctuation token">{</span>
    dy <span class="operator token">=</span> <span class="operator token">-</span>dy<span class="punctuation token">;</span>
<span class="punctuation token">}</span> <span class="keyword token">else</span> <span class="keyword token">if</span><span class="punctuation token">(</span>y <span class="operator token">+</span> dy <span class="operator token">&gt;</span> canvas<span class="punctuation token">.</span>height<span class="operator token">-</span>ballRadius<span class="punctuation token">)</span> <span class="punctuation token">{</span>
    <span class="function token">alert</span><span class="punctuation token">(</span><span class="string token">&quot;GAME OVER&quot;</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
    document<span class="punctuation token">.</span>location<span class="punctuation token">.</span><span class="function token">reload</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
    <span class="function token">clearInterval</span><span class="punctuation token">(</span>interval<span class="punctuation token">)</span><span class="punctuation token">;</span> <span class="comment token">// Needed for Chrome to end game</span>
<span class="punctuation token">}</span></code></pre>

<h2 id="パドルをボールに当てる">パドルをボールに当てる</h2>

<p>このレッスンのしあげに、ボールとパドルの衝突検出を作り、ボールが弾んでプレイエリアに戻ってくるようにしましょう。最も簡単なやり方はボールがパドルの左端と右端の間にあるか確認することです。最後に編集したコードを今度は次のように書き換えます。</p>

<pre class="brush: js">if(y + dy &lt; ballRadius) {
    dy = -dy;
} else if(y + dy &gt; canvas.height-ballRadius) {
    if(x &gt; paddleX &amp;&amp; x &lt; paddleX + paddleWidth) {
        dy = -dy;
    }
    else {
        alert(&quot;GAME OVER&quot;);
        document.location.reload();
    }
}</pre>

<p>ボールがCanvasの下端に当たっていたら、パドルにも当たっているかどうか確認します。もしパドルに当たっていたら、思ったとおりにボールは弾みます。当たらなかったら、先ほどと同じようにゲームオーバーになります。</p>

<h2 id="自分のコードと比べる">自分のコードと比べる</h2>

<p>自分のコードと比べられるように、実際に動くコードを以下に示します。</p>

<p></p><p><iframe frameborder="0" height="395" src="https://jsfiddle.net/raymondjplante/L61c9y50/embedded/" width="100%"></iframe></p><p></p>

<div class="note notecard">
<p><strong>練習</strong>: ボールがパドルに当たったときに速く動くようにしましょう。</p>
</div>

<h2 id="次のステップ">次のステップ</h2>

<p>今のところかなり順調に進歩してきていて、ゲームも負けるようになったことでもっと遊ぶ価値が感じられるようになってきました。第六章<a href="https://developer.mozilla.org/ja/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript/Build_the_brick_field">『ブロックのかたまりを作る』</a>に進み、ボールが壊せるブロックを作りましょう。</p>

<p></p><div class="prevnext" style="text-align: right;">
    <p><a href="/ja/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript/Paddle_and_keyboard_controls" style="float: left;" class="button">« 前のページ</a><a href="/ja/docs/Games/Workflows/2D_Breakout_game_pure_JavaScript/Build_the_brick_field" class="button">次のページ  »</a></p>
</div><p></p>
