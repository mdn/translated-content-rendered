---
title: AudioContext.decodeAudioData()
slug: Web/API/BaseAudioContext/decodeAudioData
tags:
  - API
  - Audio
  - AudioContext
  - BaseAudioContext
  - Method
  - Reference
  - Web Audio API
  - decodeAudioData
translation_of: Web/API/BaseAudioContext/decodeAudioData
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/ja/docs/Web/API/Web_Audio_API">Web Audio API</a></strong></li><li><strong><a href="/ja/docs/Web/API/AudioContext"><code>AudioContext</code></a></strong></li><li class="toggle"><details open><summary>コンストラクター</summary><ol><li><a href="/ja/docs/Web/API/AudioContext/AudioContext"><code>AudioContext()</code></a></li></ol></details></li><li class="toggle"><details open><summary>プロパティ</summary><ol><li><a href="/ja/docs/Web/API/AudioContext/baseLatency"><code>baseLatency</code></a> <a href="/ja/docs/Web/API/AudioContext/baseLatency$translate" style="opacity: 0.5;">[翻訳する]</a></li><li><a href="/ja/docs/Web/API/AudioContext/outputLatency"><code>outputLatency</code></a> <a href="/ja/docs/Web/API/AudioContext/outputLatency$translate" style="opacity: 0.5;">[翻訳する]</a></li></ol></details></li><li class="toggle"><details open><summary>メソッド</summary><ol><li><a href="/ja/docs/Web/API/AudioContext/close"><code>close()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="これは廃止されたAPIであり、今後の動作は保障されていません。ご注意下さい。"><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/ja/docs/Web/API/AudioContext/createJavaScriptNode"><code>createJavaScriptNode()</code></a> <a href="/ja/docs/Web/API/AudioContext/createJavaScriptNode$translate" style="opacity: 0.5;">[翻訳する]</a></s></li><li><a href="/ja/docs/Web/API/AudioContext/createMediaElementSource"><code>createMediaElementSource()</code></a></li><li><a href="/ja/docs/Web/API/AudioContext/createMediaStreamDestination"><code>createMediaStreamDestination()</code></a></li><li><a href="/ja/docs/Web/API/AudioContext/createMediaStreamSource"><code>createMediaStreamSource()</code></a></li><li><a href="/ja/docs/Web/API/AudioContext/createMediaStreamTrackSource"><code>createMediaStreamTrackSource()</code></a> <a href="/ja/docs/Web/API/AudioContext/createMediaStreamTrackSource$translate" style="opacity: 0.5;">[翻訳する]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="これは廃止されたAPIであり、今後の動作は保障されていません。ご注意下さい。"><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/ja/docs/Web/API/AudioContext/createWaveTable"><code>createWaveTable()</code></a> <a href="/ja/docs/Web/API/AudioContext/createWaveTable$translate" style="opacity: 0.5;">[翻訳する]</a></s></li><li><a href="/ja/docs/Web/API/AudioContext/getOutputTimestamp"><code>getOutputTimestamp()</code></a> <a href="/ja/docs/Web/API/AudioContext/getOutputTimestamp$translate" style="opacity: 0.5;">[翻訳する]</a></li><li><a href="/ja/docs/Web/API/AudioContext/resume"><code>resume()</code></a></li><li><a href="/ja/docs/Web/API/AudioContext/suspend"><code>suspend()</code></a></li></ol></details></li><li class="toggle"><details open><summary>継承</summary><ol><li><a href="/ja/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Web Audio API に関連するページ</summary><ol><li><a href="/ja/docs/Web/API/AnalyserNode"><code>AnalyserNode</code></a></li><li><a href="/ja/docs/Web/API/AudioBuffer"><code>AudioBuffer</code></a></li><li><a href="/ja/docs/Web/API/AudioBufferSourceNode"><code>AudioBufferSourceNode</code></a></li><li><a href="/ja/docs/Web/API/AudioContextOptions"><code>AudioContextOptions</code></a></li><li><a href="/ja/docs/Web/API/AudioDestinationNode"><code>AudioDestinationNode</code></a></li><li><a href="/ja/docs/Web/API/AudioListener"><code>AudioListener</code></a></li><li><a href="/ja/docs/Web/API/AudioNode"><code>AudioNode</code></a></li><li><a href="/ja/docs/Web/API/AudioNodeOptions"><code>AudioNodeOptions</code></a></li><li><a href="/ja/docs/Web/API/AudioParam"><code>AudioParam</code></a></li><li><a href="/ja/docs/Web/API/AudioProcessingEvent"><code>AudioProcessingEvent</code></a></li><li><a href="/ja/docs/Web/API/AudioScheduledSourceNode"><code>AudioScheduledSourceNode</code></a></li><li><a href="/ja/docs/Web/API/AudioWorklet"><code>AudioWorklet</code></a></li><li><a href="/ja/docs/Web/API/AudioWorkletGlobalScope"><code>AudioWorkletGlobalScope</code></a></li><li><a href="/ja/docs/Web/API/AudioWorkletNode"><code>AudioWorkletNode</code></a></li><li><a href="/ja/docs/Web/API/AudioWorkletProcessor"><code>AudioWorkletProcessor</code></a></li><li><a href="/ja/docs/Web/API/BaseAudioContext"><code>BaseAudioContext</code></a></li><li><a href="/ja/docs/Web/API/BiquadFilterNode"><code>BiquadFilterNode</code></a></li><li><a href="/ja/docs/Web/API/ChannelMergerNode"><code>ChannelMergerNode</code></a></li><li><a href="/ja/docs/Web/API/ChannelSplitterNode"><code>ChannelSplitterNode</code></a></li><li><a href="/ja/docs/Web/API/ConstantSourceNode"><code>ConstantSourceNode</code></a></li><li><a href="/ja/docs/Web/API/ConvolverNode"><code>ConvolverNode</code></a></li><li><a href="/ja/docs/Web/API/DelayNode"><code>DelayNode</code></a></li><li><a href="/ja/docs/Web/API/DynamicsCompressorNode"><code>DynamicsCompressorNode</code></a></li><li><a href="/ja/docs/Web/API/GainNode"><code>GainNode</code></a></li><li><a href="/ja/docs/Web/API/IIRFilterNode"><code>IIRFilterNode</code></a></li><li><a href="/ja/docs/Web/API/MediaElementAudioSourceNode"><code>MediaElementAudioSourceNode</code></a></li><li><a href="/ja/docs/Web/API/MediaStreamAudioDestinationNode"><code>MediaStreamAudioDestinationNode</code></a></li><li><a href="/ja/docs/Web/API/MediaStreamAudioSourceNode"><code>MediaStreamAudioSourceNode</code></a></li><li><a href="/ja/docs/Web/API/OfflineAudioCompletionEvent"><code>OfflineAudioCompletionEvent</code></a></li><li><a href="/ja/docs/Web/API/OfflineAudioContext"><code>OfflineAudioContext</code></a></li><li><a href="/ja/docs/Web/API/OscillatorNode"><code>OscillatorNode</code></a></li><li><a href="/ja/docs/Web/API/PannerNode"><code>PannerNode</code></a></li><li><a href="/ja/docs/Web/API/PeriodicWave"><code>PeriodicWave</code></a></li><li><a href="/ja/docs/Web/API/StereoPannerNode"><code>StereoPannerNode</code></a></li><li><a href="/ja/docs/Web/API/WaveShaperNode"><code>WaveShaperNode</code></a></li></ol></details></li></ol></section>

<p><code>decodeAudioData()</code> は <a href="/ja/docs/Web/API/BaseAudioContext"><code>BaseAudioContext</code></a> のメソッドで、 <a href="/ja/docs/Web/API/ArrayBuffer"><code>ArrayBuffer</code></a> に書き込まれた音声ファイルデータを非同期にデコードするために使用されます。この場合、 <code>ArrayBuffer</code> は <a href="/ja/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a> と <a href="/ja/docs/Web/API/FileReader"><code>FileReader</code></a> から読み込まれます。デコードされた <a href="/ja/docs/Web/API/AudioBuffer"><code>AudioBuffer</code></a> は <a href="/ja/docs/Web/API/AudioContext"><code>AudioContext</code></a> のサンプリングレートにリサンプリングされ、コールバックやプロミスに渡されます。</p>

<p>この方法は、オーディオトラックから Web Audio API 用のオーディオソースを作成する際に推奨される方法です。この方法は、音声ファイルの断片的なデータではなく、完全なファイルデータに対してのみ動作します。</p>

<h2 id="Syntax" name="Syntax">構文</h2>

<p>古いコールバック構文:</p>

<pre class="syntaxbox notranslate">baseAudioContext.decodeAudioData(<var>ArrayBuffer</var>, <var>successCallback</var>, <var>errorCallback</var>);</pre>

<p>新しいプロミスベースの構文:</p>

<pre class="syntaxbox notranslate">Promise&lt;decodedData&gt; baseAudioContext.decodeAudioData(<var>ArrayBuffer</var>);</pre>

<h3 id="Parameters" name="Parameters">引数</h3>

<dl>
 <dt><var>ArrayBuffer</var></dt>
 <dd>デコードする音声データが入った ArrayBuffer です。通常は<a href="/ja/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a>, <a href="/ja/docs/Web/API/WindowOrWorkerGlobalScope/fetch"><code>WindowOrWorkerGlobalScope.fetch()</code></a>, <a href="/ja/docs/Web/API/FileReader"><code>FileReader</code></a> から取得します。</dd>
 <dt><var>successCallback</var></dt>
 <dd>デコードが完了すると呼び出されるコールバック関数です。このコールバックの引数は1つで、 <var>decodedData</var> (デコードされた PCM 音声データ) を表す <a href="/ja/docs/Web/API/AudioBuffer"><code>AudioBuffer</code></a> です。通常は、デコードされたデータを <a href="/ja/docs/Web/API/AudioBufferSourceNode"><code>AudioBufferSourceNode</code></a> に入れて、そこから再生したり、好きなように操作したりすることができます。</dd>
 <dt><var>errorCallback</var></dt>
 <dd>任意のエラーコールバックで、音声データのデコードでエラーが発生すると呼び出されます。</dd>
</dl>

<h3 id="Return_value" name="Return_value">返値</h3>

<p>なし、または <var>decodedData</var> で満足する <a href="/ja/docs/Web/API/Promise"><code>Promise</code></a> オブジェクトで.</p>

<h2 id="Example" name="Example">例</h2>

<p>ここでは最初に古いコールバックベースのシステムを、次に新しいプロミスベースの構文を取り上げます。</p>

<h3 id="Older_callback_syntax" name="Older_callback_syntax">古いコールバックベースの構文</h3>

<p>この例では、 <code>getData()</code> 関数は XHR を使用して音声トラックを読み込み、リクエストの <code>responseType</code> を <code>arraybuffer</code> に設定して、レスポンスとして配列バッファーを返すようにして、それを <code>audioData</code> 変数に格納しています。それからこのバッファーを <code>decodeAudioData()</code> 関数に渡します。成功したコールバックは、デコードに成功した PCM データを受け取り、 <a href="/ja/docs/Web/API/AudioContext/createBufferSource"><code>AudioContext.createBufferSource()</code></a> で作成した <a href="/ja/docs/Web/API/AudioBufferSourceNode"><code>AudioBufferSourceNode</code></a> に入れ、ソースを <a href="/ja/docs/Web/API/AudioContext/destination"><code>AudioContext.destination</code></a> に接続してループするように設定します。</p>

<p>ボタンは単に <code>getData()</code> を実行して、それぞれトラックの読み込みと再生、停止を行うだけです。ソースの <code>stop()</code> メソッドが呼ばれると、ソースは消滅します。</p>

<div class="note notecard">
<p><strong>注:</strong> <a href="https://mdn.github.io/webaudio-examples/decode-audio-data/">ライブ例の実行</a> (または<a href="https://github.com/mdn/webaudio-examples/tree/master/decode-audio-data">ソースの閲覧</a>) もできます。</p>
</div>

<pre class="brush: js notranslate">// 変数の定義

var audioCtx = new (window.AudioContext || window.webkitAudioContext)();
var source;

var pre = document.querySelector(&apos;pre&apos;);
var myScript = document.querySelector(&apos;script&apos;);
var play = document.querySelector(&apos;.play&apos;);
var stop = document.querySelector(&apos;.stop&apos;);

// 音声トラックの読み込みには XHR を使い、
// decodeAudioData でデコードし、バッファーに格納する
// そして、そのバッファーを source に設定する

function getData() {
  source = audioCtx.createBufferSource();
  var request = new XMLHttpRequest();

  request.open(&apos;GET&apos;, &apos;viper.ogg&apos;, true);

  request.responseType = &apos;arraybuffer&apos;;


  request.onload = function() {
    var audioData = request.response;

    audioCtx.decodeAudioData(audioData, function(buffer) {
        source.buffer = buffer;

        source.connect(audioCtx.destination);
        source.loop = true;
      },

      function(e){ console.log(&quot;Error with decoding audio data&quot; + e.err); });

  }

  request.send();
}

// 音声の停止と再生を行うボタン

play.onclick = function() {
  getData();
  source.start(0);
  play.setAttribute(&apos;disabled&apos;, &apos;disabled&apos;);
}

stop.onclick = function() {
  source.stop(0);
  play.removeAttribute(&apos;disabled&apos;);
}


// pre要素にスクリプトを設定する

pre.innerHTML = myScript.innerHTML;</pre>

<h3 id="New_promise-based_syntax" name="New_promise-based_syntax">新しいプロミスベースの構文</h3>

<pre class="brush: js notranslate">ctx.decodeAudioData(audioData).then(function(decodedData) {
 // デコードしたデータをここで使う
});</pre>

<h2 id="Specifications" name="Specifications">仕様書</h2>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">仕様</th>
   <th scope="col">状態</th>
   <th scope="col">備考</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><a class="external" href="https://webaudio.github.io/web-audio-api/#dom-baseaudiocontext-decodeaudiodata" hreflang="en" lang="en">Web Audio API<br><small lang="ja">decodeAudioData() の定義</small></a></td>
   <td><span class="spec-WD">草案</span></td>
   <td></td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility" name="Browser_compatibility">ブラウザーの互換性</h2>

<div>
<div class="hidden">このページの互換性一覧表は構造化データから生成されています。データに協力していただけるのであれば、 <a class="external" href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> をチェックアウトしてプルリクエストを送信してください。</div>

<div class="bc-data" id="bcd:api.BaseAudioContext.decodeAudioData"></div>
</div>

<h2 id="See_also" name="See_also">関連情報</h2>

<ul>
 <li><a href="/ja/docs/Web/API/Web_Audio_API/Using_Web_Audio_API">Web Audio API の使用</a></li>
</ul>
