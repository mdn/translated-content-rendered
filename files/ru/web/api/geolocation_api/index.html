---
title: Использование геолокации
slug: Web/API/Geolocation_API
tags:
  - Geolocation API
  - Guide
  - Intermediate
translation_of: Web/API/Geolocation_API
original_slug: Web/API/Geolocation/Using_geolocation
---
<div><div class="secureContexts notecard"><p><strong>Secure context</strong><br>This feature is available only in <a href="/ru/docs/Web/Security/Secure_Contexts">secure contexts</a> (HTTPS), in some or all <a href="#Browser_compatibility">supporting browsers</a>.</p></div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/ru/docs/Web/API/Geolocation_API">Geolocation API</a></strong></li><li class="toggle"><details open><summary>Руководства</summary><ol><li><a href="/ru/docs/Web/API/Geolocation/Using_geolocation/Using_the_Geolocation_API">Использование Geolocation API</a></li></ol></details></li><li class="toggle"><details open><summary>Интерфейсы</summary><ol><li><a href="/ru/docs/Web/API/Geolocation"><code>Geolocation</code></a></li><li><a href="/ru/docs/Web/API/GeolocationCoordinates"><code>GeolocationCoordinates</code></a></li><li><a href="/ru/docs/Web/API/GeolocationPosition"><code>GeolocationPosition</code></a></li><li><a href="/ru/docs/Web/API/GeolocationPositionError"><code>GeolocationPositionError</code></a></li></ol></details></li><li class="toggle"><details open><summary>Свойства</summary><ol><li><a href="/ru/docs/Web/API/Navigator/geolocation"><code>Navigator.geolocation</code></a></li></ol></details></li></ol></section></div>

<p><strong>Geolocation API</strong> позволяет пользователю предоставлять свое местоположение web-приложению, если пользователь согласится предоставить его. Из соображений конфиденциальности, у пользователя будет запрошено разрешение на предоставление информации о местоположении.</p>

<h2 id="Концепты_и_использование">Концепты и использование</h2>

<p>Вы часто хотите получать информацию о местоположении пользователя в своём веб приложении, например, для отображения участка на карте, либо для того, чтобы показывать информацию, основанную на местоположении посетителя.</p>

<p>API геолокации может быть вызвано через <a href="/ru/docs/Web/API/Navigator/geolocation"><code>Navigator.geolocation</code></a>; это заставит браузер пользователя вывести уведомление с запросом для доступа к текущему местоположению. Если его одобрят, то браузер сможет даст весь доступный функционал для работы с информацией о местонахождении (например, GPS).</p>

<p>Тогда разработчику станут доступны несколько разных способов получения соответствующей информации:</p>

<ul>
 <li><a href="/ru/docs/Web/API/Geolocation/getCurrentPosition"><code>Geolocation.getCurrentPosition()</code></a>: возвратит местоположение устройства</li>
 <li><a href="/ru/docs/Web/API/Geolocation/watchPosition"><code>Geolocation.watchPosition()</code></a>: зарегистрирует функцию-обработчик, которая будет вызываться автоматически каждый раз, когда местоположение изменится, возвращая новые данные.</li>
</ul>

<p>В обоих случая, методы принимают три аргумента:</p>

<ul>
 <li>Обязательную callback-функцию при успехе: если удалось получить местоположение пользователя, то функция вызовется с объектом <a href="/ru/docs/Web/API/GeolocationPosition"><code>GeolocationPosition</code></a> как одним параметром, предоставляющим доступ к данным о месторасположении.</li>
 <li>Необязательную callback-функцию при ошибке: если не удалось получить позицию, то callback-функция вызовется с объектом <a href="/ru/docs/Web/API/GeolocationPositionError"><code>GeolocationPositionError</code></a> как одним параметром, содержащим информацию о том, что пошло не так.</li>
 <li>Необязательный объект <a href="/ru/docs/Web/API/PositionOptions"><code>PositionOptions</code></a>, который содержит надстройки получения данных о местоположении.</li>
</ul>

<h2 id="Интерфейсы">Интерфейсы</h2>

<dl>
 <dt><a href="/ru/docs/Web/API/Geolocation"><code>Geolocation</code></a></dt>
 <dd>Главный класс этого API — содержит методы для получения текущего местоположения пользователя, наблюдает за его изменениями и удаляет функции-наблюдатели.</dd>
 <dt><a href="/ru/docs/Web/API/GeolocationPosition"><code>GeolocationPosition</code></a></dt>
 <dd>Предоставляет месторасположение пользователя. Экземпляр <code>GeolocationPosition</code>, полученный при успешном вызове одного из методов <a href="/ru/docs/Web/API/Geolocation"><code>Geolocation</code></a>, внутри callback-функции при успехе, содержит метку времени плюс экземпляр объекта <a href="/ru/docs/Web/API/GeolocationCoordinates"><code>GeolocationCoordinates</code></a>.</dd>
 <dt><a href="/ru/docs/Web/API/GeolocationCoordinates"><code>GeolocationCoordinates</code></a></dt>
 <dd>Предоставлять координаты пользователя; Экземпляр <code>GeolocationCoordinates</code> содержит широту, долготу и прочую важную подобную информацию.</dd>
 <dt><a href="/ru/docs/Web/API/GeolocationPositionError"><code>GeolocationPositionError</code></a></dt>
 <dd><code>GeolocationPositionError</code> возвращается при неуспешном вызове методов, содержащихся в <a href="/ru/docs/Web/API/Geolocation"><code>Geolocation</code></a>, внутри callback-функции при ошибке, содержит код ошибки и сообщение.</dd>
 <dt><a href="/ru/docs/Web/API/Navigator/geolocation"><code>Navigator.geolocation</code></a></dt>
 <dd>Точка входа в API. Возвращает экземпляр объекта <a href="/ru/docs/Web/API/Geolocation"><code>Geolocation</code></a>, из которого становятся доступны все функции и методы.</dd>
</dl>

<h2 id="Словари">Словари</h2>

<dl>
 <dt><a href="/ru/docs/Web/API/PositionOptions"><code>PositionOptions</code></a></dt>
 <dd>Предоставляет объект, содержащий опции, которые можно передать как параметр в  <a href="/ru/docs/Web/API/Geolocation/getCurrentPosition"><code>Geolocation.getCurrentPosition()</code></a> и <a href="/ru/docs/Web/API/Geolocation/watchPosition"><code>Geolocation.watchPosition()</code></a>.</dd>
</dl>

<h2 id="Примеры">Примеры</h2>

<p>In the following example the Geolocation API is used to retrieve the user&apos;s latitude and longitude. If sucessful, the available hyperlink is populated with an <code>openstreetmap.org</code> URL that will show their location.</p>

<div class="hidden">
<pre class="brush: css notranslate">body {
  padding: 20px;
  background-color:#ffffc9
}

button {
  margin: .5rem 0;
}
</pre>
</div>

<h3 id="HTML">HTML</h3>

<pre class="brush: html; notranslate">&lt;button id = &quot;find-me&quot;&gt;Show my location&lt;/button&gt;&lt;br/&gt;
&lt;p id = &quot;status&quot;&gt;&lt;/p&gt;
&lt;a id = &quot;map-link&quot; target=&quot;_blank&quot;&gt;&lt;/a&gt;
</pre>

<h3 id="JavaScript">JavaScript</h3>

<pre class="brush: js notranslate">function geoFindMe() {

  const status = document.querySelector(&apos;#status&apos;);
  const mapLink = document.querySelector(&apos;#map-link&apos;);

  mapLink.href = &apos;&apos;;
  mapLink.textContent = &apos;&apos;;

  function success(position) {
    const latitude  = position.coords.latitude;
    const longitude = position.coords.longitude;

    status.textContent = &apos;&apos;;
    mapLink.href = `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`;
    mapLink.textContent = `Latitude: ${latitude} °, Longitude: ${longitude} °`;
  }

  function error() {
    status.textContent = &apos;Unable to retrieve your location&apos;;
  }

  if(!navigator.geolocation) {
    status.textContent = &apos;Geolocation is not supported by your browser&apos;;
  } else {
    status.textContent = &apos;Locating…&apos;;
    navigator.geolocation.getCurrentPosition(success, error);
  }

}

document.querySelector(&apos;#find-me&apos;).addEventListener(&apos;click&apos;, geoFindMe);
</pre>

<h3 id="Result">Result</h3>

<p><iframe class="live-sample-frame sample-code-frame" frameborder="0" height="150" id="frame_Examples" src="https://mdn.mozillademos.org/en-US/docs/Web/API/Geolocation_API/Using_the_Geolocation_API%24samples/Examples?revision=1643632" width="350"></iframe></p>

<h2 id="Спецификации">Спецификации</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Спецификация</th>
   <th scope="col">Статус</th>
   <th scope="col">Комментарий</th>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/geolocation-api/" hreflang="en" lang="en">Geolocation API</a></td>
   <td><span class="spec-REC">Рекомендация</span></td>
  </tr>
 </tbody>
</table>

<h2 id="Поддержка_браузерами">Поддержка браузерами</h2>

<div class="bc-data" id="bcd:api.Geolocation"></div>

<h3 id="Доступность">Доступность</h3>

<p>Так как местоположение, основанное на WiFi, часто предоставляется Google, API местоположения может быть не доступен в Китае. Вы можете использовать местных провайдеров, таких как <a href="http://lbsyun.baidu.com/index.php?title=jspopular/guide/geolocation">Baidu</a>, <a href="https://lbs.amap.com/api/javascript-api/guide/services/geolocation#geolocation">Autonavi</a> или <a href="http://lbs.qq.com/tool/component-geolocation.html">Tencent</a>. Эти сервисы используют IP-адресс пользователя и/или приложение для предоставления наиболее точной позиции.</p>

<h2 id="Смотрите_также">Смотрите также</h2>

<ul>
 <li><a href="https://wiki.developer.mozilla.org/ru/docs/Web/API/Geolocation_API/Using">Использование API местоположения</a></li>
 <li><a href="https://www.w3.org/TR/geolocation-API/" rel="external">API местоположения на w3.org</a></li>
 <li><a href="https://hacks.mozilla.org/2013/10/who-moved-my-geolocation/">Кто изменил моё местоположение?</a> (Hacks блог)</li>
</ul>
