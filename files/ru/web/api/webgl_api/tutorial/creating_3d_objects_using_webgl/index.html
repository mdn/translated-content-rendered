---
title: Создание 3D объектов с помощью WebGL
slug: Web/API/WebGL_API/Tutorial/Creating_3D_objects_using_WebGL
tags:
  - WebGL
  - Урок
translation_of: Web/API/WebGL_API/Tutorial/Creating_3D_objects_using_WebGL
original_slug: Web/API/WebGL_API/Tutorial/Создание_3D_объектов_с_помощью_WebGL
---
<p></p><section id="Quick_Links">
 <ol>
  <li><a href="/ru/docs/Web/API/WebGL_API"><strong>WebGL API</strong></a></li>
  <li class="toggle">
    <details open>
      <summary>Руководство WebGL</summary>
      <ol>
        <li><a href="/ru/docs/Web/API/WebGL_API/Tutorial/Getting_started_with_WebGL">Начало работы с WebGL</a></li>
        <li><a href="/ru/docs/Web/API/WebGL_API/Tutorial/Adding_2D_content_to_a_WebGL_context">Добавление двухмерного контента в контекст WebGL</a></li>
        <li><a href="/ru/docs/Web/API/WebGL_API/Tutorial/Using_shaders_to_apply_color_in_WebGL">Использование шейдеров для задания цвета в WebGL</a></li>
        <li><a href="/ru/docs/Web/API/WebGL_API/Tutorial/Animating_objects_with_WebGL">Оживление объектов при помощи WebGL</a></li>
        <li><a href="/ru/docs/Web/API/WebGL_API/Tutorial/Creating_3D_objects_using_WebGL">Создание 3D с помощью WebGL</a></li>
        <li><a href="/ru/docs/Web/API/WebGL_API/Tutorial/Using_textures_in_WebGL">Использование текстур WebGL</a></li>
        <li><a href="/ru/docs/Web/API/WebGL_API/Tutorial/Lighting_in_WebGL">Освещение WebGL</a></li>
        <li><a href="/ru/docs/Web/API/WebGL_API/Tutorial/Animating_textures_in_WebGL">Анимация текстур WebGL</a></li>
      </ol>
    </details>
  </li>
  <li class="toggle">
    <details open>
      <summary>Примеры и статьи</summary>
      <ol>
        <li><a href="/ru/docs/Web/API/WebGL_API/Matrix_math_for_the_web">Математическая матрица для Веба</a></li>
        <li><a href="/ru/docs/Web/API/WebGL_API/WebGL_model_view_projection">WebGL модель, представление, проекция</a></li>
        <li><a href="/ru/docs/Web/API/WebGL_API/WebGL_best_practices">WebGL лучшие практики</a></li>
        <li><a href="/ru/docs/Web/API/WebGL_API/Using_Extensions">Использование расширений WebGL</a></li>
        <li><a href="/ru/docs/Web/API/WebGL_API/Basic_2D_animation_example">A basic 2D WebGL animation example</a></li>
      </ol>
    </details>
  </li>
  <li class="toggle">
    <details open>
      <summary>Интерфейсы</summary>
      <ol>
        <li><a href="/ru/docs/Web/API/WebGLRenderingContext"><code>WebGLRenderingContext</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGL2RenderingContext"><code>WebGL2RenderingContext</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLActiveInfo"><code>WebGLActiveInfo</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLBuffer"><code>WebGLBuffer</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLContextEvent"><code>WebGLContextEvent</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLFramebuffer"><code>WebGLFramebuffer</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLProgram"><code>WebGLProgram</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLQuery"><code>WebGLQuery</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLRenderbuffer"><code>WebGLRenderbuffer</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLSampler"><code>WebGLSampler</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLShader"><code>WebGLShader</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLShaderPrecisionFormat"><code>WebGLShaderPrecisionFormat</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLSync"><code>WebGLSync</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLTexture"><code>WebGLTexture</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLTransformFeedback"><code>WebGLTransformFeedback</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLUniformLocation"><code>WebGLUniformLocation</code></a></li>
        <li><a href="/ru/docs/Web/API/WebGLVertexArrayObject"><code>WebGLVertexArrayObject</code></a></li>
      </ol>
    </details>
  </li>

  <li><strong><a href="/ru/docs/MDN">Доментация:</a></strong></li>
  <li class="toggle">
    <details>
      <summary>Полезные списки</summary>
      <ol>
        <li><a href="/ru/docs/tag/WebGL">Страницы отмеченные &quot;WebGL&quot;</a></li>
      </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
      <summary>Внести вклад</summary>
      <ol>
        <li><a href="/ru/docs/MDN/Doc_status/API/WebGL">Стутус документации WebGL</a></li>
        <li><a href="/ru/docs/MDN">Проект MDN</a></li>
      </ol>
    </details>
  </li>
 </ol>
</section> <div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/ru/docs/Web/API/WebGL_API/Tutorial/Animating_objects_with_WebGL" class="button">« Предыдущая статья</a><a href="/ru/docs/Web/API/WebGL_API/Tutorial/Using_textures_in_WebGL" class="button">Следующая статья  »</a></p>
</div><p></p>

<p>Давайте поместим наш квадрат в трехмерное пространство, добавив еще 5 граней, чтобы получить куб. Чтобы сделать это наиболее продуктивно, вместо рисования вершин непосредственным вызовом метода <a href="/ru/docs/Web/API/WebGLRenderingContext/drawArrays" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>gl.drawArrays()</code></a> , мы будем использовать массив вершин в виде таблицы и ссылаться на каждую вершину в этой таблице, чтобы определить положение каждой вершины грани, вызывая <a href="/ru/docs/Web/API/WebGLRenderingContext/drawElements" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>gl.drawElements()</code></a>.</p>

<p>Заметим: чтобы определить каждую грань необходимо четыре вершины, но каждая вершина принадлежит трем граням. Мы можем передавать намного меньше данных, построив список всех 24-х вершин, затем ссылаться на каждую из них в этом списке по её индексу, вместо того чтобы передавать все множество вершин. Если вы удивлены, почему нам нужны 24 вершины, а не только 8, так это потому, что каждое ребро принадлежит трем граням разных цветов, и каждая отдельная вершина должна иметь конкретный отдельный цвет - поэтому мы создадим 3 копии каждой вершины трех разных цветов, по одной для каждой грани.</p>

<h2 id="Определение_позиций_вершин_куба">Определение позиций вершин куба</h2>

<p>Во первых, давайте построим буффер позиций вершин куба, обновив код в <code>initBuffers()</code>. Это в значительной степени то же самое как это было для квадрата, но несколько длиннее, так как здесь 24 вершины (4 с каждой стороны):</p>

<pre class="brush: js">var vertices = [
  // Передняя грань
  -1.0, -1.0,  1.0,
   1.0, -1.0,  1.0,
   1.0,  1.0,  1.0,
  -1.0,  1.0,  1.0,

  // Задняя грань
  -1.0, -1.0, -1.0,
  -1.0,  1.0, -1.0,
   1.0,  1.0, -1.0,
   1.0, -1.0, -1.0,

  // Верхняя грань
  -1.0,  1.0, -1.0,
  -1.0,  1.0,  1.0,
   1.0,  1.0,  1.0,
   1.0,  1.0, -1.0,

  // Нижняя грань
  -1.0, -1.0, -1.0,
   1.0, -1.0, -1.0,
   1.0, -1.0,  1.0,
  -1.0, -1.0,  1.0,

  // Правая грань
   1.0, -1.0, -1.0,
   1.0,  1.0, -1.0,
   1.0,  1.0,  1.0,
   1.0, -1.0,  1.0,

  // Левая грань
  -1.0, -1.0, -1.0,
  -1.0, -1.0,  1.0,
  -1.0,  1.0,  1.0,
  -1.0,  1.0, -1.0
];
</pre>

<h2 id="Определение_цветов_вершин">Определение цветов вершин</h2>

<p>Нам также нужно построить массив цветов для каждой из 24-х вершин. Этот код начинается с определения цветов для каждой грани, затем используется цикл для составления массива все всех цветов для каждой из вершин.</p>

<pre class="brush: js">var colors = [
  [1.0,  1.0,  1.0,  1.0],    // Front face: white
  [1.0,  0.0,  0.0,  1.0],    // Back face: red
  [0.0,  1.0,  0.0,  1.0],    // Top face: green
  [0.0,  0.0,  1.0,  1.0],    // Bottom face: blue
  [1.0,  1.0,  0.0,  1.0],    // Right face: yellow
  [1.0,  0.0,  1.0,  1.0]     // Left face: purple
];

var generatedColors = [];

for (j=0; j&lt;6; j++) {
  var c = colors[j];

  for (var i=0; i&lt;4; i++) {
    generatedColors = generatedColors.concat(c);
  }
}

cubeVerticesColorBuffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, cubeVerticesColorBuffer);
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(generatedColors), gl.STATIC_DRAW);
</pre>

<h2 id="Определение_массива_элементов">Определение массива элементов</h2>

<p>Как только массив вершин сгенерирован, нам нужно построить массив элементов.</p>

<pre class="brush: js">cubeVerticesIndexBuffer = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVerticesIndexBuffer);

// Этот массив определяет каждую грань как два треугольника,
// используя индексы в массиве вершин, чтобы определить позицию
// каждого треугольника.

var cubeVertexIndices = [
  0,  1,  2,      0,  2,  3,    // front
  4,  5,  6,      4,  6,  7,    // back
  8,  9,  10,     8,  10, 11,   // top
  12, 13, 14,     12, 14, 15,   // bottom
  16, 17, 18,     16, 18, 19,   // right
  20, 21, 22,     20, 22, 23    // left
];

// Теперь отправим массив элементов в GL

gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,
    new Uint16Array(cubeVertexIndices), gl.STATIC_DRAW);
</pre>

<p>Массив <code>cubeVertexIndices</code> определяет каждую грань как пару треугольников, сопоставляя каждой вершине треугольника индекс в массиве вершин куба. Таким образом куб можно представить как набор из 12 треугольников.</p>

<h2 id="Рисование_куба">Рисование куба</h2>

<p>Далее нам нужно обновить код нашей функции <code>drawScene()</code> , чтобы рисовать, используя буффер индексов куба, добавив новые вызовы <a href="/ru/docs/Web/API/WebGLRenderingContext/bindBuffer" title="ebGLRenderingContext.bindBuffer() метод WebGL API связывает WebGLBuffer c точкой связывания(Атрибут регистром)."><code>gl.bindBuffer()</code></a> и <a href="/ru/docs/Web/API/WebGLRenderingContext/drawElements" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>gl.drawElements()</code></a>:</p>

<pre class="brush: js">gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVerticesIndexBuffer);
setMatrixUniforms();
gl.drawElements(gl.TRIANGLES, 36, gl.UNSIGNED_SHORT, 0);
</pre>

<p>Поскольку каждая грань нашего куба состоит из двух треугольников, где 6 вершин на каждой грани, или всего 36 вершин во всем кубе, даже если многие из них дублируются. Однако, поскольку наш массив индексов состоит из целых чисел, это не чрезмерное количество данных, посылаемых для каждого кадра анимации.</p>

<p>В данный момент у нас есть анимированный куб с гранями 6 разных цветов, который прыгает и вращается.</p>

<p><iframe src="https://mdn.github.io/webgl-examples/tutorial/sample5/index.html" width="670" class="live-sample-frame" height="510" frameborder="0"></iframe></p>

<p><a href="https://github.com/mdn/webgl-examples/tree/gh-pages/tutorial/sample5">View the complete code</a> | <a href="http://mdn.github.io/webgl-examples/tutorial/sample5/">Open this demo on a new page</a></p>

<p></p><div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/ru/docs/Web/API/WebGL_API/Tutorial/Animating_objects_with_WebGL" class="button">« Предыдущая статья</a><a href="/ru/docs/Web/API/WebGL_API/Tutorial/Using_textures_in_WebGL" class="button">Следующая статья  »</a></p>
</div><p></p>
