---
title: 'Объединенный асинхронный JavaScript: Таймайты и интервалы'
slug: Learn/JavaScript/Asynchronous/Timeouts_and_intervals
translation_of: Learn/JavaScript/Asynchronous/Timeouts_and_intervals
original_slug: Learn/JavaScript/Asynchronous/Таймауты_и_интервалы
---
<div><section class="Quick_links" id="Quick_Links">

<ol>
  <li data-default-state="closed"><a href="/ru/docs/Learn/Getting_started_with_the_web"><strong>Новички начинают здесь!</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Начало работы с Вебом</summary>
          <ol>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web">Начало работы с Вебом</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/Installing_basic_software">Установка базового программного обеспечения</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/What_will_your_website_look_like">Каким должен быть ваш веб-сайт?</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/Dealing_with_files">Работа с файлами</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/HTML_basics">Основы HTML</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/CSS_basics">Основы CSS</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/JavaScript_basics">Основы JavaScript</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/Publishing_your_website">Публикация вашего веб-сайта</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/How_the_Web_works">Как работает Веб</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="closed"><a href="/ru/docs/Learn/HTML"><strong>HTML — структура Веба</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Вступление в HTML</summary>
          <ol>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML">Вступление в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Getting_started">Начало работы с HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/The_head_metadata_in_HTML">Что в &quot;шапке&quot;? Метаданные в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/HTML_text_fundamentals">Тексты в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Creating_hyperlinks">Создание гиперссылок</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Advanced_text_formatting">Продвинутое форматирование текста</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Document_and_website_structure">Структура документа и веб-сайта</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Debugging_HTML">Отладка HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Marking_up_a_letter">Задание: Выделение символа</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Structuring_a_page_of_content">Задание: Структура страницы</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Мультимедиа и встраивание</summary>
          <ol>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding">Мультимедиа и встраивание</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Images_in_HTML">Изображения в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Video_and_audio_content">Видео и аудио контент</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Other_embedding_technologies">От object до iframe — другие технологии встраивания</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Adding_vector_graphics_to_the_Web">Добавление векторный графики в Веб</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images">Отзывчивые изображения</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Mozilla_splash_page">Задание: Страница о Mozilla</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>HTML tables</summary>
          <ol>
            <li><a href="/ru/docs/Learn/HTML/Tables">HTML tables overview</a></li>
            <li><a href="/ru/docs/Learn/HTML/Tables/Basics">HTML table basics</a></li>
            <li><a href="/ru/docs/Learn/HTML/Tables/Advanced">HTML Table advanced features and accessibility</a></li>
            <li><a href="/ru/docs/Learn/HTML/Tables/Structuring_planet_data">Assessment: Structuring planet data</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="closed"><a href="/ru/docs/Learn/CSS"><strong>CSS — стилизирование Веба</strong></a></li>
  <li class="toggle">
      <details>
          <summary>CSS first steps</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/First_steps">CSS first steps overview</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/What_is_CSS">What is CSS?</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/Getting_started">Getting started with CSS</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/How_CSS_is_structured">How CSS is structured</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/How_CSS_works">How CSS works</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/Using_your_new_knowledge">Using your new knowledge</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>CSS building blocks</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks">CSS building blocks overview</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Cascade_and_inheritance">Cascade and inheritance</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Selectors">CSS selectors</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/The_box_model">The box model</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Backgrounds_and_borders">Backgrounds and borders</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Handling_different_text_directions">Handling different text directions</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Overflowing_content">Overflowing content</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Values_and_units">Values and units</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Sizing_items_in_CSS">Sizing items in CSS</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Images_media_form_elements">Images, media, and form elements</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Styling_tables">Styling tables</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Debugging_CSS">Debugging CSS</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Organizing">Organizing your CSS</a></li>
      </ol></details>
  </li>
  <li class="toggle">
      <details>
          <summary>Стилизирование текста</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/Styling_text">Стилизирование текста</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Fundamentals">Основы стилизирования текста и шрифта</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Styling_lists">Стилизирование списков</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Styling_links">Стилизирование ссылок</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Web_fonts">Веб-шрифты</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Typesetting_a_homepage">Задание: Стилизирование школьного сайта</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>CSS макет</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout">CSS макет</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Introduction">Вступление</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Normal_Flow">Normal Flow</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Flexbox">Flexbox</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Grids">Сетки</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Floats">Float</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Positioning">Позиционирование</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Multiple-column_Layout">Multiple-column Layout</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Responsive_Design">Responsive design</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Media_queries">Beginner&apos;s guide to media queries</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Legacy_Layout_Methods">Legacy Layout Methods</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Supporting_Older_Browsers">Supporting Older Browsers</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Fundamental_Layout_Comprehension">Fundamental Layout Comprehension</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="open"><a href="/ru/docs/Learn/JavaScript"><strong>JavaScript — динамический клиентский скриптинг</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Первые шаги в JavaScript</summary>
          <ol>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps">Первые шаги в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/What_is_JavaScript">Что такое JavaScript?</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/A_first_splash">Первое погружение в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/What_went_wrong">Что-то пошло не так? Устранение ошибок JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Variables">Хранение нужной информации — Переменные</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Math">Основы JavaScript — Числа и операторы</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Strings">Работа с текстом — Строки в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Useful_string_methods">Полезные методы для строк</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Arrays">Массивы</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Silly_story_generator">Задание: Генератор глупых историй</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Блоки в JavaScript</summary>
          <ol>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks">Блоки в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/conditionals">Делаем решения в вашем годе — Условия</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Looping_code">Повторение кода</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Functions">Функции — Переиспользуемые блоки кода</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Build_your_own_function">Создаём свою функцию</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Return_values">Возвращаемые значения функций</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Events">Введение в события</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Image_gallery">Задание: Галерея изображений</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Введение в объекты JavaScript</summary>
          <ol>
            <li><a href="/ru/docs/Learn/JavaScript/Objects">Введение в объекты JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Basics">Основы объектов</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Object-oriented_JS">Объектно-ориентированный JavaScript для новичков</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Object_prototypes">Прототипы объектов</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Inheritance">Наследование в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/JSON">Работа с JSON данными</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Object_building_practice">Практика по созданию объектов</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Adding_bouncing_balls_features">Задание: Добавление возможностей в пример с прыгающими шарами</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
    <details open>
        <summary>Asynchronous JavaScript</summary>
        <ol>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous">Asynchronous JavaScript overview</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Concepts">General asynchronous programming concepts</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Introducing">Introducing asynchronous JavaScript</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals">Cooperative asynchronous Java​Script: Timeouts and intervals</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Promises">Graceful asynchronous programming with Promises</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Async_await">Making asynchronous programming easier with async and await</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Choosing_the_right_approach">Choosing the right approach</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Client-side web APIs</summary>
        <ol>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs">Client-side web APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Introduction">Introduction to web APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents">Manipulating documents</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data">Fetching data from the server</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Third_party_APIs">Third party APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Drawing_graphics">Drawing graphics</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Video_and_audio_APIs">Video and audio APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Client-side_storage">Client-side storage</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/ru/docs/Learn/Forms"><strong>Web forms — Working with user data</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Core forms learning pathway</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Forms">Web forms overview</a></li>
          <li><a href="/ru/docs/Learn/Forms/Your_first_form">Your first form</a></li>
          <li><a href="/ru/docs/Learn/Forms/How_to_structure_a_web_form">How to structure a web form</a></li>
          <li><a href="/ru/docs/Learn/Forms/Basic_native_form_controls">Basic native form controls</a></li>
          <li><a href="/ru/docs/Learn/Forms/HTML5_input_types">The HTML5 input types</a></li>
          <li><a href="/ru/docs/Learn/Forms/Other_form_controls">Other form controls</a></li>
          <li><a href="/ru/docs/Learn/Forms/Styling_web_forms">Styling web forms</a></li>
          <li><a href="/ru/docs/Learn/Forms/Advanced_form_styling">Advanced form styling</a></li>
          <li><a href="/ru/docs/Learn/Forms/UI_pseudo-classes">UI pseudo-classes</a></li>
          <li><a href="/ru/docs/Learn/Forms/Form_validation">Client-side form validation</a></li>
          <li><a href="/ru/docs/Learn/Forms/Sending_and_retrieving_form_data">Sending form data</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Advanced forms articles</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Forms/How_to_build_custom_form_controls">How to build custom form controls</a></li>
          <li><a href="/ru/docs/Learn/Forms/Sending_forms_through_JavaScript">Sending forms through JavaScript</a></li>
          <li><a href="/ru/docs/Learn/Forms/Property_compatibility_table_for_form_controls">CSS property compatibility table for form controls</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/ru/docs/Learn/Accessibility"><strong>Accessibility — Make the web usable by everyone</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Accessibility guides</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Accessibility">Accessibility overview</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/What_is_accessibility">What is accessibility?</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/HTML">HTML: A good basis for accessibility</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/CSS_and_JavaScript">CSS and JavaScript accessibility best practices</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/WAI-ARIA_basics">WAI-ARIA basics</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/Multimedia">Accessible multimedia</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/Mobile">Mobile accessibility</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Accessibility assessment</summary>
        <ol>
            <li><a href="/ru/docs/Learn/Accessibility/Accessibility_troubleshooting">Assessment: Accessibility troubleshooting</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/ru/docs/Learn/Tools_and_testing"><strong>Инструменты и тестирование</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Client-side web development tools</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools">Client-side web development tools index</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Overview">Client-side tooling overview</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Command_line">Command line crash course</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Package_management">Package management basics</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Introducing_complete_toolchain">Introducing a complete toolchain</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Deployment">Deploying our app</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Introduction to client-side frameworks</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Introduction">Client-side frameworks overview</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Main_features">Framework main features</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>React</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started">Getting started with React</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_todo_list_beginning">Beginning our React todo list</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_components">Componentizing our React app</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state">React interactivity: Events and state</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_filtering_conditional_rendering">React interactivity: Editing, filtering, conditional rendering</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_accessibility">Accessibility in React</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_resources">React resources</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Ember</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_getting_started">Getting started with Ember</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_structure_componentization">Ember app structure and componentization</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_interactivity_events_state">Ember interactivity: Events, classes and state</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_conditional_footer">Ember Interactivity: Footer functionality, conditional rendering</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_routing">Routing in Ember</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_resources">Ember resources and troubleshooting</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Vue</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_getting_started">Getting started with Vue</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_first_component">Creating our first Vue component</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_rendering_lists">Rendering a list of Vue components</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_methods_events_models">Adding a new todo form: Vue events, methods, and models</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_styling">Styling Vue components with CSS</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_computed_properties">Using Vue computed properties</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_conditional_rendering  ">Vue conditional rendering: editing existing todos</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_refs_focus_management">Focus management with Vue refs</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_resources">Vue resources</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Svelte</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_getting_started">Getting started with Svelte</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_Todo_list_beginning">Starting our Svelte Todo list app</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_variables_props">Dynamic behavior in Svelte: working with variables and props</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_components">Componentizing our Svelte app</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_reactivity_lifecycle_accessibility">Advanced Svelte: Reactivity, lifecycle, accessibility</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_stores">Working with Svelte stores</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_TypeScript  ">TypeScript support in Svelte</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_deployment_next">Deployment and next steps</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Git and GitHub</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/GitHub">Git and GitHub overview</a></li>
          <li><a href="https://guides.github.com/activities/hello-world/">Hello World</a></li>
          <li><a href="https://guides.github.com/introduction/git-handbook/">Git Handbook</a></li>
          <li><a href="https://guides.github.com/activities/forking/">Forking Projects</a></li>
          <li><a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests">About pull requests</a></li>
          <li><a href="https://guides.github.com/features/issues/">Mastering Issues</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Кроссбраузерное тестирование</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing">Кроссбраузерное тестирование</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Introduction">Вступление в кроссбраузерное тестирование</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Testing_strategies">Стратегии выполнения тестирования</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/HTML_and_CSS">Решение частых проблем с HTML и CSS</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/JavaScript">Решение частых проблем с JavaScript</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Accessibility">Решение частых проблем доступности</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Feature_detection">Проверка поддержки возможностей</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Automated_testing">Вступление в автоматическое тестирование</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment">Установка вашей автоматической среды тестирования</a></li>
        </ol>
    </details>
  </li>
  <li data-default-state="closed"><a href="/ru/docs/Learn/Server-side"><strong>Программирование серверной части сайта</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Первые шаги</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Server-side/First_steps">Первые шаги</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Introduction">Вступление в серверное программирование</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Client-Server_overview">Клиент-сервер</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Web_frameworks">Веб-фреймворки для серверной части</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Website_security">Защищённость веб-сайтов</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Веб-фреймворк Django (Python)</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Server-side/Django">Веб-фреймворк Django (Python)</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Introduction">Вступление</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/development_environment">Установка среды разработки</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Tutorial_local_library_website">Руководство: Сайт местной библиотеки</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/skeleton_website">Руководство часть 2: Создаём набросок сайта</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Models">Руководство часть 3: Использование моделей</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Admin_site">Руководство часть 4: Django панель администратора</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Home_page">Руководство часть 5: Создание нашей домашней страницы</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Generic_views">Руководство часть 6: Списки и представления</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Sessions">Руководство часть 7: Сессии</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Authentication">Руководство часть 8: Аутенфикация и разрешения пользователей</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Forms">Руководство часть 9: Работа с формами</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Testing">Руководство часть 10: Тестирование веб-приложения на Django</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Deployment">Руководство часть 11: Разворачивание Django на продакшн сервере</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/web_application_security">Защищённость веб-приложения</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/django_assessment_blog">Задание: создание мини блога</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Express Web Framework (node.js/JavaScript)</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs">Express Web Framework (Node.js/JavaScript) overview</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/Introduction">Express/Node introduction</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/development_environment">Setting up a Node (Express) development environment</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/Tutorial_local_library_website">Express tutorial: The Local Library website</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/skeleton_website">Express Tutorial Part 2: Creating a skeleton website</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/mongoose">Express Tutorial Part 3: Using a database (with Mongoose)</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/routes">Express Tutorial Part 4: Routes and controllers</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/Displaying_data">Express Tutorial Part 5: Displaying library data</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/forms">Express Tutorial Part 6: Working with forms</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/deployment">Express Tutorial Part 7: Deploying to production</a></li>
        </ol>
    </details>
  </li>
  <li><a href="#"><strong>Дальнейшее чтение</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Общие вопросы</summary>
        <ol>
          <li><a href="/ru/docs/Learn/HTML/Howto">Вопросы по HTML</a></li>
          <li><a href="/ru/docs/Learn/CSS/Howto">Вопросы по CSS</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Howto">JavaScript questions</a></li>
          <li><a href="/ru/docs/Learn/Common_questions#How_the_Web_works">Как работает Веб</a></li>
          <li><a href="/ru/docs/Learn/Common_questions#Tools_and_setup">Инструменты и установка</a></li>
          <li><a href="/ru/docs/Learn/Common_questions#Design_and_accessibility">Дизайн и доступность</a></li>
        </ol>
    </details>
  </li>
  <li data-default-state="closed"><a href="/ru/docs/Learn/How_to_contribute">Как помочь?</a></li>
</ol>

</section></div>

<div><div class="prevnext">
  <a href="/ru/docs/Learn/JavaScript/Asynchronous/Introducing" class="button"><i class="icon-arrow-left"></i><span class="label"> Назад </span></a><a href="/ru/docs/Learn/JavaScript/Asynchronous" class="button"><i class="icon-arrow-up"></i> Обзор: Asynchronous</a><a href="/ru/docs/Learn/JavaScript/Asynchronous/Promises" class="button"><span class="label"> Далее  </span><i class="icon-arrow-right"></i></a>
</div></div>

<p class="summary">В этом руководстве рассматриваются традиционные методы, доступные в JavaScript для асинхронного выполнения кода по истечении заданного периода времени или через регулярный интервал (например, заданное количество раз в секунду), обсуждаются их полезные свойства и рассматриваются присущие им проблемы. .</p>

<table class="learn-box standard-table">
 <tbody>
  <tr>
   <th scope="row">Необходимые условия:</th>
   <td>Базовая компьютерная грамотность, достаточное понимание основ JavaScript.</td>
  </tr>
  <tr>
   <th scope="row">Цель:</th>
   <td>Понимание асинхронных циклов и интервалов, и то как их можно использовать.</td>
  </tr>
 </tbody>
</table>

<h2 id="Введение">Введение</h2>

<p>В течение долгого времени веб-платформа предлагала программистам JavaScript ряд функций, которые позволяли им асинхронно выполнять код по истечении определенного временного интервала и повторно выполнять асинхронный блок кода, пока вы не скажете ему остановиться.</p>

<p>Эти функции:</p>

<dl>
 <dt><code><a href="/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout">setTimeout()</a></code></dt>
 <dd>Выполняет указанный блок кода один раз по истечении указанного времени</dd>
 <dt><code><a href="/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval">setInterval()</a></code></dt>
 <dd>Выполняет указанный блок кода несколько раз с определенным интервалом между каждым вызовом.</dd>
 <dt><code><a href="/en-US/docs/Web/API/window/requestAnimationFrame">requestAnimationFrame()</a></code></dt>
 <dd>Современная версия setInterval (). Выполняут указанный блок кода перед тем, как браузер в следующий раз перерисовывает отображение, позволяя запускать анимацию с подходящей частотой кадров независимо от среды, в которой она выполняется.</dd>
</dl>

<p>Асинхронный код, установленный этими функциями, выполняется в основном потоке (по истечении указанного им таймера).</p>

<div>
<p>Важно знать, что вы можете (и часто будете) запускать другой код до выполнения вызова setTimeout () или между итерациями setInterval (). В зависимости от того, насколько интенсивно используются эти операции для процессора, они могут еще больше задержать выполнение асинхронного кода, поскольку любой асинхронный код будет выполняться только после того, как станет доступен основной поток. (Другими словами, когда стек пуст.) Вы узнаете больше по этому вопросу по мере изучения этой статьи.</p>
</div>

<p>В любом случае эти функции используются для запуска постоянной анимации и другой фоновой обработки на веб-сайте или в приложении. В следующих разделах мы покажем вам, как их можно использовать.</p>

<h2 id="setTimeout">setTimeout()</h2>

<p>Как мы ранее отметили, setTimeout () выполняет определенный блок кода один раз по истечении заданного времени. Принимает следующие параметры:</p>

<ul>
 <li>Функция для запуска или ссылка на функцию, определенную в другом месте.</li>
 <li>Число, представляющее интервал времени в миллисекундах (1000 миллисекунд равняется 1 секунде) ожидания перед выполнением кода. Если вы укажете значение 0 (или просто опустите значение), функция запустится как можно скорее. (См. Примечание ниже о том, почему он запускается «как можно скорее», а не «сразу».) Подробнее о том, почему вы, возможно, захотите сделать это позже.</li>
 <li>Значений, представляющие любые параметры, которые вы хотите передать функции при ее запуске.</li>
</ul>

<div class="note notecard">
<p><strong>NOTE: </strong> Указанное время (или задержка) не является гарантированным временем выполнения, а скорее минимальным временем выполнения. Обратные вызовы, которые вы передаете этим функциям, не могут выполняться, пока стек в основном потоке не станет пустым.</p>

<p>Как следствие, такой код, как setTimeout (fn, 0), будет выполняться, как только стек будет пуст, а не сразу. Если вы выполните такой код, как setTimeout (fn, 0), но сразу после выполнения цикла, который насчитывает от 1 до 10 миллиардов, ваш обратный вызов будет выполнен через несколько секунд.</p>
</div>

<p>В следующем примере, браузер будет ожидать две секунды перед тем как  выполнит анонимную функцию, тогда отобразит сообщение (<a href="https://mdn.github.io/learning-area/javascript/asynchronous/loops-and-intervals/simple-settimeout.html">живой пример</a>, и <a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/loops-and-intervals/simple-settimeout.html">исходный код</a>):</p>

<pre class="brush: js notranslate">let myGreeting = setTimeout(function() {
  alert(&apos;Hello, Mr. Universe!&apos;);
}, 2000)</pre>

<p>Указанные вами функции не обязательно должны быть анонимными. Вы можете дать своей функции имя и даже определить ее где-нибудь еще и передать ссылку на функцию в setTimeout (). Следующие две версии фрагмента кода эквивалентны первой:</p>

<pre class="brush: js notranslate">// С именованной функцией
let myGreeting = setTimeout(function sayHi() {
  alert(&apos;Hello, Mr. Universe!&apos;);
}, 2000)

// С функцией определенной отдельно
function sayHi() {
  alert(&apos;Hello Mr. Universe!&apos;);
}

let myGreeting = setTimeout(sayHi, 2000);</pre>

<p>Это может быть полезно, если у вас есть функция, которую нужно вызывать как по таймауту, так например и в ответ на событие. Но это также может  помочь поддерживать ваш код в чистоте, особенно если обратный вызов тайм-аута занимает больше, чем несколько строк кода.</p>

<p><code>setTimeout () </code>возвращает значение идентификатора, которое можно использовать для ссылки на тайм-аут позже, например, когда вы хотите его остановить.</p>

<h3 id="Передача_параметров_в_функцию_setTimeout">Передача параметров в функцию setTimeout ()</h3>

<p>Любые параметры, которые вы хотите передать функции, выполняемой внутри setTimeout (), должны быть переданы ей как дополнительные параметры в конце списка.</p>

<p>Например, вы можете реорганизовать предыдущую функцию, чтобы она передавала привет любому имени, переданному ей:</p>

<pre class="brush: js notranslate">function sayHi(who) {
  alert(`Hello ${who}!`);
}</pre>

<p>Теперь вы можете передать имя в вызов setTimeout () в качестве третьего параметра:</p>

<pre class="brush: js notranslate">let myGreeting = setTimeout(sayHi, 2000, &apos;Mr. Universe&apos;);</pre>

<h3 id="Очистка_таймаутов">Очистка таймаутов</h3>

<p>Наконец, если был создан тайм-аут, вы можете отменить его до истечения указанного времени, вызвав <code><a href="/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearTimeout">clearTimeout()</a></code>, передав ему идентификатор вызова <code>setTimeout()</code> в качестве параметра. Итак, чтобы отменить указанный выше тайм-аут, вы должны сделать следующее:</p>

<pre class="brush: js notranslate">clearTimeout(myGreeting);</pre>

<div class="note notecard">
<p><strong>Note</strong>: См.<code><a href="https://mdn.github.io/learning-area/javascript/asynchronous/loops-and-intervals/greeter-app.html">greeter-app.html</a></code> для более полной демонстрации, которая позволяет вам указать имя для приветствия и отменить приветствие с помощью отдельной кнопки (<a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/loops-and-intervals/greeter-app.html">см. исходный код</a>).</p>
</div>

<h2 id="setInterval">setInterval()</h2>

<p><code>setTimeout ()</code> отлично работает, когда вам нужно один раз запустить код по истечении заданного периода времени. Но что происходит, когда вам нужно запускать код снова и снова - например, в случае анимации?</p>

<p>Здесь пригодится <a href="/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval">setInterval()</a> . Работает очень похоже на setTimeout (), за исключением того, что функция, которую вы передаете в качестве первого параметра, выполняется повторно не менее чем за количество миллисекунд, заданных вторым параметром. Вы также можете передать любые параметры, необходимые для выполняемой функции, в качестве последующих параметров вызова setInterval ().</p>

<p>Давайте посмотрим на пример. Следующая функция создает новый объект <code><a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">Date()</a></code>, с помощью <code><a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString">toLocaleTimeString()</a></code> извлекает из него строку с временем и отображает ее в пользовательском интерфейсе. Затем он запускает функцию один раз в секунду с помощью <code>setInterval()</code>, создавая эффект цифровых часов, которые обновляются раз в секунду (<a href="https://mdn.github.io/learning-area/javascript/asynchronous/loops-and-intervals/setinterval-clock.html"> реальный пример</a>, и <a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/loops-and-intervals/setinterval-clock.html">исходный код</a>):</p>

<pre class="brush: js notranslate">function displayTime() {
   let date = new Date();
   let time = date.toLocaleTimeString();
   document.getElementById(&apos;demo&apos;).textContent = time;
}

const createClock = setInterval(displayTime, 1000);</pre>

<p>Как и <code>setTimeout ()</code>, <code>setInterval ()</code> возвращает определенное значение, которое вы можете использовать позже, когда вам нужно очистить интервал.</p>

<h3 id="Очистка_интервала">Очистка интервала</h3>

<p><code>setInterval () </code>выполняет задачу постоянно. setInterval () продолжает выполнять задачу вечно, если вы что-то с ней не сделаете. Возможно, вам понадобится способ остановить такие задачи, иначе вы можете получить ошибки, если браузер не сможет выполнить какие-либо другие версии задачи или если анимация, обрабатываемая задачей, завершилась. Вы можете сделать это так же, как останавливаете <code>timeouts</code> - передавая идентификатор, возвращаемый вызовом <code>setInterval ()</code>, в функцию <code>clearInterval ()</code>:</p>

<pre class="brush: js notranslate">const myInterval = setInterval(myFunction, 2000);

clearInterval(myInterval);</pre>

<h4 id="Активное_обучение_Создание_собственного_секундомера!">Активное обучение: Создание собственного секундомера!</h4>

<p>Учитывая все вышесказанное, у нас есть для вас задача. Возьмите копию нашего примера <code><a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/loops-and-intervals/setinterval-clock.html">setInterval-clock.html</a></code> , и измените ее так, чтобы создать свой собственный простой секундомер.</p>

<p>Вам нужно отображать время, как и раньше, но в этом примере вам нужно:</p>

<ul>
 <li>Кнопка &quot;Start&quot; для запуска секундомера.</li>
 <li>Кнопка &quot;Stop&quot; для паузы/остановки.</li>
 <li>Кнопка &quot;Reset&quot;, чтобы сбросить счетчик времени на <code>0</code>.</li>
 <li>Дисплей времени, чтобы отображать количество прошедших секунд а не фактическое время.</li>
</ul>

<p>Несколько подсказок для вас:</p>

<ul>
 <li>Вы можете структурировать и стилизовать разметку кнопок по своему усмотрению; просто убедитесь, что вы используете семантический HTML с кавычками, которые позволяют захватывать ссылки на кнопки с помощью JavaScript.</li>
 <li>Вероятно, вы захотите создать переменную, которая начинается с 0, а затем увеличивается на единицу каждую секунду с использованием постоянного цикла.</li>
 <li>Этот пример проще создать без использования объекта Date (), как мы это делали в нашей версии, но он будет менее точен - вы не можете гарантировать, что обратный вызов сработает ровно через 1000 мс. Более точным способом было бы запустить startTime = Date.now (), чтобы получить метку времени, когда пользователь нажал кнопку запуска, а затем выполнить Date.now () - startTime, чтобы получить количество миллисекунд после того, как была нажата кнопка запуска .</li>
 <li>Вам также нужно рассчитать количество часов, минут и секунд как отдельные значения, а затем отображать их вместе в строке после каждой итерации цикла. На втором счетчике вы можете отработать каждую из них.</li>
 <li>Как вы могли бы их рассчитать? Подумайте об этом:
  <ul>
   <li>В одном часе <code>3600 </code>секунд.</li>
   <li>Количество минут - это количество секунд, оставшееся после вычитания всех часов, разделенное на 60.</li>
   <li>Количество секунд будет количеством секунд, оставшихся после вычитания всех минут.</li>
  </ul>
 </li>
 <li>Вам необходимо включить начальный ноль в отображаемые значения, если сумма меньше <code>10</code>, чтобы они больше походили на традиционные часы.</li>
 <li>Чтобы приостановить секундомер, вам нужно очистить интервал. Чтобы сбросить его, вам нудно установить счетчик обратно на <code>0</code>, очистить интервал, а затем немедленно обновить отображение.</li>
 <li>Вероятно, вам следует отключить кнопку запуска после ее нажатия один раз и снова включить ее после того, как вы остановили / сбросили ее. В противном случае многократное нажатие кнопки запуска приведет к применению нескольких <code>setInterval ()</code> к часам, что приведет к неправильному поведению.</li>
</ul>

<div class="note notecard">
<p><strong>Note</strong>: Если вы застряли, вы можете <a href="https://mdn.github.io/learning-area/javascript/asynchronous/loops-and-intervals/setinterval-stopwatch.html">увидеть нашу версию</a> (см. также <a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/loops-and-intervals/setinterval-stopwatch.html">исходный код</a> ).</p>
</div>

<h2 id="Что_нужно_помнить_о_setTimeout_и_setInterval">Что нужно помнить о <code>setTimeout ()</code> и <code>setInterval ()</code></h2>

<p>При работе с<code> setTimeout ()</code> и <code>setInterval ()</code> следует помнить о нескольких вещах. Давайте рассмотрим их.</p>

<h3 id="Рекурсивые_таймауты">Рекурсивые таймауты</h3>

<p>Есть еще один способ использования <code>setTimeout ()</code>: вы можете вызвать его рекурсивно для повторного запуска одного и того же кода вместо использования <code>setInterval ()</code>.</p>

<p>В приведенном ниже примере используется рекурсивный setTimeout () для запуска переданной функции каждые 100 миллисекунд:</p>

<pre class="brush: js notranslate">let i = 1;

setTimeout(function run() {
  console.log(i);
  i++;
  setTimeout(run, 100);
}, 100);</pre>

<p>Сравните приведенный выше пример со следующим - здесь используется <code>setInterval ()</code> для достижения того же эффекта:</p>

<pre class="brush: js notranslate">let i = 1;

setInterval(function run() {
  console.log(i);
  i++
}, 100);</pre>

<h4 id="Чем_рекурсивный_setTimeout_отличается_от_setInterval">Чем рекурсивный <code>setTimeout ()</code> отличается от <code>setInterval () </code>?</h4>

<p>Разница между двумя версиями приведенного выше кода невелика.</p>

<ul>
 <li>Рекурсивный <code>setTimeout ()</code> гарантирует такую же задержку между выполнениями. (Например, 100 мс в приведенном выше случае.) Код будет запущен, затем подождет 100 миллисекунд, прежде чем запустится снова, поэтому интервал будет одинаковым, независимо от того, сколько времени требуется для выполнения кода.</li>
 <li>Пример с использованием <code>setInterval () </code>работает несколько иначе. Выбранный вами интервал включает время, затрачиваемое на выполнение кода, который вы хотите запустить. Предположим, что выполнение кода занимает <code>40 </code>миллисекунд - тогда интервал составляет всего <code>60 </code>миллисекунд.</li>
 <li>При рекурсивном использовании <code>setTimeout ()</code> каждая итерация может вычислять различную задержку перед запуском следующей итерации. Другими словами, значение второго параметра может указывать другое время в миллисекундах для ожидания перед повторным запуском кода.</li>
</ul>

<p>Когда ваш код потенциально может занять больше времени, чем назначенный вами интервал времени, лучше использовать рекурсивный <code>setTimeout ()</code> - это сохранит постоянный временной интервал между выполнениями независимо от того, сколько времени потребуется для выполнения кода, и вы избежите ошибок.</p>

<h3 id="Немедленные_таймауты">Немедленные таймауты</h3>

<p>Использование 0 в качестве значения для <code>setTimeout ()</code> позволяет планировать выполнение указанной функции обратного вызова как можно скорее, но только после того, как будет запущен основной поток кода.</p>

<p>Например, код приведенный ниже (<a href="https://mdn.github.io/learning-area/javascript/asynchronous/loops-and-intervals/zero-settimeout.html">рабочий код</a>) выводит alert содержащий <code>&quot;Hello&quot;</code>, затем alert содержащий <code>&quot;World&quot;</code> как только вы нажмете ОК в первом alert.</p>

<pre class="brush: js notranslate">setTimeout(function() {
  alert(&apos;World&apos;);
}, 0);

alert(&apos;Hello&apos;);</pre>

<p>Это может быть полезно в тех случаях, когда вы хотите установить блок кода для запуска, как только весь основной поток завершит работу - поместите его в цикл событий async, чтобы он запускался сразу после этого.</p>

<h3 id="Очистка_с_помощью_clearTimeout_или_clearInterval">Очистка с помощью <code>clearTimeout()</code> или <code>clearInterval()</code></h3>

<p>clearTimeout () и <code>clearInterval ()</code> используют один и тот же список записей для очистки. Интересно, что это означает, что вы можете использовать любой метод для очистки setTimeout () или setInterval ().</p>

<p>Для согласованности следует использовать <code>clearTimeout ()</code> для очистки записей <code>setTimeout ()</code> и <code>clearInterval ()</code> для очистки записей <code>setInterval ()</code>. Это поможет избежать путаницы.</p>

<h2 id="requestAnimationFrame">requestAnimationFrame()</h2>

<p><code><a href="/en-US/docs/Web/API/window/requestAnimationFrame">requestAnimationFrame()</a></code> это специализированная функция цикла, созданная для эффективного запуска анимации в браузере. По сути, это современная версия <code>setInterval ()</code> - она выполняет указанный блок кода до того, как браузер перерисовывает изображение, позволяя запускать анимацию с подходящей частотой кадров независимо от среды, в которой она выполняется.</p>

<p>Он был создан в ответ на проблемы с <code>setInterval ()</code>, который, например, не работает с частотой кадров, оптимизированной для устройства, иногда пропускает кадры, продолжает работать, даже если вкладка не является активной вкладкой или анимация прокручивается со страницы и т. д.(<a href="http://creativejs.com/resources/requestanimationframe/index.html">Читай об этом больше в CreativeJS</a>.)</p>

<div class="note notecard">
<p><strong>Note</strong>: Вы можете найти примеры использования <code>requestAnimationFrame()</code> в этом курсе — например в  <a href="/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Drawing_graphics">Рисование графики</a>, and <a href="/en-US/docs/Learn/JavaScript/Objects/Object_building_practice">Практика построения объектов</a>.</p>
</div>

<p>Метод принимает в качестве аргумента обратный вызов, который должен быть вызван перед перерисовкой. Это общий шаблон, в котором он используется:</p>

<pre class="brush: js notranslate">function draw() {
   // Drawing code goes here
   requestAnimationFrame(draw);
}

draw();</pre>

<p>Идея состоит в том, чтобы определить функцию, в которой ваша анимация обновляется (например, ваши спрайты перемещаются, счет обновляется, данные обновляются или что-то еще). Затем вы вызываете его, чтобы начать процесс. В конце функционального блока вы вызываете <code>requestAnimationFrame ()</code> со ссылкой на функцию, переданной в качестве параметра, и это дает браузеру указание вызвать функцию снова при следующей перерисовке дисплея. Затем он выполняется непрерывно, поскольку код рекурсивно вызывает <code>requestAnimationFrame ().</code></p>

<div class="note notecard">
<p><strong>Note</strong>: Если вы хотите выполнить простое постоянное анимирование DOM , <a href="/en-US/docs/Web/CSS/CSS_Animations">CSS Анимация</a> вероятно будет быстрее. Она высисляется непосредственно внутренним кодом браузера, а не JavaScript.</p>

<p>Однако, если вы делаете что-то более сложное, включающее объекты, которые не доступны напрямую в the DOM (такие как <a href="/en-US/docs/Web/API/Canvas_API">2D Canvas API</a> или <a href="/en-US/docs/Web/API/WebGL_API">WebGL</a> ), <code>requestAnimationFrame()</code> предпочтительный вариант в большинстве случаев.</p>
</div>

<h3 id="Как_быстро_работает_ваша_анимация">Как быстро работает ваша анимация?</h3>

<p>Плавность анимации напрямую зависит от частоты кадров анимации и измеряется в кадрах в секунду (fps). Чем выше это число, тем плавнее будет выглядеть ваша анимация до точки.</p>

<p>Поскольку большинство экранов имеют частоту обновления 60 Гц, максимальная частота кадров, к которой вы можете стремиться, составляет 60 кадров в секунду (FPS) при работе с веб-браузерами. Однако большее количество кадров означает больше обработки, которая часто может вызывать заикание и пропуски, также известные как пропадание кадров или заедание.</p>

<p>Если у вас есть монитор с частотой обновления 60 Гц и вы хотите достичь 60 кадров в секунду, у вас есть около 16,7 миллисекунд <code>(1000/60)</code> для выполнения кода анимации для рендеринга каждого кадра. Это напоминание о том, что вам нужно помнить об объеме кода, который вы пытаетесь запустить во время каждого прохождения цикла анимации.</p>

<p><code>requestAnimationFrame ()</code> всегда пытается приблизиться к этому волшебному значению 60 FPS, насколько это возможно. Иногда это невозможно - если у вас действительно сложная анимация и вы запускаете ее на медленном компьютере, частота кадров будет меньше. Во всех случаях<code> requestAnimationFrame ()</code> всегда будет делать все возможное с тем, что у него есть.</p>

<h3 id="Чем_отличается_requestAnimationFrame_от_setInterval_and_setTimeout">Чем отличается requestAnimationFrame() от setInterval() and setTimeout()?</h3>

<p>Давайте поговорим еще немного о том, чем метод <code>requestAnimationFrame ()</code> отличается от других методов, используемых ранее. Глядя на наш код сверху:</p>

<pre class="brush: js notranslate">function draw() {
   // Drawing code goes here
   requestAnimationFrame(draw);
}

draw();</pre>

<p>Такой же код с использованием <code>setInterval()</code>:</p>

<pre class="brush: js notranslate">function draw() {
   // Drawing code goes here
}

setInterval(draw, 17);</pre>

<p>Как мы уже говорили ранее, вы не указываете временной интервал для <code>requestAnimationFrame ()</code>. Просто он работает максимально быстро и плавно в текущих условиях. Браузер также не тратит время на запуск, если по какой-то причине анимация выходит за пределы экрана и т. д.</p>

<p><code>setInterval ()</code>, с другой стороны, требует указания интервала. Мы пришли к нашему окончательному значению 17 по формуле 1000 миллисекунд / 60 Гц, а затем округлили его в большую сторону. Округление - хорошая идея; если вы округлите в меньшую сторону, браузер может попытаться запустить анимацию со скоростью, превышающей 60 кадров в секунду, и в любом случае это не повлияет на плавность анимации. Как мы уже говорили, стандартная частота обновления - 60 Гц.</p>

<h3 id="В_том_числе_временная_метка">В том числе временная метка</h3>

<p>Фактическому обратному вызову, переданному в функцию <code>requestAnimationFrame ()</code>, также может быть задан параметр: значение отметки времени, которое представляет время с момента начала работы <code>requestAnimationFrame ().</code></p>

<p>Это полезно, поскольку позволяет запускать вещи в определенное время и в постоянном темпе, независимо от того, насколько быстрым или медленным может быть ваше устройство. Общий шаблон, который вы бы использовали, выглядит примерно так:</p>

<pre class="brush: js notranslate">let startTime = null;

function draw(timestamp) {
    if (!startTime) {
      startTime = timestamp;
    }

   currentTime = timestamp - startTime;

   // Do something based on current time

   requestAnimationFrame(draw);
}

draw();</pre>

<h3 id="Поддержка_браузерами">Поддержка браузерами</h3>

<p><code>requestAnimationFrame ()</code> поддерживается в более поздних версиях браузеров, чем s<code>etInterval ()</code> / <code>setTimeout ()</code>. Интересно, что он доступен в Internet Explorer 10 и выше.</p>

<p>Итак, если вам не тербуется поддержка старых версий IE, нет особых причин не использовать <code>requestAnimationFrame()</code>.</p>

<h3 id="Простой_пример">Простой пример</h3>

<p>Хватит теории! Давайте выполним упражнение с использованием <code>requestAnimationFrame()</code> . Создадим простую анимацию &quot;spinner animation&quot;—вы могли ее видеть в приложениях когда происходят задержки при ответе с сервера и т.п..</p>

<div class="note notecard">
<p><strong>Note</strong>: Для такой простой анимации, вам следовало бы использовать CSS . Однако такой вид анимации очень полезен для демонстрации <code>requestAnimationFrame()</code> , вы скорее всего будете использовать этот метод когда делаете что-то более сложное, например обновление отображения игры в каждом кадре.</p>
</div>

<ol>
 <li>
  <p>Возьмите базовый HTML шаблон (<a href="https://github.com/mdn/learning-area/blob/master/html/introduction-to-html/getting-started/index.html">такой как этот</a>).</p>
 </li>
 <li>
  <p>Поместите пустой  <a href="/ru/docs/Web/HTML/Element/div" title="Элемент разделения контента HTML (&lt;div&gt;) является универсальным контейнером для потокового контента. Он не влияет на контент или макет до тех пор, пока не будет стилизован с помощью CSS."><code>&lt;div&gt;</code></a> елемент внутри элемента <a href="/ru/docs/Web/HTML/Element/body" title="HTML-элемент &lt;body&gt; представляет собой контент (содержимое) документа HTML. В документе может быть только один элемент &lt;body&gt;."><code>&lt;body&gt;</code></a>, затем добавьте внутрь символ ↻ . Этот символ будет действовать как spinner в нашем примере.</p>
 </li>
 <li>
  <p>Применитеpply следующий CSS к HTML шаблону (любым предпочитаемым способом). Он установ красный фон на странице, высоту <code>&lt;body&gt;</code> равную <code>100%</code> высоты <a href="/ru/docs/Web/HTML/Element/html" title="HTML-элемент &lt;html&gt; представляет собой корень (элемент верхнего уровня) HTML-документа, поэтому его так же называют корневым элементом. Все другие элементы должны быть потомками этого элемента (должны находиться внутри него)."><code>&lt;html&gt;</code></a> , и центрирует <code>&lt;div&gt;</code> внутри <code>&lt;body&gt;</code>, по горизонтали и вертикали.</p>

  <pre class="brush: css notranslate">html {
  background-color: white;
  height: 100%;
}

body {
  height: inherit;
  background-color: red;
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
}

div {
  display: inline-block;
  font-size: 10rem;
}</pre>
 </li>
 <li>
  <p>Разместите  <a href="/ru/docs/Web/HTML/Element/script" title="HTML Элемент &lt;script&gt; "><code>&lt;script&gt;</code></a> элемент перед <code>&lt;/body&gt;</code> .</p>
 </li>
 <li>
  <p>Разместите следующий JavaScript код в  <code>&lt;script&gt;</code> . Здесь вы сохраняете ссылку на <code>&lt;div&gt;</code> внутри, устанавливаете дяпеременной <code>rotateCount</code> значение <code>0</code>, устанавливаете неинициализированную переменную, которая позже будет использоваться для хранения ссылки на вызов <code>requestAnimationFrame()</code>, и устанавливаете для переменной <code>startTime</code> значение <code>null</code>, которая будет позже использоваться для хранения времени начала <code>requestAnimationFrame()</code>.</p>

  <pre class="brush: js notranslate">const spinner = document.querySelector(&apos;div&apos;);
let rotateCount = 0;
let startTime = null;
let rAF;
</pre>
 </li>
 <li>
  <p>Под предыдущим кодом вставьте функцию <code>draw()</code> соторая будет использоваться для хранения нашешо кода анимации, который включает параметр <code>timestamp</code> :</p>

  <pre class="brush: js notranslate">function draw(timestamp) {

}</pre>
 </li>
 <li>
  <p>Внутри <code>draw ()</code> добавьте следующие строки. Они определят время начала, если оно еще не определено (это произойдет только на первой итерации цикла), и установят для параметра <code>rotateCount</code> значение для поворота счетчика (текущая временная метка, возьмите начальную временную метку, разделенную на три, чтобы замедлиться):</p>

  <pre class="brush: js notranslate">  if (!startTime) {
   startTime = timestamp;
  }

  rotateCount = (timestamp - startTime) / 3;
</pre>
 </li>
 <li>
  <p>Под предыдущей строкой внутри <code>draw ()</code> добавьте следующий блок - он проверяет, превышает ли значение <code>rotateCount 359</code> (например, <code>360</code>, полный круг). Если это так, он устанавливает значение по модулю <code>360</code> (то есть остаток, оставшийся после деления значения на <code>360</code>), поэтому круговая анимация может продолжаться непрерывно с разумным низким значением. Обратите внимание, что это не является строго необходимым, но легче работать со значениями от 0 до <code>359</code> градусов, чем со значениями типа «<code>128000</code> градусов».</p>

  <pre class="brush: js notranslate">if (rotateCount &gt; 359) {
  rotateCount %= 360;
}</pre>
 </li>
 <li>Затем, под предыдущим блоком, добавьте следующую строку, чтобы вращать spinner:
  <pre class="brush: js notranslate">spinner.style.transform = `rotate(${rotateCount}deg)`;</pre>
 </li>
 <li>
  <p>В самом низу внутри функции <em>draw ()</em> вставьте следующую строку. Это ключ ко всей операции - вы устанавливаете для переменной, определенной ранее, активный вызов<em> requestAnimation ()</em>, который принимает функцию <em>draw ()</em> в качестве своего параметра. Это запускает анимацию, постоянно выполняя функцию <em>draw ()</em> со скоростью, близкой к 60 FPS.</p>

  <pre class="brush: js notranslate">rAF = requestAnimationFrame(draw);</pre>
 </li>
 <li>
  <p>Ниже, вызовите функцию <code>draw()</code> для запуска анимации.</p>

  <pre class="brush: js notranslate">draw();</pre>
 </li>
</ol>

<div class="note notecard">
<p><strong>Note</strong>: Вы можете посмотреть <a href="https://mdn.github.io/learning-area/javascript/asynchronous/loops-and-intervals/simple-raf-spinner.html">рабочий образец на GitHub</a>. ( <a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/loops-and-intervals/simple-raf-spinner.html">исходный код</a>.)</p>
</div>

<h3 id="Очbстка_вызова_requestAnimationFrame">Очbстка вызова  requestAnimationFrame() </h3>

<p>Очистить вызов <code>requestAnimationFrame ()</code> можно, вызвав соответствующий метод <code>cancelAnimationFrame ()</code>. (Обратите внимание, что имя функции начинается с «cancel», а не «clear», как у методов «set ...».)</p>

<p>Просто передайте ему значение, возвращаемое вызовом requestAnimationFrame () для отмены, которое вы сохранили в переменной rAF:</p>

<pre class="brush: js notranslate">cancelAnimationFrame(rAF);</pre>

<h3 id="Активное_обучение_запуск_и_остановка_нашей_анимации">Активное обучение: запуск и остановка нашей анимации</h3>

<p>В этом упражнении мы хотели бы, чтобы вы протестировали метод <code>cancelAnimationFrame ()</code>, взяв наш предыдущий пример и обновив его, добавив прослушиватель событий для запуска и остановки счетчика при щелчке мышью в любом месте страницы.</p>

<p>Подсказки:</p>

<ul>
 <li>Обработчик события щелчка можно добавить к большинству элементов, включая документ <code>&lt;body&gt;</code>. Имеет смысл поместить его в элемент <code>&lt;body&gt;</code>, если вы хотите максимизировать интерактивную область - событие всплывает до его дочерних элементов.</li>
 <li>Вы захотите добавить переменную отслеживания, чтобы проверить, вращается ли счетчик или нет, очистив кадр анимации, если он есть, и снова вызвать его, если это не так.</li>
</ul>

<div class="note notecard">
<p><strong>Note</strong>: Для начала попробуйте сами; если вы действительно застряли, посмотрите наш <a href="https://mdn.github.io/learning-area/javascript/asynchronous/loops-and-intervals/start-and-stop-spinner.html">живой пример</a> и <a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/loops-and-intervals/start-and-stop-spinner.html">исходный код</a>.</p>
</div>

<h3 id="Регулировка_анимации_requestAnimationFrame">Регулировка анимации <code>requestAnimationFrame()</code> </h3>

<p>Одним из ограничений <code>requestAnimationFrame ()</code> является то, что вы не можете выбирать частоту кадров. В большинстве случаев это не проблема, так как обычно вы хотите, чтобы ваша анимация работала как можно плавнее. Но как насчет того, чтобы создать олдскульную 8-битную анимацию?</p>

<p>Это было проблемой, например в анимации ходьбы, вдохновленной островом обезьян, из статьи <a href="/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Drawing_graphics">Drawing Graphics</a>:</p>

<p><iframe class="live-sample-frame" frameborder="0" height="260" src="https://mdn.github.io/learning-area/javascript/apis/drawing-graphics/loops_animation/7_canvas_walking_animation.html" width="100%"></iframe></p>

<p>В этом примере вы должны анимировать как положение персонажа на экране, так и отображаемый спрайт. В анимации спрайта всего 6 кадров. Если бы вы показывали разные кадры спрайта для каждого кадра, отображаемого на экране, с помощью requestAnimationFrame (), Guybrush двигал бы конечностями слишком быстро, и анимация выглядела бы нелепо. Следовательно, в этом примере регулируется скорость, с которой спрайт циклически повторяет свои кадры, используя следующий код:</p>

<pre class="brush: js notranslate">if (posX % 13 === 0) {
  if (sprite === 5) {
    sprite = 0;
  } else {
    sprite++;
  }
}</pre>

<p>Таким образом, код циклически повторяет спрайт только один раз каждые 13 кадров анимации.</p>

<p>... Фактически, это примерно каждые 6,5 кадров, поскольку мы обновляем posX (положение персонажа на экране) на два кадра:</p>

<pre class="brush: js notranslate">if (posX &gt; width/2) {
  newStartPos = -( (width/2) + 102 );
  posX = Math.ceil(newStartPos / 13) * 13;
  console.log(posX);
} else {
  posX += 2;
}</pre>

<p>Это код, который вычисляет, как обновлять позицию в каждом кадре анимации.</p>

<p>Метод, который вы используете для регулирования анимации, будет зависеть от вашего конкретного кода. Например, в предыдущем примере счетчика вы могли заставить его двигаться медленнее, увеличивая rotateCount только на единицу в каждом кадре вместо двух.</p>

<h2 id="Активное_обучение_игра_на_реакцию">Активное обучение: игра на реакцию</h2>

<p>В последнем разделе этой статьи вы создадите игру на реакцию для двух игроков. В игре будет два игрока, один из которых управляет игрой с помощью клавиши <kbd>A</kbd>, а другой - с помощью клавиши<kbd> L</kbd>.</p>

<p>При нажатии кнопки «Start» счетчик, подобный тому, что мы видели ранее, отображается в течение случайного промежутка времени от 5 до 10 секунд. По истечении этого времени появится сообщение «PLAYERS GO !!» - как только это произойдет, первый игрок, который нажмет свою кнопку управления, выиграет игру.</p>

<p><iframe class="live-sample-frame" frameborder="0" height="500" src="https://mdn.github.io/learning-area/javascript/asynchronous/loops-and-intervals/reaction-game.html" width="100%"></iframe></p>

<p>Давайте поработаем над этим:</p>

<ol>
 <li>
  <p>Прежде всего, скачайте <a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/loops-and-intervals/reaction-game-starter.html">стартовый файл</a>. Он содержит законченную структуру HTML и стили CSS, что дает нам игровую доску, которая показывает информацию двух игроков (как показано выше), но с счетчиком и параграфом результатов, отображаемыми друг над другом. Вам нужно просто написать JavaScript код.</p>
 </li>
 <li>
  <p>Внутри пустого элемента <a href="/ru/docs/Web/HTML/Element/script" title="HTML Элемент &lt;script&gt; "><code>&lt;script&gt;</code></a> на вашей старнице, начните с добавления следующих строк кода, котороые определяют некотороые переменные и константы, которые вам понадобятся в дальнейшем:</p>

  <pre class="brush: js notranslate">const spinner = document.querySelector(&apos;.spinner p&apos;);
const spinnerContainer = document.querySelector(&apos;.spinner&apos;);
let rotateCount = 0;
let startTime = null;
let rAF;
const btn = document.querySelector(&apos;button&apos;);
const result = document.querySelector(&apos;.result&apos;);</pre>

  <p>В следующем порядке:</p>

  <ol>
   <li>Ссылка на спиннер, чтобы вы могли его анимировать.</li>
   <li>Ссылка на элемент <a href="/ru/docs/Web/HTML/Element/div" title="Элемент разделения контента HTML (&lt;div&gt;) является универсальным контейнером для потокового контента. Он не влияет на контент или макет до тех пор, пока не будет стилизован с помощью CSS."><code>&lt;div&gt;</code></a> содержащий спиннер, используемый для отображения и скрытия.</li>
   <li>Счетчик поворотов. Он определяет, на сколько вы хотите показывать вращение спиннера на каждом кадре анимации.</li>
   <li>Нулевое время начала. Это будет заполнено временем начала, когда счетчик начнет вращаться.</li>
   <li>Неинициализировання переменная для последующего хранения вызова <a href="/ru/docs/Web/API/Window/requestAnimationFrame"><code>requestAnimationFrame()</code></a> который анимирует спиннер.</li>
   <li>Ссылка на кнопку Start .</li>
   <li>Ссылка на параграф результатов.</li>
  </ol>
 </li>
 <li>
  <p>Ниже добавьте следующую функцию. Она просто берет два числа и возвращает случайное число между ними. Это понадобится вам позже, чтобы сгенерировать случайный интервал ожидания.</p>

  <pre class="brush: js notranslate">function random(min,max) {
  var num = Math.floor(Math.random()*(max-min)) + min;
  return num;
}</pre>
 </li>
 <li>
  <p>Затем добавьте функцию draw(), которая анимирует спиннер. Это очень похоже на версию из предыдущего примера простого счетчика:</p>

  <pre class="brush: js notranslate">function draw(timestamp) {
  if(!startTime) {
   startTime = timestamp;
  }

  rotateCount = (timestamp - startTime) / 3;

  if(rotateCount &gt; 359) {
    rotateCount %= 360;
  }

  spinner.style.transform = &apos;rotate(&apos; + rotateCount + &apos;deg)&apos;;
  rAF = requestAnimationFrame(draw);
}</pre>
 </li>
 <li>
  <p>Теперь пришло время настроить начальное состояние приложения при первой загрузке страницы. Добавьте следующие две строки, которые просто скрывают абзац результатов и контейнер счетчика с помощью <code>display: none</code> ;.</p>

  <pre class="brush: js notranslate">result.style.display = &apos;none&apos;;
spinnerContainer.style.display = &apos;none&apos;;</pre>
 </li>
 <li>
  <p>Затем определите функцию<code> reset ()</code>, которая возвращает приложение в исходное состояние, необходимое для повторного запуска игры после ее завершения. Добавьте в конец кода следующее:</p>

  <pre class="brush: js notranslate">function reset() {
  btn.style.display = &apos;block&apos;;
  result.textContent = &apos;&apos;;
  result.style.display = &apos;none&apos;;
}</pre>
 </li>
 <li>
  <p>Хорошо, хватит подготовки! Пришло время сделать игру доступной! Добавьте в свой код следующий блок. Функция <code>start ()</code> вызывает <code>draw ()</code>, чтобы запустить вращение спиннера и отобразить его в пользовательском интерфейсе, скрыть кнопку Start, чтобы вы не могли испортить игру, запустив ее несколько раз одновременно, и запускает вызов <code>setTimeout ()</code>, который выполняется функция <code>setEndgame ()</code> по прошествии случайного интервала от 5 до 10 секунд. Следующий блок также добавляет прослушиватель событий к вашей кнопке для запуска функции <code>start ()</code> при ее нажатии.</p>

  <pre class="brush: js notranslate">btn.addEventListener(&apos;click&apos;, start);

function start() {
  draw();
  spinnerContainer.style.display = &apos;block&apos;;
  btn.style.display = &apos;none&apos;;
  setTimeout(setEndgame, random(5000,10000));
}</pre>

  <div class="note notecard">
  <p><strong>Note</strong>: Вы увидете, что этот пример вызывает <code>setTimeout()</code> без сохранения возвращаемого значения. (не  <code>let myTimeout = setTimeout(functionName, interval)</code>.) </p>

  <p>Это прекрасно работает, если вам не нужно очищать интервал / тайм-аут в любой момент. Если вы это сделаете, вам нужно будет сохранить возвращенный идентификатор!</p>
  </div>

  <p>Конечным результатом предыдущего кода является то, что при нажатии кнопки «Start» отображается спиннер, и игроки вынуждены ждать произвольное количество времени, прежде чем их попросят нажать их кнопку. Эта последняя часть обрабатывается функцией <code>setEndgame ()</code>, которую вы определите позже.</p>
 </li>
 <li>
  <p>Добавьте в свой код следующую функцию:</p>

  <pre class="brush: js notranslate">function setEndgame() {
  cancelAnimationFrame(rAF);
  spinnerContainer.style.display = &apos;none&apos;;
  result.style.display = &apos;block&apos;;
  result.textContent = &apos;PLAYERS GO!!&apos;;

  document.addEventListener(&apos;keydown&apos;, keyHandler);

  function keyHandler(e) {
    let isOver = false;
    console.log(e.key);

    if (e.key === &quot;a&quot;) {
      result.textContent = &apos;Player 1 won!!&apos;;
      isOver = true;
    } else if (e.key === &quot;l&quot;) {
      result.textContent = &apos;Player 2 won!!&apos;;
      isOver = true;
    }

    if (isOver) {
      document.removeEventListener(&apos;keydown&apos;, keyHandler);
      setTimeout(reset, 5000);
    }
  };
}</pre>

  <p>Выполните следующие инструкции:</p>

  <ol>
   <li>Во-первых, отмените анимацию спиннера с помощью <a href="/ru/docs/Web/API/Window/cancelAnimationFrame"><code>cancelAnimationFrame()</code></a> (всегда полезно очистить ненужные процессы), и скройте контейнер счетчика.</li>
   <li>Затем, отобразите абзац с результатами и установите для его текстового содержимого значение &quot;PLAYERS GO!!&quot;  чтобы сообщить игрокам, что теперь они могут нажать свою кнопку, чтобы победить.</li>
   <li>Прикрепите к документу прослушиватель событий <code><a href="/en-US/docs/Web/API/Document/keydown_event">keydown</a></code> . При нажатии любой кнопки запускается функция <code>keyHandler()</code>.</li>
   <li>Внутри <code>keyHandler()</code>, код включает обьект события в качестве параметра (представленного <code>e</code>) — его свойство <a href="/ru/docs/Web/API/KeyboardEvent/key"><code>key</code></a> содержит только что нажатую клавишу, и вы можете использовать это для твета на определенные нажатия клавиш определенными действиями.</li>
   <li>Установите для переменной <code>isOver</code> значение false, чтобы мы могли отслеживать, были ли нажаты правильные клавиши, чтобы игрок 1 или 2 выиграл. Мы не хотим, чтобы игра заканчивалась при нажатии неправильной клваиши.</li>
   <li>Регистрация <code>e.key</code> в консоли, это полезный способ узнать значение различных клавиш, которые вы нажимаете.</li>
   <li>Когда <code>e.key</code> принимает значение &quot;a&quot;, отобразить сообщение о том, что Player 1 выиграл, а когда <code>e.key</code> это &quot;l&quot;, отобразить сообщение о том, что Player 2 выиграл. (<strong>Note:</strong> Это будет работать только со строчными буквами a и l — если переданы прописные A или L , это считается другими клавишами!) Если была нажата одна из этих клавиш, установите для <code>isOver</code> значение <code>true</code>.</li>
   <li>Только еслиf <code>isOver</code> равно <code>true</code>, удалите прослушиватель событий <code>keydown</code> с помощью <a href="/ru/docs/Web/API/EventTarget/removeEventListener"><code>removeEventListener()</code></a> чтобы после того, как произошло выигрышное нажатие, больше не было возможности ввода с клавиатуры, чтобы испортить финальный результат игры. Вы также используете <code>setTimeout()</code> для вызова <code>reset()</code> через 5 секунд — как обьяснялось ранее, эта функция сбрасывает игру обратно в исходное состояние, чтобы можно было начать новую игру.</li>
  </ol>
 </li>
</ol>

<p>Вот и все - вы справились!</p>

<div class="note notecard">
<p><strong>Note</strong>: Если вы где то застряли, взгляните на <a href="https://mdn.github.io/learning-area/javascript/asynchronous/loops-and-intervals/reaction-game.html">наша версия игры</a> (см. также <a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/loops-and-intervals/reaction-game.html">исходный код</a> ).</p>
</div>

<h2 id="Заключение">Заключение</h2>

<p>Вот и все — все основы асинхронных циклов и интервалов рассмотрены в статье. Вы найдете эти методы полезными во многих ситуациях, но постарайтесь не злоупотреблять ими! Поскольку они по-прежнему выполняются в основном потоке, тяжелые и интенсивные обратные вызовы (особенно те, которые управляют DOM) могут действительно замедлить страницу, если вы не будете осторожныl.</p>

<div class="prevnext">
  <a href="/ru/docs/Learn/JavaScript/Asynchronous/Introducing" class="button"><i class="icon-arrow-left"></i><span class="label"> Назад </span></a><a href="/ru/docs/Learn/JavaScript/Asynchronous" class="button"><i class="icon-arrow-up"></i> Обзор: Asynchronous</a><a href="/ru/docs/Learn/JavaScript/Asynchronous/Promises" class="button"><span class="label"> Далее  </span><i class="icon-arrow-right"></i></a>
</div>

<h2 id="В_этом_модуле">В этом модуле</h2>

<ul>
 <li><a href="/en-US/docs/Learn/JavaScript/Asynchronous/Concepts">Основные понятия асинхронного программирования</a></li>
 <li><a href="/en-US/docs/Learn/JavaScript/Asynchronous/Introducing">Введение в асинхронный JavaScript</a></li>
 <li><a href="/en-US/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals">Обьединенный асинхронный JavaScript: Таймауты и интервалы</a></li>
 <li><a href="/en-US/docs/Learn/JavaScript/Asynchronous/Promises">Graceful asynchronous programming with Promises</a></li>
 <li><a href="/en-US/docs/Learn/JavaScript/Asynchronous/Async_await">Сделайте асинхронное программирование легче с async и await</a></li>
 <li><a href="/en-US/docs/Learn/JavaScript/Asynchronous/Choosing_the_right_approach">Choosing the right approach</a></li>
</ul>

<div id="gtx-trans" style="position: absolute; left: 70px; top: 13746px;">
<div class="gtx-trans-icon"></div>
</div>
