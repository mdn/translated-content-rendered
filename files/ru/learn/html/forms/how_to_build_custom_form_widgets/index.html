---
title: Как создавать пользовательские виджеты форм
slug: Learn/HTML/Forms/How_to_build_custom_form_widgets
tags:
  - HTML
  - Web
  - Пример
  - Продвинутый
  - Руководство
  - Формы
translation_of: Learn/Forms/How_to_build_custom_form_controls
---
<div><section class="Quick_links" id="Quick_Links">

<ol>
  <li data-default-state="closed"><a href="/ru/docs/Learn/Getting_started_with_the_web"><strong>Новички начинают здесь!</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Начало работы с Вебом</summary>
          <ol>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web">Начало работы с Вебом</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/Installing_basic_software">Установка базового программного обеспечения</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/What_will_your_website_look_like">Каким должен быть ваш веб-сайт?</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/Dealing_with_files">Работа с файлами</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/HTML_basics">Основы HTML</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/CSS_basics">Основы CSS</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/JavaScript_basics">Основы JavaScript</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/Publishing_your_website">Публикация вашего веб-сайта</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/How_the_Web_works">Как работает Веб</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="open"><a href="/ru/docs/Learn/HTML"><strong>HTML — структура Веба</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Вступление в HTML</summary>
          <ol>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML">Вступление в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Getting_started">Начало работы с HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/The_head_metadata_in_HTML">Что в &quot;шапке&quot;? Метаданные в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/HTML_text_fundamentals">Тексты в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Creating_hyperlinks">Создание гиперссылок</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Advanced_text_formatting">Продвинутое форматирование текста</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Document_and_website_structure">Структура документа и веб-сайта</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Debugging_HTML">Отладка HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Marking_up_a_letter">Задание: Выделение символа</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Structuring_a_page_of_content">Задание: Структура страницы</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Мультимедиа и встраивание</summary>
          <ol>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding">Мультимедиа и встраивание</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Images_in_HTML">Изображения в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Video_and_audio_content">Видео и аудио контент</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Other_embedding_technologies">От object до iframe — другие технологии встраивания</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Adding_vector_graphics_to_the_Web">Добавление векторный графики в Веб</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images">Отзывчивые изображения</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Mozilla_splash_page">Задание: Страница о Mozilla</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>HTML tables</summary>
          <ol>
            <li><a href="/ru/docs/Learn/HTML/Tables">HTML tables overview</a></li>
            <li><a href="/ru/docs/Learn/HTML/Tables/Basics">HTML table basics</a></li>
            <li><a href="/ru/docs/Learn/HTML/Tables/Advanced">HTML Table advanced features and accessibility</a></li>
            <li><a href="/ru/docs/Learn/HTML/Tables/Structuring_planet_data">Assessment: Structuring planet data</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="closed"><a href="/ru/docs/Learn/CSS"><strong>CSS — стилизирование Веба</strong></a></li>
  <li class="toggle">
      <details>
          <summary>CSS first steps</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/First_steps">CSS first steps overview</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/What_is_CSS">What is CSS?</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/Getting_started">Getting started with CSS</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/How_CSS_is_structured">How CSS is structured</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/How_CSS_works">How CSS works</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/Using_your_new_knowledge">Using your new knowledge</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>CSS building blocks</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks">CSS building blocks overview</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Cascade_and_inheritance">Cascade and inheritance</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Selectors">CSS selectors</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/The_box_model">The box model</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Backgrounds_and_borders">Backgrounds and borders</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Handling_different_text_directions">Handling different text directions</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Overflowing_content">Overflowing content</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Values_and_units">Values and units</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Sizing_items_in_CSS">Sizing items in CSS</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Images_media_form_elements">Images, media, and form elements</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Styling_tables">Styling tables</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Debugging_CSS">Debugging CSS</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Organizing">Organizing your CSS</a></li>
      </ol></details>
  </li>
  <li class="toggle">
      <details>
          <summary>Стилизирование текста</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/Styling_text">Стилизирование текста</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Fundamentals">Основы стилизирования текста и шрифта</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Styling_lists">Стилизирование списков</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Styling_links">Стилизирование ссылок</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Web_fonts">Веб-шрифты</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Typesetting_a_homepage">Задание: Стилизирование школьного сайта</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>CSS макет</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout">CSS макет</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Introduction">Вступление</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Normal_Flow">Normal Flow</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Flexbox">Flexbox</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Grids">Сетки</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Floats">Float</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Positioning">Позиционирование</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Multiple-column_Layout">Multiple-column Layout</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Responsive_Design">Responsive design</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Media_queries">Beginner&apos;s guide to media queries</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Legacy_Layout_Methods">Legacy Layout Methods</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Supporting_Older_Browsers">Supporting Older Browsers</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Fundamental_Layout_Comprehension">Fundamental Layout Comprehension</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="closed"><a href="/ru/docs/Learn/JavaScript"><strong>JavaScript — динамический клиентский скриптинг</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Первые шаги в JavaScript</summary>
          <ol>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps">Первые шаги в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/What_is_JavaScript">Что такое JavaScript?</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/A_first_splash">Первое погружение в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/What_went_wrong">Что-то пошло не так? Устранение ошибок JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Variables">Хранение нужной информации — Переменные</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Math">Основы JavaScript — Числа и операторы</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Strings">Работа с текстом — Строки в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Useful_string_methods">Полезные методы для строк</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Arrays">Массивы</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Silly_story_generator">Задание: Генератор глупых историй</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Блоки в JavaScript</summary>
          <ol>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks">Блоки в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/conditionals">Делаем решения в вашем годе — Условия</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Looping_code">Повторение кода</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Functions">Функции — Переиспользуемые блоки кода</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Build_your_own_function">Создаём свою функцию</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Return_values">Возвращаемые значения функций</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Events">Введение в события</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Image_gallery">Задание: Галерея изображений</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Введение в объекты JavaScript</summary>
          <ol>
            <li><a href="/ru/docs/Learn/JavaScript/Objects">Введение в объекты JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Basics">Основы объектов</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Object-oriented_JS">Объектно-ориентированный JavaScript для новичков</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Object_prototypes">Прототипы объектов</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Inheritance">Наследование в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/JSON">Работа с JSON данными</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Object_building_practice">Практика по созданию объектов</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Adding_bouncing_balls_features">Задание: Добавление возможностей в пример с прыгающими шарами</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Asynchronous JavaScript</summary>
        <ol>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous">Asynchronous JavaScript overview</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Concepts">General asynchronous programming concepts</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Introducing">Introducing asynchronous JavaScript</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals">Cooperative asynchronous Java​Script: Timeouts and intervals</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Promises">Graceful asynchronous programming with Promises</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Async_await">Making asynchronous programming easier with async and await</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Choosing_the_right_approach">Choosing the right approach</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Client-side web APIs</summary>
        <ol>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs">Client-side web APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Introduction">Introduction to web APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents">Manipulating documents</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data">Fetching data from the server</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Third_party_APIs">Third party APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Drawing_graphics">Drawing graphics</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Video_and_audio_APIs">Video and audio APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Client-side_storage">Client-side storage</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/ru/docs/Learn/Forms"><strong>Web forms — Working with user data</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Core forms learning pathway</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Forms">Web forms overview</a></li>
          <li><a href="/ru/docs/Learn/Forms/Your_first_form">Your first form</a></li>
          <li><a href="/ru/docs/Learn/Forms/How_to_structure_a_web_form">How to structure a web form</a></li>
          <li><a href="/ru/docs/Learn/Forms/Basic_native_form_controls">Basic native form controls</a></li>
          <li><a href="/ru/docs/Learn/Forms/HTML5_input_types">The HTML5 input types</a></li>
          <li><a href="/ru/docs/Learn/Forms/Other_form_controls">Other form controls</a></li>
          <li><a href="/ru/docs/Learn/Forms/Styling_web_forms">Styling web forms</a></li>
          <li><a href="/ru/docs/Learn/Forms/Advanced_form_styling">Advanced form styling</a></li>
          <li><a href="/ru/docs/Learn/Forms/UI_pseudo-classes">UI pseudo-classes</a></li>
          <li><a href="/ru/docs/Learn/Forms/Form_validation">Client-side form validation</a></li>
          <li><a href="/ru/docs/Learn/Forms/Sending_and_retrieving_form_data">Sending form data</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Advanced forms articles</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Forms/How_to_build_custom_form_controls">How to build custom form controls</a></li>
          <li><a href="/ru/docs/Learn/Forms/Sending_forms_through_JavaScript">Sending forms through JavaScript</a></li>
          <li><a href="/ru/docs/Learn/Forms/Property_compatibility_table_for_form_controls">CSS property compatibility table for form controls</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/ru/docs/Learn/Accessibility"><strong>Accessibility — Make the web usable by everyone</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Accessibility guides</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Accessibility">Accessibility overview</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/What_is_accessibility">What is accessibility?</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/HTML">HTML: A good basis for accessibility</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/CSS_and_JavaScript">CSS and JavaScript accessibility best practices</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/WAI-ARIA_basics">WAI-ARIA basics</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/Multimedia">Accessible multimedia</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/Mobile">Mobile accessibility</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Accessibility assessment</summary>
        <ol>
            <li><a href="/ru/docs/Learn/Accessibility/Accessibility_troubleshooting">Assessment: Accessibility troubleshooting</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/ru/docs/Learn/Tools_and_testing"><strong>Инструменты и тестирование</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Client-side web development tools</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools">Client-side web development tools index</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Overview">Client-side tooling overview</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Command_line">Command line crash course</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Package_management">Package management basics</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Introducing_complete_toolchain">Introducing a complete toolchain</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Deployment">Deploying our app</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Introduction to client-side frameworks</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Introduction">Client-side frameworks overview</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Main_features">Framework main features</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>React</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started">Getting started with React</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_todo_list_beginning">Beginning our React todo list</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_components">Componentizing our React app</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state">React interactivity: Events and state</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_filtering_conditional_rendering">React interactivity: Editing, filtering, conditional rendering</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_accessibility">Accessibility in React</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_resources">React resources</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Ember</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_getting_started">Getting started with Ember</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_structure_componentization">Ember app structure and componentization</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_interactivity_events_state">Ember interactivity: Events, classes and state</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_conditional_footer">Ember Interactivity: Footer functionality, conditional rendering</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_routing">Routing in Ember</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_resources">Ember resources and troubleshooting</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Vue</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_getting_started">Getting started with Vue</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_first_component">Creating our first Vue component</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_rendering_lists">Rendering a list of Vue components</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_methods_events_models">Adding a new todo form: Vue events, methods, and models</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_styling">Styling Vue components with CSS</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_computed_properties">Using Vue computed properties</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_conditional_rendering  ">Vue conditional rendering: editing existing todos</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_refs_focus_management">Focus management with Vue refs</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_resources">Vue resources</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Git and GitHub</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/GitHub">Git and GitHub overview</a></li>
          <li><a href="https://guides.github.com/activities/hello-world/">Hello World</a></li>
          <li><a href="https://guides.github.com/introduction/git-handbook/">Git Handbook</a></li>
          <li><a href="https://guides.github.com/activities/forking/">Forking Projects</a></li>
          <li><a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests">About pull requests</a></li>
          <li><a href="https://guides.github.com/features/issues/">Mastering Issues</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Кроссбраузерное тестирование</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing">Кроссбраузерное тестирование</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Introduction">Вступление в кроссбраузерное тестирование</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Testing_strategies">Стратегии выполнения тестирования</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/HTML_and_CSS">Решение частых проблем с HTML и CSS</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/JavaScript">Решение частых проблем с JavaScript</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Accessibility">Решение частых проблем доступности</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Feature_detection">Проверка поддержки возможностей</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Automated_testing">Вступление в автоматическое тестирование</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment">Установка вашей автоматической среды тестирования</a></li>
        </ol>
    </details>
  </li>
  <li data-default-state="closed"><a href="/ru/docs/Learn/Server-side"><strong>Программирование серверной части сайта</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Первые шаги</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Server-side/First_steps">Первые шаги</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Introduction">Вступление в серверное программирование</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Client-Server_overview">Клиент-сервер</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Web_frameworks">Веб-фреймворки для серверной части</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Website_security">Защищённость веб-сайтов</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Веб-фреймворк Django (Python)</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Server-side/Django">Веб-фреймворк Django (Python)</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Introduction">Вступление</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/development_environment">Установка среды разработки</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Tutorial_local_library_website">Руководство: Сайт местной библиотеки</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/skeleton_website">Руководство часть 2: Создаём набросок сайта</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Models">Руководство часть 3: Использование моделей</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Admin_site">Руководство часть 4: Django панель администратора</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Home_page">Руководство часть 5: Создание нашей домашней страницы</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Generic_views">Руководство часть 6: Списки и представления</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Sessions">Руководство часть 7: Сессии</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Authentication">Руководство часть 8: Аутенфикация и разрешения пользователей</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Forms">Руководство часть 9: Работа с формами</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Testing">Руководство часть 10: Тестирование веб-приложения на Django</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Deployment">Руководство часть 11: Разворачивание Django на продакшн сервере</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/web_application_security">Защищённость веб-приложения</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/django_assessment_blog">Задание: создание мини блога</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Express Web Framework (node.js/JavaScript)</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs">Express Web Framework (Node.js/JavaScript) overview</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/Introduction">Express/Node introduction</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/development_environment">Setting up a Node (Express) development environment</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/Tutorial_local_library_website">Express tutorial: The Local Library website</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/skeleton_website">Express Tutorial Part 2: Creating a skeleton website</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/mongoose">Express Tutorial Part 3: Using a database (with Mongoose)</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/routes">Express Tutorial Part 4: Routes and controllers</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/Displaying_data">Express Tutorial Part 5: Displaying library data</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/forms">Express Tutorial Part 6: Working with forms</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/deployment">Express Tutorial Part 7: Deploying to production</a></li>
        </ol>
    </details>
  </li>
  <li><a href="#"><strong>Дальнейшее чтение</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Общие вопросы</summary>
        <ol>
          <li><a href="/ru/docs/Learn/HTML/Howto">Вопросы по HTML</a></li>
          <li><a href="/ru/docs/Learn/CSS/Howto">Вопросы по CSS</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Howto">JavaScript questions</a></li>
          <li><a href="/ru/docs/Learn/Common_questions#How_the_Web_works">Как работает Веб</a></li>
          <li><a href="/ru/docs/Learn/Common_questions#Tools_and_setup">Инструменты и установка</a></li>
          <li><a href="/ru/docs/Learn/Common_questions#Design_and_accessibility">Дизайн и доступность</a></li>
        </ol>
    </details>
  </li>
  <li data-default-state="closed"><a href="/ru/docs/Learn/How_to_contribute">Как помочь?</a></li>
</ol>

</section><div class="prevnext">
  <a href="/ru/docs/Learn/HTML/Forms/Form_validation" class="button"><i class="icon-arrow-left"></i><span class="label"> Назад </span></a><a href="/ru/docs/Learn/HTML/Forms" class="button"><i class="icon-arrow-up"></i> Обзор: Forms</a><a href="/ru/docs/Learn/HTML/Forms/Sending_forms_through_JavaScript" class="button"><span class="label"> Далее  </span><i class="icon-arrow-right"></i></a>
</div></div>

<p class="summary">Существует много случаев, когда возможностей <a href="/ru/docs/Learn/HTML/Forms/%D0%A1%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%B5_%D0%B2%D0%B8%D0%B4%D0%B6%D0%B5%D1%82%D1%8B_%D1%84%D0%BE%D1%80%D0%BC">стандартных виджетов HTML форм</a> недостаточно. Если вы хотите <a href="/en-US/docs/Advanced_styling_for_HTML_forms">придать лучший вид</a> каким-либо виджетам как, например, <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a>, или вы хотите создать особое поведение виджета, то у вас нет другого выбора, кроме как создать собственные виджеты.</p>

<p>В этой статье мы рассмотрим как создать такой виджет. Для этого мы возьмем пример: переделка элемента <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a> .</p>

<div class="note notecard">
<p><strong>Замечание:</strong> Мы сфокусируемся на создании виджетов, а не на том чтобы сделать код  универсальным и многоразовым; поэтому будут использоваться некоторый нетривиальный JavaScript код и манипуляции DOM в неизвестном контексте, что выходит за рамки этой статьи.</p>
</div>

<h2 id="Дизайн_структура_и_семантика">Дизайн, структура и семантика</h2>

<p>В начале создания пользовательского виджета необходимо обрисовать что именно вы хотите. Это сэкономит драгоценное время. Особенно важно четко определить все состояния вашего виджета. Чтобы это сделать, лучше начать с существущего виджета, состояния и реакции которго хорошо известны, так что вы сможете просто подражать им насколько это возможно.</p>

<p>В нашем примере мы будем переделывать элемент <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a>. Вот такой результат мы хотим достичь:</p>

<p><img alt="The three states of a select box" src="/files/4481/custom-select.png" style="height: 135px; width: 366px;"></p>

<p>Этот скриншот показывает три основных состояния нашего виджета: нормальное состояние (слева); активное состояние (посередине) и развернутое состояние (справа).</p>

<p>С точки зрения реакций нужно чтобы наш виджет взаимодействовал как с мышью, так и с клавиатурой, так же как и стандартный виджет. Давайте сначала определим, как виджет приходит в каждое состояние:</p>

<dl>
 <dt>Виджет в нормальном состоянии когда:</dt>
 <dd>
 <ul>
  <li>страница загружается</li>
  <li>виджет был активным и пользователь кликает где-то вне виджета</li>
  <li>виджет был активным и пользователь перемещает фокус на другой виджет при помощи клавиатуры</li>
 </ul>

 <div class="note notecard">
 <p><strong>Замечание:</strong> Перемещение фокуса по странице обычно осуществялется клавишей &quot;tab&quot;, но не везде. Например в Safari циклический переход между ссылками на странице осуществляется по усмолчанию <a href="http://www.456bereastreet.com/archive/200906/enabling_keyboard_navigation_in_mac_os_x_web_browsers/">комбинацией Option+Tab</a>.</p>
 </div>
 </dd>
 <dt>Виджет в активном состоянии когда:</dt>
 <dd>
 <ul>
  <li>пользователь кликает на него</li>
  <li>пользователь нажимает клавишу Tab, и он получает фокус</li>
  <li>виджет был в развернутом состоянии и позователь кликает на виджет.</li>
 </ul>
 </dd>
 <dt>Виджет в развернутом состоянии:</dt>
 <dd>
 <ul>
  <li>виджет в любом другом состоянии и пользователь кликает на него</li>
 </ul>
 </dd>
</dl>

<p>Теперь, когда мы знаем, как изменяются состояния, важно определить, как изменить значение виджета:</p>

<dl>
 <dt>Значение изменяется когда:</dt>
 <dd>
 <ul>
  <li>пользователь кликает на один-из-вариантов когда виджет в развернутом состоянии</li>
  <li>пользователь нажимает клавиши стрелка вверх или вниз когда виджет в активном состоянии</li>
 </ul>
 </dd>
</dl>

<p>Наконец, давайте определим, как будут вести себя варианты виджета:</p>

<ul>
 <li>когда виджет развернут, выбранный вариант подсвечен</li>
 <li>когда курсор мыши находится над вариантом, он подсвечен и ранее подсвеченный вариант возвращается в его обычное состояние</li>
</ul>

<p>Для нашего примера остановимся на этом; но, если вы внимательный читатель, вы заметите, что некоторые реакции отсутствуют. Например, как вы думаете, что произойдет если пользователь нажмет клавишу &quot;tab&quot; когда виджет в развернутом состоянии? Ответом будет... ничего. OK, правильная реакция кажется очевидной, но поскольку она не определена в наших спецификациях, то очень легко пропустить реализацию этой реакции. Это особенно верно для командной работы, когда те, кто опеределяет какими должны быть реакции виджета сами не реализуют их.</p>

<p>Другой забавный пример: что произойдет, если пользователь нажмет клавишу вверх или вниз когда виджет находитися в развернутом состоянии? Это немного сложнее. Если вы предположите, что активное и развернутое состояние полностью различны, то ответом снова будет &quot;ничего не произойдет&quot; , потому что мы не определили никаких взаимодействий с клавиатурой в открытом состоянии. С другой стороны, если вы предположите, что активное и развернутое состояние немного похожи, значение может изменится, но выбранный вариант точно не будет соответственно подсвечен, опять же потому, что мы не определили никаких действий с клавиатуры над вариантами когда виджет находится в развернутом состоянии (мы определили только то, что произойдет, когда виджет развернется, но ничего более).</p>

<p>В нашем примере пропущенные спецификации очевидны, так что мы с ними справимся, но это может стать реальной проблемой для новых экзотических виджетов, когда никто не имеет ни малейшего представления о том как они должны реагировать. Всегда лучше потратить время на этом этапе дизайна, потому что если вы плохо определите, или забудете определить реакцию виджета, то будет очень сложно изменять ее, когда пользователи уже привыкнут. Если у вас есть сомнения - спросите мнения у окружающих, и, если позволяет бюджет,  не стесняйтесь <a href="https://ru.wikipedia.org/wiki/%D0%AE%D0%B7%D0%B0%D0%B1%D0%B8%D0%BB%D0%B8%D1%82%D0%B8-%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">выполнять пользовательские тесты</a>. Этот процесс называется UX Design (<a href="https://ru.wikipedia.org/wiki/%D0%94%D0%B8%D0%B7%D0%B0%D0%B9%D0%BD_%D0%B2%D0%B7%D0%B0%D0%B8%D0%BC%D0%BE%D0%B4%D0%B5%D0%B9%D1%81%D1%82%D0%B2%D0%B8%D1%8F_%D1%81_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%BC">Дизайн взаимодействия с пользователем</a>). Если вы хотите узнать больше об этой теме, вам следует посетить следующие полезные ресурсы:</p>

<ul>
 <li><a href="http://www.uxmatters.com/" rel="external">UXMatters.com</a></li>
 <li><a href="http://uxdesign.com/" rel="external">UXDesign.com</a></li>
 <li><a href="http://uxdesign.smashingmagazine.com/" rel="external">The UX Design section of SmashingMagazine</a></li>
</ul>

<div class="note notecard">
<p><strong>Замечание:  </strong>Также, в большинстве систем, есть способ развернуть элемент <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a> чтобы посмотреть все доступные варианты (это то-же что кликнуть мышью элемент <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a> ).  Это возможно комбинацией Alt+Стрелка вниз для Windows и не реализовано в нашем примере —но это будет просто сделать, так как механизм уже реализован дл события <code>click</code>.</p>
</div>

<h3 id="Определение_структуры_и_семантики_HTML">Определение структуры и семантики HTML</h3>

<p>Теперь, когда основной функционал виджета определен, пора начать создание виджета. Первым делом определим его HTML структуру и придадим основную семантику. Вот все что нам нужно чтобы переделать элемент <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a>:</p>

<pre class="brush: html notranslate">&lt;!-- Это основной контейнер для нашего виджета.
     Аттрибут tabindex позволяет пользователю переместить фокус на виджет.
     Позже мы увидим, что лучше его установить через JavaScript. --&gt;
&lt;div class=&quot;select&quot; tabindex=&quot;0&quot;&gt;

  &lt;!-- Этот контейнер послужит для отображения текущего значения виджета --&gt;
  &lt;span class=&quot;value&quot;&gt;Cherry&lt;/span&gt;

  &lt;!-- Этот контейнер содержит все варинты. доступные для нашего виджета.
       Так как это список, то есть смысл использовать элемент ul. --&gt;
  &lt;ul class=&quot;optList&quot;&gt;
    &lt;!-- Каждый вариант содержит то значение, которое будет отображено, позже мы увидим
         как получить то значение, которое будет отппралено вместе с данными формы --&gt;
    &lt;li class=&quot;option&quot;&gt;Cherry&lt;/li&gt;
    &lt;li class=&quot;option&quot;&gt;Lemon&lt;/li&gt;
    &lt;li class=&quot;option&quot;&gt;Banana&lt;/li&gt;
    &lt;li class=&quot;option&quot;&gt;Strawberry&lt;/li&gt;
    &lt;li class=&quot;option&quot;&gt;Apple&lt;/li&gt;
  &lt;/ul&gt;

&lt;/div&gt;</pre>

<p>Обратите внимание на использование имен классов: они описывают каждый соответствующий элемет независимо от фактически используемых базовых элементов HTML. Важно быть уверенными что нам не придется жестко привязывать наши CSS и JavaScript к HTML структуре,тогда мы сможем позже вносить изменения не нарушая код виджета. Например, если вы захотите создать эквивалент элемента <a href="/ru/docs/Web/HTML/Element/optgroup" title="HTML-элемент &lt;optgroup&gt; позволяет группировать опции, находящиеся внутри элемента &lt;select&gt;."><code>&lt;optgroup&gt;</code></a>.</p>

<h3 id="Создание_внешнего_вида_с_помощью_CSS">Создание внешнего вида с помощью CSS</h3>

<p>Теперь у нас есть структура и мы можем заняться дизайном нашего виджета. Весь смысл создания нашего собственного виджета в том, чтобы мы могли придать ему такой внешний вид, как мы захотим. Поэтому мы разделим нашу работу с CSS на две части: в первой части будут правила CSS абсолютно необходимые чтобы реакции нашего виджета были как у элемента <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a> , а вторая чать будет состоять из красивеньких рюшечек, чтобы виджет выглядел так, как нам нравится.</p>

<h4 id="Обязательные_стили">Обязательные стили</h4>

<p>Обязательные стили - это те, которые необходимы для обработки трех состояний нашего виджета..</p>

<pre class="brush: css notranslate">.select {
  /* Это создаст контекст позиционирования для списка вариантов */
  position: relative;

  /* Это сделает наш виджет частью текстового потока и одновременно сделает его
     изменяемого размера */
  display : inline-block;
}</pre>

<p>Еще нам нужен дополнительный класс <code>active,</code> чтобы определить, как будет выглядеть наш виджет в активном состоянии. Так как наш виджет может находится в фокусе, то мы укажем этот стиль еще и для псевдокласса <a href="/ru/docs/Web/CSS/:focus" title="CSS псевдо-класс :focus применяется, когда элемент (такой как input формы) получает фокус. Обычно он активируется при клике мышью пользователем или при выборе элемента с использованием клавиши &quot;tab&quot; на клавиатуре."><code>:focus</code></a> чтобы быть уверенными, что виджет будет вести себя одинаково.</p>

<pre class="brush: css notranslate">.select .active,
.select:focus {
  outline: none;

  /* Это свойство - box-shadow - необязательно, однако нам важно видеть активное состояние
    т.к. мы используем его по умолчанию. Можете спокойно его переопределить. */
  box-shadow: 0 0 3px 1px #227755;
}</pre>

<p>Теперь давайте стилизуем список опций:</p>

<pre class="brush: css notranslate">/* Селектор .select здесь применен для удобства (<a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D0%BD%D1%82%D0%B0%D0%BA%D1%81%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D1%81%D0%B0%D1%85%D0%B0%D1%80">синтаксический сахар</a>), чтобы быть уверенными,
   что определяемые классы находятся в нашем виджете. */
.select .optList {
/* Это позволит нам быть уверенными, что список вариантов будет показан ниже значения
   и вне HTML потока */
  position : absolute;
  top      : 100%;
  left     : 0;
}</pre>

<p>Еще нам нужен дополнительный класс, для обращения к списку вариантов, когда он скрыт. Это необходимо чтобы справиться с различиями активного и развернутого состояния, т.к. они не совсем совпадают.</p>

<pre class="brush: css notranslate">.select .optList.hidden {
  /* Это самый простой из доступных способов путь скрыть список,
     а о доступности мы еще поговрим в конце */
  max-height: 0;
  visibility: hidden;
}</pre>

<h4 id="Украшательства">Украшательства</h4>

<p>Теперь, когда основная функциональность на месте, можем начинать развлекаться. То, что мы сделаем дальше, является всего лишь примером того, что возможно, и будет соответствовать скриншоту в начале этой статьи. Но вы можете свободно эксперементировать и посмотреть на что вы способны.</p>

<pre class="brush: css notranslate">.select {
  /* Все размеры будут выражены в em по соображениям удобства
     (чтобы быть уверенными, что виджет будет изменять размер если пользователь будет
     использовать увеличение в текстовом режиме браузера). Вычисления сделаны из расчета что
     1em == 16px что является умолчанием для большинства браузеров.
     Если вы затрудняетесь с преобразованием px в em, попробуйте http://riddle.pl/emcalc/ */
  font-size   : 0.625em; /* это (10px) новый размер шрифта для нашего контекста для значения
                            em в исходном контексте */
  font-family : Verdana, Arial, sans-serif;

  -moz-box-sizing : border-box;
  box-sizing : border-box;

  /* Нам нужно добавить дополнительное пространство для стрелки вниз */
  padding : .1em 2.5em .2em .5em; /* 1px 25px 2px 5px */
  width   : 10em; /* 100px */

  border        : .2em solid #000; /* 2px */
  border-radius : .4em; /* 4px */
  box-shadow    : 0 .1em .2em rgba(0,0,0,.45); /* 0 1px 2px */

  /* Первое объявление - для бразуеров не поддерживающих линейный градиент.
     Второе объявление - потому что основанные на WebKit браузеры еще не избавились от префикса в нем.
     Если вам нужна поддержка устаревших браузеров, попробуйте http://www.colorzilla.com/gradient-editor/ */
  background : #F0F0F0;
  background : -webkit-linear-gradient(90deg, #E3E3E3, #fcfcfc 50%, #f0f0f0);
  background : linear-gradient(0deg, #E3E3E3, #fcfcfc 50%, #f0f0f0);
}

.select .value {
  /* Так как значение может быть шире, чем наш виджет, нужно быть уверенными, что оно не изменит
     ширину виджета */
  display  : inline-block;
  width    : 100%;
  overflow : hidden;

  vertical-align: top;

  /* И, если содержимое слишком длинное, лучше иметь красивенькие точечки. */
  white-space  : nowrap;
  text-overflow: ellipsis;
}</pre>

<p>Нам не нужен дополнительный элемент, чтобы создать стрелку вниз; вместо этого мы используем псевдоэлемент <a href="/ru/docs/Web/CSS/:after" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>:after</code></a>. Также её можно создать при помощи простого фонового изображения в классе <code>select</code>.</p>

<pre class="brush: css notranslate">.select:after {
  content : &quot;▼&quot;; /* Мы используем Unicode символ U+25BC; смотрите http://www.utf8-chartable.de */
  position: absolute;
  z-index : 1; /* Важно чтобы стрелка не перекрывала элементы списка */
  top     : 0;
  right   : 0;

  -moz-box-sizing : border-box;
  box-sizing : border-box;

  height  : 100%;
  width   : 2em;  /* 20px */
  padding-top : .1em; /* 1px */

  border-left  : .2em solid #000; /* 2px */
  border-radius: 0 .1em .1em 0;  /* 0 1px 1px 0 */

  background-color : #000;
  color : #FFF;
  text-align : center;
}</pre>

<p>Далее стилизуем список вариантов:</p>

<pre class="brush: css notranslate">.select .optList {
  z-index : 2; /* Мы явно сказали, что список вариантов всегда будет перекрывать стрелку вниз */

  /* это сбросит значения стиля по умолчанию для элемента ul */
  list-style: none;
  margin : 0;
  padding: 0;

  -moz-box-sizing : border-box;
  box-sizing : border-box;

  /* Это для того, чтобы убедиться что если значения будут короче виджета
     то список вариантов останется таким же по размеру как и сам виджет */
  min-width : 100%;

  /* В случае, если список слишком длинный, его содержимое не будет помещаться по вертикали
     (что автоматически добавит полосу прокрутки), но этого никогда не произойдет по горизонтали
     (потому что мы не установили ширину и содержимое списка будет регулировать ее
     автоматически. Если это будет невозможно - содержимое будет обрезано.) */
  max-height: 10em; /* 100px */
  overflow-y: auto;
  overflow-x: hidden;

  border: .2em solid #000; /* 2px */
  border-top-width : .1em; /* 1px */
  border-radius: 0 0 .4em .4em; /* 0 0 4px 4px */

  box-shadow: 0 .2em .4em rgba(0,0,0,.4); /* 0 2px 4px */
  background: #f0f0f0;
}</pre>

<p>Для вариантов нам нужно добавить класс <code>highlight</code> чтобы сделать возможным индентифицировать значение которе пользователь выберет (или выбрал).</p>

<pre class="brush: css notranslate">.select .option {
  padding: .2em .3em; /* 2px 3px */
}

.select .highlight {
  background: #000;
  color: #FFFFFF;
}</pre>

<p>Итак, вот результат с нашими тремя состояниями:</p>

<table>
 <thead>
  <tr>
   <th scope="col" style="text-align: center;">Основное состояние</th>
   <th scope="col" style="text-align: center;">Активное состояние</th>
   <th scope="col" style="text-align: center;">Развернутое состояние</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><iframe class="live-sample-frame sample-code-frame" frameborder="0" height="130" id="frame_Basic_state" src="https://mdn.mozillademos.org/ru/docs/HTML/Forms/How_to_build_custom_form_widgets/Example_1$samples/Basic_state?revision=1566684" width="120"></iframe></td>
   <td><iframe class="live-sample-frame sample-code-frame" frameborder="0" height="130" id="frame_Active_state" src="https://mdn.mozillademos.org/ru/docs/HTML/Forms/How_to_build_custom_form_widgets/Example_1$samples/Active_state?revision=1566684" width="120"></iframe></td>
   <td><iframe class="live-sample-frame sample-code-frame" frameborder="0" height="130" id="frame_Open_state" src="https://mdn.mozillademos.org/ru/docs/HTML/Forms/How_to_build_custom_form_widgets/Example_1$samples/Open_state?revision=1566684" width="120"></iframe></td>
  </tr>
  <tr>
   <td colspan="3" style="text-align: center;"><a href="/en-US/docs/HTML/Forms/How_to_build_custom_form_widgets/Example_1">Посмотреть исходный код</a></td>
  </tr>
 </tbody>
</table>

<h2 id="Оживи_свой_виджет_с_JavaScript">Оживи свой виджет с JavaScript</h2>

<p>Теперь, когда наш дизайн и структура готовы, мы можем написать код на JavaScript чтобы виджет действительно заработал.</p>

<div class="warning notecard">
<p><strong>Предупреждение:</strong> Следующий код представлен в образовательных целях и не может быть использован как-есть. Помимо прочего, как мы убедимся, он не пригоден для дальнейшего развития и не будет работать в устаревших браузерах. В нем также есть избыточность которую необходимо оптимизировать использования в рабочем режиме.</p>
</div>

<div class="note notecard">
<p><strong>Замечание:</strong> Создание многократно используемых виджетов может быть немного сложнее. <a href="http://dvcs.w3.org/hg/webcomponents/raw-file/tip/explainer/index.html" rel="external" title="http://dvcs.w3.org/hg/webcomponents/raw-file/tip/explainer/index.html">W3C Web Component draft</a> является одним из ответов на этот конкретный вопрос. <a href="http://x-tags.org/" rel="external" title="http://x-tags.org/">The X-Tag project</a> попытка реализовать эту спецификацию; пожалуйста, посмотрите этот проект.</p>
</div>

<h3 id="Почему_он_не_работает">Почему он не работает?</h3>

<p>Прежде чем мы начнем, запомните одну важную вещь о JavaScript: в браузере <strong>это ненадежная технология</strong>. Когда вы создаете пользовательские виджеты, вы будете полагаться на JavaScript потому что это необходимое звено для связки. Однако во многих случаях  JavaScript невозможно запустить в браузере:</p>

<ul>
 <li>Пользователь отключил JavaScript: Это самый редкий случай; сейчас очень мало людей отключают JavaScript.</li>
 <li>Скрипт не загружается. Это один из самых распространенных случаев, особенно в мобильном мире, где сеть не очень надежная.</li>
 <li>Скрипт глючит.Вы должны всегда учитывать эту возможность.</li>
 <li>Скрипт конфликтует со сторонним скриптом. Это может случиться со скриптами отслеживания или любыми закладурками (bookmarklets), которые использует пользователь.</li>
 <li>Скрипт конфликтует с расширением браузера или зависит от него (такими как расширение <a href="https://addons.mozilla.org/fr/firefox/addon/noscript/" rel="external">NoScript</a> в Firefox, или расширенние <a href="https://chrome.google.com/webstore/detail/notscripts/odjhifogjcknibkahlpidmdajjpkkcfn" rel="external">NotScripts</a> в Chrome).</li>
 <li>Пользователь использует устаревший браузер, и одна из требуемых функций не поддерживается. Это часто случается, когда вы используете передовые API.</li>
</ul>

<p>Из-за этого очень важно серьезно подумать о том, что произойдет, если JavaScript не сработает. Детальное рассмотрение этой проблемы выходит за рамки данной статьи, поскольку эта проблема тесно связана с тем, насколько универсальным и многократно используемым вы хотите сделать свой сценарий, но мы рассмотрим основы этого в нашем примере.</p>

<p>В нашем примере, если наш JavaScript код не работает, мы используем стандартный элемент <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a>. Для этого, нам нужны две вещи.</p>

<p>Во-первых нам нужно добавить стандартный элемент <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a> перед каждым использованием нашего пользовательского виджета. Это также необходимо, чтобы отправить данные из нашего пользовательского виджета вместе с остальными данными формы; подробнее рассмотрим это позже.</p>

<pre class="brush: html notranslate">&lt;body class=&quot;no-widget&quot;&gt;
  &lt;form&gt;
    &lt;select name=&quot;myFruit&quot;&gt;
      &lt;option&gt;Cherry&lt;/option&gt;
      &lt;option&gt;Lemon&lt;/option&gt;
      &lt;option&gt;Banana&lt;/option&gt;
      &lt;option&gt;Strawberry&lt;/option&gt;
      &lt;option&gt;Apple&lt;/option&gt;
    &lt;/select&gt;

    &lt;div class=&quot;select&quot;&gt;
      &lt;span class=&quot;value&quot;&gt;Cherry&lt;/span&gt;
      &lt;ul class=&quot;optList hidden&quot;&gt;
        &lt;li class=&quot;option&quot;&gt;Cherry&lt;/li&gt;
        &lt;li class=&quot;option&quot;&gt;Lemon&lt;/li&gt;
        &lt;li class=&quot;option&quot;&gt;Banana&lt;/li&gt;
        &lt;li class=&quot;option&quot;&gt;Strawberry&lt;/li&gt;
        &lt;li class=&quot;option&quot;&gt;Apple&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
  &lt;/form&gt;

&lt;/body&gt;</pre>

<p>Во-вторых нам нужно два новых класса, чтобы скрыть ненужные элементы (то есть  &quot;настоящие&quot; элементы <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a>, если скрипт запустился, или наш пользовательский виджет, если скрипт не запустился). По умолчанию наш HTML код скрывает наш пользовательский виджет.</p>

<pre class="brush: css notranslate">.widget select,
.no-widget .select {
  /* Этот CSS селектор значит:
     - или мы присваиваем классу body значение &quot;widget&quot; и таким образом мы скрываем элемент <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a>
     - или мы не меняем класс body, тогда класс body остается в значении &quot;no-widget&quot;,
       и элементы, чей класс &quot;select&quot; будут скрыты */
  position : absolute;
  left     : -5000em;
  height   : 0;
  overflow : hidden;
}</pre>

<p>Теперь нам нужен модуль JavaScript, чтобы определить, запущен скрипт или нет. Этот модуль очень простой: если наш скрипт запустится во время загрузки страницы, то он удалит класс класс <code>no-widget</code> и добавит класс <code>widget</code>, чем поменяет видимость элемента  <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a> и нашего пользовательского виджета.</p>

<pre class="brush: js notranslate">window.addEventListener(&quot;load&quot;, function () {
  document.body.classList.remove(&quot;no-widget&quot;);
  document.body.classList.add(&quot;widget&quot;);
});</pre>

<table>
 <thead>
  <tr>
   <th scope="col" style="text-align: center;">Без JS</th>
   <th scope="col" style="text-align: center;">С JS</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><iframe class="live-sample-frame sample-code-frame" frameborder="0" height="130" id="frame_No_JS" src="https://mdn.mozillademos.org/ru/docs/HTML/Forms/How_to_build_custom_form_widgets/Example_2$samples/No_JS?revision=1566684" width="120"></iframe></td>
   <td><iframe class="live-sample-frame sample-code-frame" frameborder="0" height="130" id="frame_JS" src="https://mdn.mozillademos.org/ru/docs/HTML/Forms/How_to_build_custom_form_widgets/Example_2$samples/JS?revision=1566684" width="120"></iframe></td>
  </tr>
  <tr>
   <td colspan="2" style="text-align: center;"><a href="/en-US/docs/HTML/Forms/How_to_build_custom_form_widgets/Example_2">Посмотреть исходный код</a></td>
  </tr>
 </tbody>
</table>

<div class="note notecard">
<p><strong>Замечание:</strong> Если вы действительно хотите сделать свой код универсальным и многоразовым, то вместо переключения классов гораздо лучше просто добавить класс элементам <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a> чтобы их скрыть, и динамически добавлять дерево DOM представляющее пользовательский виджет после каждого элемента <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a> на странице.</p>
</div>

<h3 id="Облегчение_работы">Облегчение работы</h3>

<p>В коде который мы собираемся написать, для выполнения всех необходимых действий мы будем использовать стандартный DOM API. Однако, хотя поддержка DOM API в браузерах стала гораздо лучше, все еще есть нюансы с устраевшеними браузерами  (особенно со старым добрым Internet Explorer).</p>

<p>Чтобы избежать неприятностей с устаревшими браузерами есть два способа: использовать отдельный фреймворк такой как <a href="http://jquery.com/" rel="external" title="http://jquery.com/">jQuery</a>, <a href="https://github.com/julienw/dollardom" rel="external" title="https://github.com/julienw/dollardom">$dom</a>, <a href="http://prototypejs.org/" rel="external" title="http://prototypejs.org/">prototype</a>, <a href="http://dojotoolkit.org/" rel="external" title="http://dojotoolkit.org/">Dojo</a>, <a href="http://yuilibrary.com/" rel="external" title="http://yuilibrary.com/">YUI</a>, и т.п., или самостоятельно реализовать недостающие функции которые вам нужны (что можно легко сделать через условную загрузку, например используя библиотеку <a href="http://yepnopejs.com/" rel="external" title="http://yepnopejs.com/">yepnope</a>).</p>

<p>Мы планируем использовать следующие функции (от самых рискованных до самых безопасных):</p>

<ol>
 <li><a href="/ru/docs/Web/API/Element/classList"><code>classList</code></a></li>
 <li><a href="/ru/docs/Web/API/EventTarget/addEventListener"><code>addEventListener</code></a></li>
 <li><code><a href="/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach" title="/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach">forEach</a></code> (This is not DOM but modern JavaScript)</li>
 <li><a href="/ru/docs/Web/API/Element/querySelector"><code>querySelector</code></a> and <a href="/ru/docs/Web/API/Element/querySelectorAll"><code>querySelectorAll</code></a></li>
</ol>

<p>Помимо доступности этих специфических функций, остается еще одна проблема чтобы начать. Объект возвращаемый функцией <a href="/ru/docs/Web/API/Element/querySelectorAll"><code>querySelectorAll()</code></a> имеет тип <a href="/ru/docs/Web/API/NodeList"><code>NodeList</code></a> что отличается от <code><a href="/en-US/docs/JavaScript/Reference/Global_Objects/Array" title="/en-US/docs/JavaScript/Reference/Global_Objects/Array">Array</a></code>. Это важно потому, что объекты  <code>Array</code> поддерживают функцию <code><a href="/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach" title="/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach">forEach</a></code>, а <a href="/ru/docs/Web/API/NodeList"><code>NodeList</code></a> не поддерживает. Так как  <a href="/ru/docs/Web/API/NodeList"><code>NodeList</code></a> очень похож на <code>Array</code> и нам очень удобно использовать <code>forEach</code>, мы можем просто добавить <code>forEach</code> к объекту <a href="/ru/docs/Web/API/NodeList"><code>NodeList</code></a> чтобы облегчить нам жизнь, например так:</p>

<pre class="brush: js notranslate">NodeList.prototype.forEach = function (callback) {
  Array.prototype.forEach.call(this, callback);
}</pre>

<p>Мы не шутили, когда сказали, что это легко сделать.</p>

<h3 id="Создание_процедур_обработки_событий">Создание процедур обработки событий</h3>

<p>Итак, начало положено, и мы можем приступить к функциям, которые будут использоваться для взаимодействия с пользователем.</p>

<pre class="brush: js notranslate">// Эта функция будет вызываться каждый раз, когда наш виджет будет деактивирован
// Ей передается один параметр
// select : DOM нода класса `select` который должен быть деактивирован
function deactivateSelect(select) {

  // Если виджет не активен, то и делать-то нечего
  if (!select.classList.contains(&apos;active&apos;)) return;

  // Получаем список опций для нашего виджета
  var optList = select.querySelector(&apos;.optList&apos;);

  // Закрываем список опций
  optList.classList.add(&apos;hidden&apos;);

  // и деактивируем сам виджет
  select.classList.remove(&apos;active&apos;);
}

// Эта функция бедт вызываться какждый раз, когда пользователь захочет (де)активровать наш виджет
// Ей передаются два параметра:
// select : DOM нода класса `select` для активации
// selectList : список всех DOM нод с классом `select`
function activeSelect(select, selectList) {

  // Если виджет активен, то и делать-то нечего
  if (select.classList.contains(&apos;active&apos;)) return;

  // Нам нужно отключить активное состояние всех наших виджетов
  // Так как функция deactivateSelect соответствует всем требованиям
  // функции forEach мы вызываем ее без использования промежуточной анонимной функции
  selectList.forEach(deactivateSelect);

  // А теперь мы возвращаем активное состояние нужного виджета
  select.classList.add(&apos;active&apos;);
}

// Эта функция будет вызываться каждый раз, когда пользователь будет открывать/закрывать список вариантов
// Ей передается один параметр:
// select : DOM нода со списком для переключения состояния
function toggleOptList(select) {

  // Список хранится в виджете
  var optList = select.querySelector(&apos;.optList&apos;);

  // Мы меняем класс виджета чтобы показать/скрыть его
  optList.classList.toggle(&apos;hidden&apos;);
}

// Эта функция будет вызываться каждый раз, когда нам нужно подсветить вариант
// Ей передаются два параметра:
// select : DOM нода класса `select` содержащая вариант для подсветки
// option : DOM нода класса `option` для подсветки
function highlightOption(select, option) {

  // Мы получаем список всех вариантов доступных в нашем элементе
  var optionList = select.querySelectorAll(&apos;.option&apos;);

  // Мы удаляем подсветку всех вариантов
  optionList.forEach(function (other) {
    other.classList.remove(&apos;highlight&apos;);
  });

  // Подсвечиваем нужный вариант
  option.classList.add(&apos;highlight&apos;);
};</pre>

<p>Это все, что вам нужно для обработки различных состояний пользовательского виджета.</p>

<p>Далее мы связываем эти функции с соответствующими событиями:</p>

<pre class="brush: js notranslate">// Мы обрабатываем событие при загрузке документа.
window.addEventListener(&apos;load&apos;, function () {
  var selectList = document.querySelectorAll(&apos;.select&apos;);

  // Каждый наш собственный виджет должен быть проинициализирован
  selectList.forEach(function (select) {

    // также как и его элементы `option`
    var optionList = select.querySelectorAll(&apos;.option&apos;);

    // Когда пользователь проводит мышью над элементом `option`, мы подсвечиваем этот вариант
    optionList.forEach(function (option) {
      option.addEventListener(&apos;mouseover&apos;, function () {
        // Замечание: использование переменных `select` и `option`
        // ограничено рамками нашей функции.
        highlightOption(select, option);
      });
    });

    // Когда позоватль кликает на наш виджет
    select.addEventListener(&apos;click&apos;, function (event) {
       // Замечание: использование переменной `select`
       // ограничено рамками нашей функции.

       // Мы переключаем видимость списка вариантов
      toggleOptList(select);
    });

    // Когда виджет получает фокус
    // Виджет получает фокус когда пользователь кликает на него
    // или переходит на него клавишей табуляции
    select.addEventListener(&apos;focus&apos;, function (event) {
      // Замечание: использование переменных `select` и `selectList`
      // ограничено рамками нашей функции.

      // Мы активируем наш виджет
      activeSelect(select, selectList);
    });

    // Когда виджет теряет фокус
    select.addEventListener(&apos;blur&apos;, function (event) {
      // Замечание: использование переменной `select`
      // ограничено рамками нашей функции.

      // Мы деактивируем виджет
      deactivateSelect(select);
    });
  });
});</pre>

<p>В этот момент наш виджет будет изменятт состояние в соответствии с нашим дизайном, но не будет обновлять его значение. С этим мы разберемся дальше.</p>

<table>
 <thead>
  <tr>
   <th scope="col" style="text-align: center;">Пример</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><iframe class="live-sample-frame sample-code-frame" frameborder="0" height="130" id="frame_Change_states" src="https://mdn.mozillademos.org/ru/docs/HTML/Forms/How_to_build_custom_form_widgets/Example_3$samples/Change_states?revision=1566684" width="120"></iframe></td>
  </tr>
  <tr>
   <td style="text-align: center;"><a href="/en-US/docs/HTML/Forms/How_to_build_custom_form_widgets/Example_3">Посмотреть исходный код</a></td>
  </tr>
 </tbody>
</table>

<h3 id="Обработка_значения_виджета">Обработка значения виджета</h3>

<p>Теперь, когда наш виджет работает, мы должны добавить код, чтобы обновить его значение в соответствии с выбором пользователя и сделать возможным отправку этого значения вместе с данными формы.</p>

<p>Самый простой способ сделать это - использовать встроенный виджет который также есть в нашей форме. Такой виджет будет отслеживать значение со всеми встроенными элементами управления, предоставленными браузером, и значение будет отправлено, как обычно, при отправке формы. Нет смысла заново изобретать велосипед, когда все это уже сделано за нас.</p>

<p>Как было показано ранее, у нас есть стандартный виджет <a href="/ru/docs/Web/HTML/Element/select" title="HTML тэг &lt;select&gt; представляет собой элемент управления который содержит меню опций:"><code>&lt;select&gt;</code></a> в качестве запасного варианта для повышения доступности; поэтому мы просто синхронизируем его значение с нашим собственнным виджетом:</p>

<pre class="brush: js notranslate">// Эта функция обновляет отображенное значение и синхронизирует его со стандартным виджетом
// Ей передается два параметра:
// select : DOM нода класса `select` содержащая значение которое будет обновлено
// index  : индекс выбранного значения
function updateValue(select, index) {
  // Нам нужно получить стандартный виджет для данного пользовательского
  // В нашем примере стандартный виджет является братом (sibling) пользовательского виджета
  var nativeWidget = select.previousElementSibling;

  // Нам также нужно получить значение заполнителя нашего пользовательского виджета
  var value = select.querySelector(&apos;.value&apos;);

  // И нам нужен весь список вариантов
  var optionList = select.querySelectorAll(&apos;.option&apos;);

  // Установим значение текущего номера выбранного элемента равным index
  nativeWidget.selectedIndex = index;

  // Соответственно установим значение заполнителя
  value.innerHTML = optionList[index].innerHTML;

  // И мы подсвечиваем соответствующий вариант нашего пользовательского виджета
  highlightOption(select, optionList[index]);
};

// Эта функция возвращает текущий номер выбранного элемента в стандартном виджете
// Ей передается один параметр:
// select : DOM нода класса `select` соответствующая стандарному виджету
function getIndex(select) {
  // Нам нужно получить доступ к стандартному виджету соответствующему данному
  // пользовательскому виджету
  // В нашем примере стандартный виджет - брат (sibling) пользовательского виджета
  var nativeWidget = select.previousElementSibling;

  return nativeWidget.selectedIndex;
};</pre>

<p>Исползуя эти две функции мы можем связать стандартный виджет с пользовательским:</p>

<pre class="brush: js notranslate">// Мы обрабатываем привязку события при загрузке документа.
window.addEventListener(&apos;load&apos;, function () {
  var selectList = document.querySelectorAll(&apos;.select&apos;);

  // Каждый пользовательский виджет необходимсо инциализировать:
  selectList.forEach(function (select) {
    var optionList = select.querySelectorAll(&apos;.option&apos;),
        selectedIndex = getIndex(select);

    // Мы делаем наш пользовательский виджет фокусируемым
    select.tabIndex = 0;

    // Мы делаем стандартный виджет более не фокусируемым
    select.previousElementSibling.tabIndex = -1;

    // Убеждаемся, что выбранное по умолчанию значение корректно отображено
    updateValue(select, selectedIndex);

    // Кажды раз когда пользователь кликает на вариант, мы соответсвенно обновляем значение
    optionList.forEach(function (option, index) {
      option.addEventListener(&apos;click&apos;, function (event) {
        updateValue(select, index);
      });
    });

    // Когда виджет находится в фокусе, с каждым нажатием на клаиатуре, мы соответственно
    // обновляем  значение
    select.addEventListener(&apos;keyup&apos;, function (event) {
      var length = optionList.length,
          index  = getIndex(select);

      // Когда пользователь нажимает стрелку вниз, мы переходим на следующий вариант
      if (event.keyCode === 40 &amp;&amp; index &lt; length - 1) { index++; }

      // Когда пользователь нажимает стрелку вверх, мы переходим на предыдущий вариант
      if (event.keyCode === 38 &amp;&amp; index &gt; 0) { index--; }

      updateValue(select, index);
    });
  });
});</pre>

<p>В приведенном выше коде стоить отметить совйство <code><a href="/en-US/docs/Web/API/HTMLElement/tabIndex" title="/en-US/docs/Web/API/HTMLElement/tabIndex">tabIndex</a></code>. Использование этого свойства необходимо чтобы стандартный виджет никогда не получил фокус, и чтобы убедиться, что наш пользовательский виджет получает фокус когда пользователь использует клавиатуру или мышь.</p>

<p>С этим мы закончили! Вот результат:</p>

<table>
 <thead>
  <tr>
   <th scope="col" style="text-align: center;">Пример</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><iframe class="live-sample-frame sample-code-frame" frameborder="0" height="130" id="frame_Change_states" src="https://mdn.mozillademos.org/ru/docs/HTML/Forms/How_to_build_custom_form_widgets/Example_4$samples/Change_states?revision=1566684" width="120"></iframe></td>
  </tr>
  <tr>
   <td style="text-align: center;"><a href="/en-US/docs/HTML/Forms/How_to_build_custom_form_widgets/Example_4">Посмотреть исходный код</a></td>
  </tr>
 </tbody>
</table>

<p>Но секундочку, мы точно закончили?</p>

<h2 id="Делаем_доступным">Делаем доступным</h2>

<p>Мы создали нечто работающее, и, хотя это далеко от полнофункционального селектбокса, работает это хорошо. Однако то, что мы сделали, это не более, чем возня с DOM. У него нет настоящей семантики, и хотя оно выглыдит как селектбокс, с точки зрения браузера - это не так, поэтому вспомогательные технологии не смогут понять что это селектбокс. Короче говоря, этот хорошенький селектбокс не является доступным для людей с ограниченными возможностями!</p>

<p>К счастью существует решение, и оно называется <a href="/en-US/docs/Accessibility/ARIA" title="/en-US/docs/Accessibility/ARIA">ARIA</a>. ARIA - аббревиатура для &quot;Accessible Rich Internet Application&quot; (Доступное всем интернет приложение), и представляет собой <a href="http://www.w3.org/TR/wai-aria/" rel="external" title="http://www.w3.org/TR/wai-aria/">W3C спецификацию</a> специально разработанную для того, что мы здесь делаем: делаем веб приложения и пользовательские виджеты ассистивными (доступными для людей с ограниченными возможностями). В основном, это набор атрибутов, которые расширяют HTML, чтобы мы смогли лучше описать роли, состояния и свойства, так что только что изобретенный элемент выглядит как будто он был тем стандартным, за которого он себя выдает. Использовать эти атрибуты очень просто, поэтому давайте сделаем это.</p>

<h3 id="Аттрибут_role">Аттрибут <code>role</code></h3>

<p>Ключевой аттрибут используемый в <a href="/en-US/docs/Accessibility/ARIA" title="/en-US/docs/Accessibility/ARIA">ARIA</a> - это <a href="/en-US/docs/Accessibility/ARIA/ARIA_Techniques" title="/en-US/docs/Accessibility/ARIA/ARIA_Techniques"><code>role</code></a>. Аттрибут <a href="/en-US/docs/Accessibility/ARIA/ARIA_Techniques" title="/en-US/docs/Accessibility/ARIA/ARIA_Techniques"><code>role</code></a> принимает значение, определяющее для чего используется элемент. Каждая роль определяет свои собственные требования и поведение. В нашем примере мы используем роль <code><a href="/en-US/docs/Accessibility/ARIA/ARIA_Techniques/Using_the_listbox_role" title="/en-US/docs/Accessibility/ARIA/ARIA_Techniques/Using_the_listbox_role">listbox</a></code>. Это &quot;составная роль&quot; (&quot;composite role&quot;), т.е. элементы такой роли имеют потомков, у каждого из которых есть отдельная роль (в данном случае, как минимум один дочерний элемент с ролью <code>option</code>).</p>

<p>Стоит также отметить что ARIA определяет роли, которые по умолчанию применяются к стандартной разметке HTML. Например, элемент <a href="/ru/docs/Web/HTML/Element/table" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>&lt;table&gt;</code></a> соответствует роли <code>grid</code>, а элемент <a href="/ru/docs/Web/HTML/Element/ul" title="HTML-элемент &lt;ul&gt; используется для неупорядоченного списка - в частности для маркированного списка."><code>&lt;ul&gt;</code></a> соответствует роли <code>list</code>. Так как мы используем элемент <a href="/ru/docs/Web/HTML/Element/ul" title="HTML-элемент &lt;ul&gt; используется для неупорядоченного списка - в частности для маркированного списка."><code>&lt;ul&gt;</code></a>, то нам необходимо убедиться что роль <code>listbox</code> нашего виджета заменит роль <code>list</code> элемента <a href="/ru/docs/Web/HTML/Element/ul" title="HTML-элемент &lt;ul&gt; используется для неупорядоченного списка - в частности для маркированного списка."><code>&lt;ul&gt;</code></a>. С этой целью, мы будем использовать роль <code>presentation</code>. Эта роль разработана чтобы можно было отметить, что элемент не имеет особого значения, а используется исключительно чтобы представить информацию. Мы применим его к нашему элемету <a href="/ru/docs/Web/HTML/Element/ul" title="HTML-элемент &lt;ul&gt; используется для неупорядоченного списка - в частности для маркированного списка."><code>&lt;ul&gt;</code></a>.</p>

<p>Чтобы ввести роль <code><a href="/en-US/docs/Accessibility/ARIA/ARIA_Techniques/Using_the_listbox_role" title="/en-US/docs/Accessibility/ARIA/ARIA_Techniques/Using_the_listbox_role">listbox</a></code> нам нужно просто внести следующие изменения в HTML:</p>

<pre class="brush: html notranslate">&lt;!-- Мы добавили аттрибут role=&quot;listbox&quot; в наш элемент верхнего уровня --&gt;
&lt;div class=&quot;select&quot; role=&quot;listbox&quot;&gt;
  &lt;span class=&quot;value&quot;&gt;Cherry&lt;/span&gt;
  &lt;!-- Также мы добавили аттрибут role=&quot;presentation&quot; в элемент ul --&gt;
  &lt;ul class=&quot;optList&quot; role=&quot;presentation&quot;&gt;
    &lt;!-- И мы добавили аттрибут role=&quot;option&quot; во все элементы li --&gt;
    &lt;li role=&quot;option&quot; class=&quot;option&quot;&gt;Cherry&lt;/li&gt;
    &lt;li role=&quot;option&quot; class=&quot;option&quot;&gt;Lemon&lt;/li&gt;
    &lt;li role=&quot;option&quot; class=&quot;option&quot;&gt;Banana&lt;/li&gt;
    &lt;li role=&quot;option&quot; class=&quot;option&quot;&gt;Strawberry&lt;/li&gt;
    &lt;li role=&quot;option&quot; class=&quot;option&quot;&gt;Apple&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;</pre>

<div class="note notecard">
<p><strong>Замечание:</strong> Включение как атрибута <code>role</code> так и атрибута <code>class</code> необходимо только если вы хотите обеспечить поддержку устаревших браузеров, которые не поддерживают  <a href="/en-US/docs/CSS/Attribute_selectors">селекторы атрибутов CSS</a>.</p>
</div>

<h3 id="Атрибут_aria-selected">Атрибут <code>aria-selected</code> </h3>

<p>Использовать только аттрибут <a href="/en-US/docs/Accessibility/ARIA/ARIA_Techniques" title="/en-US/docs/Accessibility/ARIA/ARIA_Techniques"><code>role</code></a> недостаточно. <a href="/en-US/docs/Accessibility/ARIA" title="/en-US/docs/Accessibility/ARIA">ARIA</a> также предоставляет множество атрибутов состояний и свойств. Чем больше и уместнее вы их используете, тем ваш виджет будет более понятен для вспомогательных технологий. В нашем случае мы ограничимся использованием одного аттрибута: <code>aria-selected</code>.</p>

<p>Атрибут <code>aria-selected</code> используется для отметки текущего выбранного варианта; это позволяет ассистивным технологиям информировать пользователя о текущем выборе. Мы будем используя JavaScript динамически отмечать выбранный вариант каждый раз, когда пользователь его выбирает. С этой целью нам нужно пересмотреть нашу функцию <code>updateValue()</code>:</p>

<pre class="brush: js notranslate">function updateValue(select, index) {
  var nativeWidget = select.previousElementSibling;
  var value = select.querySelector(&apos;.value&apos;);
  var optionList = select.querySelectorAll(&apos;.option&apos;);

  // Мы уверены что все варианты не выбраны
  optionList.forEach(function (other) {
    other.setAttribute(&apos;aria-selected&apos;, &apos;false&apos;);
  });

  // Мы уверены что выбранный вариант отмечен
  optionList[index].setAttribute(&apos;aria-selected&apos;, &apos;true&apos;);

  nativeWidget.selectedIndex = index;
  value.innerHTML = optionList[index].innerHTML;
  highlightOption(select, optionList[index]);
};</pre>

<p>Вот окончательный результат всех этих изменений (вы сможете это лучше прочувствовать если испробуете это со вспомогательными технологиями, такими как <a href="http://www.nvda-project.org/" rel="external" title="http://www.nvda-project.org/">NVDA</a> или <a href="http://www.apple.com/accessibility/voiceover/" rel="external" title="http://www.apple.com/accessibility/voiceover/">VoiceOver</a>):</p>

<table>
 <thead>
  <tr>
   <th scope="col" style="text-align: center;">Пример</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><iframe class="live-sample-frame sample-code-frame" frameborder="0" height="130" id="frame_Change_states" src="https://mdn.mozillademos.org/ru/docs/HTML/Forms/How_to_build_custom_form_widgets/Example_5$samples/Change_states?revision=1566684" width="120"></iframe></td>
  </tr>
  <tr>
   <td style="text-align: center;"><a href="/en-US/docs/HTML/Forms/How_to_build_custom_form_widgets/Example_5">Посмотреть исходный код</a></td>
  </tr>
 </tbody>
</table>

<h2 id="Заключение">Заключение</h2>

<p>Мы рассмотрели все основы создания пользовательского виджета формы, и это, как вы видите, нетривиальная задача, и часто проще и лучше положиться на сторонние библиотеки, чем писать их самому с нуля (если, конечно, ваша цель - не создать такую библиотеку).</p>

<p>Вот несколько библиотек, которые вам стоит рассмотреть перед тем как создавать собственную:</p>

<ul>
 <li><a href="http://jqueryui.com/" rel="external">jQuery UI</a></li>
 <li><a href="https://github.com/marghoobsuleman/ms-Dropdown" rel="external">msDropDown</a></li>
 <li><a href="http://www.emblematiq.com/lab/niceforms/" rel="external">Nice Forms</a></li>
 <li><a href="https://www.google.fr/search?q=HTML+custom+form+controls&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=org.mozilla:fr:official&amp;client=firefox-a" rel="external">и многие другие…</a></li>
</ul>

<p>Если вы хотите двигаться далее, то код в этом примере нуждается в некоторм улучшении прежде чем станет универсальным и многоразовым. Это упражнение, которое вы можете попробовать выполнить. Две подсказки, которые помогут вам в этом: первый аргумент всех наших функций одинаков, это значит что эти функции должны быть в одном контексте. Было бы разумным создать объект для совместного использования этого контекста. Также вам нужно сделать его функциональным; это значит, что ему необходимо одинаково хорошо работать с различными браузерами, чья соместимость с  Web стандартами  очень отличается. Повеселись!</p>

<div class="prevnext">
  <a href="/ru/docs/Learn/HTML/Forms/Form_validation" class="button"><i class="icon-arrow-left"></i><span class="label"> Назад </span></a><a href="/ru/docs/Learn/HTML/Forms" class="button"><i class="icon-arrow-up"></i> Обзор: Forms</a><a href="/ru/docs/Learn/HTML/Forms/Sending_forms_through_JavaScript" class="button"><span class="label"> Далее  </span><i class="icon-arrow-right"></i></a>
</div>

<h2 id="В_этом_модуле">В этом модуле</h2>

<ul>
 <li><a href="/en-US/docs/Learn/HTML/Forms/Your_first_HTML_form">Ваша первая HTML форма</a></li>
 <li><a href="/ru/docs/Learn/HTML/Forms/How_to_structure_an_HTML_form">Как структурировать HTML форму</a></li>
 <li><a href="/ru/docs/Learn/HTML/Forms/%D0%A1%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%B5_%D0%B2%D0%B8%D0%B4%D0%B6%D0%B5%D1%82%D1%8B_%D1%84%D0%BE%D1%80%D0%BC">The native form widgets</a></li>
 <li><a href="/ru/docs/Learn/HTML/Forms/%D0%9E%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B0_%D0%B8_%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D1%84%D0%BE%D1%80%D0%BC%D1%8B">Отправка данных формы</a></li>
 <li><a href="/en-US/docs/Learn/HTML/Forms/Form_validation">Проверка данных формы</a></li>
 <li><a href="/ru/docs/Learn/HTML/Forms/How_to_build_custom_form_widgets">Как создавать пользовательские виджеты форм</a></li>
 <li><a href="/en-US/docs/Learn/HTML/Forms/Sending_forms_through_JavaScript">Sending forms through JavaScript</a></li>
 <li><a href="/en-US/docs/Learn/HTML/Forms/HTML_forms_in_legacy_browsers">HTML forms in legacy browsers</a></li>
 <li><a href="/en-US/docs/Learn/HTML/Forms/Styling_HTML_forms">Styling HTML forms</a></li>
 <li><a href="/en-US/docs/Learn/HTML/Forms/Advanced_styling_for_HTML_forms">Advanced styling for HTML forms</a></li>
 <li><a href="/en-US/docs/Learn/HTML/Forms/Property_compatibility_table_for_form_widgets">Property compatibility table for form widgets</a></li>
</ul>
