---
title: Document.createTreeWalker()
slug: Web/API/Document/createTreeWalker
translation_of: Web/API/Document/createTreeWalker
original_slug: Web/API/document.createTreeWalker
---
<div>
 <section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-TW/docs/Web/API/Document.createTreeWalker"><code>Document.createTreeWalker</code></a></strong></li></ol></section></div>
<p><strong><code>Document.createTreeWalker()</code></strong> 方法，能建立一個 <a href="/zh-TW/docs/Web/API/TreeWalker" title="The TreeWalker object represents the nodes of a document subtree and a position within them."><code>TreeWalker</code></a> 物件並傳回.</p>
<h2 id="Syntax" name="Syntax">語法</h2>
<pre class="syntaxbox"><em>treeWalker</em> = <em>document</em>.createTreeWalker(<em>root</em>, <em>whatToShow</em>, <em>filter</em>, <em>entityReferenceExpansion</em>);
</pre>
<h3 id="參數">參數</h3>
<dl>
 <dt>
  <em>root </em></dt>
 <dd>
  是這個 <a href="/zh-TW/docs/Web/API/TreeWalker" title="The TreeWalker object represents the nodes of a document subtree and a position within them."><code>TreeWalker</code></a> 遍歷的根節點(root <a href="/zh-TW/docs/Web/API/Node" title="Node 是一個被多種 DOM 類型繼承的介面，它讓各種類型的 DOM 都能以同樣的方式來操作。如繼承了相同的方法，或能以相同的方式測試。"><code>Node</code></a>). Typically this will be an element owned by the document.</dd>
 <dt>
  <em>whatToShow <span class="optional optionalInline notecard inline">選擇性</span></em></dt>
 <dd>
  Is an optional <code>unsigned long</code> representing a bitmask created by combining the constant properties of <code><a href="http://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#Traversal-NodeFilter" title="http://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#Traversal-NodeFilter">NodeFilter</a></code>. 它是一種方便的方法，用來過濾某些類型的節點。 It defaults to <code>0xFFFFFFFF</code> representing the <code>SHOW_ALL</code> constant.<br>
  <table class="standard-table">
   <tbody>
    <tr>
     <td class="header">Constant</td>
     <td class="header">數值</td>
     <td class="header">說明</td>
    </tr>
    <tr>
     <td><code>NodeFilter.SHOW_ALL</code></td>
     <td><code>-1</code> (that is the max value of <code>unsigned long</code>)</td>
     <td>顯示所有節點.</td>
    </tr>
    <tr>
     <td><code><code>NodeFilter.</code>SHOW_ATTRIBUTE</code> <span title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></td>
     <td><code>2</code></td>
     <td>Shows attribute <a href="/zh-TW/docs/Web/API/Attr"><code>Attr</code></a> nodes. This is meaningful only when creating a <a href="/zh-TW/docs/Web/API/TreeWalker"><code>TreeWalker</code></a> with an <a href="/zh-TW/docs/Web/API/Attr"><code>Attr</code></a> node as its root; in this case, it means that the attribute node will appear in the first position of the iteration or traversal. Since attributes are never children of other nodes, they do not appear when traversing over the document tree.</td>
    </tr>
    <tr>
     <td><code><code>NodeFilter.</code>SHOW_CDATA_SECTION</code> <span title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></td>
     <td><code>8</code></td>
     <td>Shows <a href="/zh-TW/docs/Web/API/CDATASection"><code>CDATASection</code></a> nodes.</td>
    </tr>
    <tr>
     <td><code><code>NodeFilter.</code>SHOW_COMMENT</code></td>
     <td><code>128</code></td>
     <td>Shows <a href="/zh-TW/docs/Web/API/Comment"><code>Comment</code></a> nodes.</td>
    </tr>
    <tr>
     <td><code><code>NodeFilter.</code>SHOW_DOCUMENT</code></td>
     <td><code>256</code></td>
     <td>Shows <a href="/zh-TW/docs/Web/API/Document"><code>Document</code></a> nodes.</td>
    </tr>
    <tr>
     <td><code><code>NodeFilter.</code>SHOW_DOCUMENT_FRAGMENT</code></td>
     <td><code>1024</code></td>
     <td>Shows <a href="/zh-TW/docs/Web/API/DocumentFragment"><code>DocumentFragment</code></a> nodes.</td>
    </tr>
    <tr>
     <td><code><code>NodeFilter.</code>SHOW_DOCUMENT_TYPE</code></td>
     <td><code>512</code></td>
     <td>Shows <a href="/zh-TW/docs/Web/API/DocumentType"><code>DocumentType</code></a> nodes.</td>
    </tr>
    <tr>
     <td><code><code>NodeFilter.</code>SHOW_ELEMENT</code></td>
     <td><code>1</code></td>
     <td>Shows <a href="/zh-TW/docs/Web/API/Element"><code>Element</code></a> nodes.</td>
    </tr>
    <tr>
     <td><code><code>NodeFilter.</code>SHOW_ENTITY</code> <span title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></td>
     <td><code>32</code></td>
     <td>Shows <a href="/zh-TW/docs/Web/API/Entity"><code>Entity</code></a> nodes. This is meaningful only when creating a <a href="/zh-TW/docs/Web/API/TreeWalker"><code>TreeWalker</code></a> with an <a href="/zh-TW/docs/Web/API/Entity"><code>Entity</code></a> node as its root; in this case, it means that the <a href="/zh-TW/docs/Web/API/Entity"><code>Entity</code></a> node will appear in the first position of the traversal. Since entities are not part of the document tree, they do not appear when traversing over the document tree.</td>
    </tr>
    <tr>
     <td><code><code>NodeFilter.</code>SHOW_ENTITY_REFERENCE</code> <span title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></td>
     <td><code>16</code></td>
     <td>Shows <a href="/zh-TW/docs/Web/API/EntityReference"><code>EntityReference</code></a> nodes.</td>
    </tr>
    <tr>
     <td><code><code><code>NodeFilter.</code></code>SHOW_NOTATION</code> <span title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></td>
     <td><code>2048</code></td>
     <td>Shows <a href="/zh-TW/docs/Web/API/Notation"><code>Notation</code></a> nodes. This is meaningful only when creating a <a href="/zh-TW/docs/Web/API/TreeWalker"><code>TreeWalker</code></a> with a <a href="/zh-TW/docs/Web/API/Notation"><code>Notation</code></a> node as its root; in this case, it means that the <a href="/zh-TW/docs/Web/API/Notation"><code>Notation</code></a> node will appear in the first position of the traversal. Since entities are not part of the document tree, they do not appear when traversing over the document tree.</td>
    </tr>
    <tr>
     <td><code><code>NodeFilter.</code>SHOW_PROCESSING_INSTRUCTION</code></td>
     <td><code>64</code></td>
     <td>Shows <a href="/zh-TW/docs/Web/API/ProcessingInstruction"><code>ProcessingInstruction</code></a> nodes.</td>
    </tr>
    <tr>
     <td><code><code>NodeFilter.</code>SHOW_TEXT</code></td>
     <td><code>4</code></td>
     <td>顯示文字節點(<a href="/zh-TW/docs/Web/API/Text"><code>Text</code></a> nodes).</td>
    </tr>
   </tbody>
  </table>
 </dd>
 <dt>
  <em>filter <em><span class="optional optionalInline notecard inline">選擇性</span></em></em></dt>
 <dd>
  是一個可選的 <a href="/zh-TW/docs/Web/API/NodeFilter" title="The documentation about this has not yet been written; please consider contributing!"><code>NodeFilter</code></a>, 這是一個物件有著 <code>acceptNode</code> 方法, 這方法被 <a href="/zh-TW/docs/Web/API/TreeWalker" title="The TreeWalker object represents the nodes of a document subtree and a position within them."><code>TreeWalker</code></a> 呼叫來決定是否接受通過 <code>whatToShow</code> 檢查的節點.</dd>
 <dt>
  <em>entityReferenceExpansion<em> <span class="optional optionalInline notecard inline">選擇性</span></em></em> <em><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></em></dt>
 <dd>
  Is a <a href="/zh-TW/docs/Web/API/Boolean" title="The documentation about this has not yet been written; please consider contributing!"><code>Boolean</code></a> flag indicating if when discarding an <a href="/zh-TW/docs/Web/API/EntityReference" title="The documentation about this has not yet been written; please consider contributing!"><code>EntityReference</code></a> its whole sub-tree must be discarded at the same time.</dd>
</dl>
<h2 id="Example" name="Example">Example</h2>
<p>The following example goes through all nodes in the body, reduces the set of nodes to elements, simply passes through as acceptable each node (it could reduce the set in the <code>acceptNode()</code> method instead), and then makes use of tree walker iterator that is created to advance through the nodes (now all elements) and push them into an array.</p>
<pre class="brush: js">var treeWalker = document.createTreeWalker(
  document.body,
  NodeFilter.SHOW_ELEMENT,
  { acceptNode: function(node) { return NodeFilter.FILTER_ACCEPT; } },
  false
);

var nodeList = [];

while(treeWalker.nextNode()) nodeList.push(treeWalker.currentNode);
</pre>
<h2 id="Specification" name="Specification">Specifications</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a lang="en" href="https://dom.spec.whatwg.org/#dom-document-createtreewalker" class="external" hreflang="en">DOM<br><small lang="zh-TW">The definition of &apos;Document.createTreeWalker&apos; in that specification.</small></a></td>
   <td><span class="spec-Living">Living Standard</span></td>
   <td>Removed the <code>expandEntityReferences</code> parameter.<br>
    Made the <code>whatToShow</code> and <code>filter</code> parameters optionals.</td>
  </tr>
  <tr>
   <td><a lang="en" href="https://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#NodeIteratorFactory-createTreeWalker" class="external" hreflang="en">Document Object Model (DOM) Level 2 Traversal and Range Specification<br><small lang="zh-TW">The definition of &apos;Document.createTreeWalker&apos; in that specification.</small></a></td>
   <td><span class="spec-Obsolete">Obsolete</span></td>
   <td>Initial definition.</td>
  </tr>
 </tbody>
</table>
<h2 id="Browser_compatibility">Browser compatibility</h2>
<p></p><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-TW/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div><p></p>
<div id="compat-desktop">
 <table class="compat-table">
  <tbody>
   <tr>
    <th>Feature</th>
    <th>Chrome</th>
    <th>Firefox (Gecko)</th>
    <th>Internet Explorer</th>
    <th>Opera</th>
    <th>Safari</th>
   </tr>
   <tr>
    <td>Basic support</td>
    <td>1.0</td>
    <td><a href="/en-US/Firefox/Releases/2">2.0</a> (1.8.1)</td>
    <td>9.0</td>
    <td>9.0</td>
    <td>3.0</td>
   </tr>
   <tr>
    <td><code>whatToShow</code> and <code>filter</code> optional</td>
    <td>1.0</td>
    <td><a href="/en-US/Firefox/Releases/12">12</a> (12)</td>
    <td><span style="color: #f00;">No support</span></td>
    <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
    <td>3.0</td>
   </tr>
   <tr>
    <td><code>expandEntityReferences</code> <span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></td>
    <td>1.0</td>
    <td><a href="/en-US/Firefox/Releases/2">2.0</a> (1.8.1)<br>
     Removed in <a href="/en-US/Firefox/Releases/12">12</a> (12)</td>
    <td>9.0</td>
    <td>9.0</td>
    <td>3.0</td>
   </tr>
  </tbody>
 </table>
</div>
<div id="compat-mobile">
 <table class="compat-table">
  <tbody>
   <tr>
    <th>Feature</th>
    <th>Android</th>
    <th>Firefox Mobile (Gecko)</th>
    <th>IE Mobile</th>
    <th>Opera Mobile</th>
    <th>Safari Mobile</th>
   </tr>
   <tr>
    <td>Basic support</td>
    <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
    <td>1.0 (1.8.1)</td>
    <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
    <td>9.0</td>
    <td>3.0</td>
   </tr>
   <tr>
    <td><code>whatToShow</code> and <code>filter</code> optional</td>
    <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
    <td><a href="/en-US/Firefox/Releases/12">12</a> (12)</td>
    <td><span style="color: #f00;">No support</span></td>
    <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
    <td>3.0</td>
   </tr>
   <tr>
    <td><code>expandEntityReferences</code> <span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></td>
    <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
    <td><a href="/en-US/Firefox/Releases/2">2.0</a> (1.8.1)<br>
     Removed in <a href="/en-US/Firefox/Releases/12">12</a> (12)</td>
    <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
    <td>9.0</td>
    <td>3.0</td>
   </tr>
  </tbody>
 </table>
</div>
<h2 id="See_also">See also</h2>
<ul>
 <li>The interface of the object it creates: <a href="/zh-TW/docs/Web/API/TreeWalker"><code>TreeWalker</code></a>.</li>
 <li><a href="http://msdn.microsoft.com/en-us/library/ie/ff975302(v=vs.85).aspx">createTreeWalker on MSDN</a></li>
</ul>
