---
title: async和await:让异步编程更简单
slug: Learn/JavaScript/Asynchronous/Async_await
translation_of: Learn/JavaScript/Asynchronous/Async_await
original_slug: learn/JavaScript/异步/Async_await
---
<div><section class="Quick_links" id="Quick_Links">

<ol>
  <li data-default-state="closed"><a href="/zh-CN/docs/Learn/Getting_started_with_the_web"><strong>新手请从这开始！</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Web 入门</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web">Web 概述</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/Installing_basic_software">安装基本软件</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/What_will_your_website_look_like">您的网站会是什么样？</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/Dealing_with_files">处理文件</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/HTML_basics">HTML 基础</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/CSS_basics">CSS 基础</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/JavaScript_basics">JavaScript 基础</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/Publishing_your_website">发布您的网站</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/How_the_Web_works">Web 是如何运作的</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="closed"><a href="/zh-CN/docs/Learn/HTML"><strong>HTML — 构建 Web</strong></a></li>
  <li class="toggle">
      <details>
          <summary>HTML 介绍</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML">HTML 概述</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Getting_started">HTML 入门</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/The_head_metadata_in_HTML">脑袋里是什么？HTML 中的元数据</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/HTML_text_fundamentals">HTML 文字基础</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Creating_hyperlinks">建立超链接</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Advanced_text_formatting">高级文字格式</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Document_and_website_structure">文档与网站架构</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Debugging_HTML">HTML 除错</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Marking_up_a_letter">作业：标记字母</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Structuring_a_page_of_content">作业：构建出有内容的网页</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>多媒体与嵌入</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding">多媒体与嵌入概述</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Images_in_HTML">HTML 中的图片</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Video_and_audio_content">视频和音频内容</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Other_embedding_technologies">从对象到 iframe — 其他嵌入技术</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Adding_vector_graphics_to_the_Web">为 Web 新增向量图</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images">自适应图片</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Mozilla_splash_page">作业：Mozilla 醒目页面</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>HTML 表格</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/HTML/Tables">HTML 表格概览</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Tables/Basics">HTML 表格基础</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Tables/Advanced">HTML 高级表格特性和可访问性</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Tables/Structuring_planet_data">作业：构建行星数据</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="closed"><a href="/zh-CN/docs/Learn/CSS"><strong>CSS — 设计 Web</strong></a></li>
  <li class="toggle">
      <details>
          <summary>CSS first steps</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/CSS/First_steps">CSS first steps overview</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/First_steps/What_is_CSS">What is CSS?</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/First_steps/Getting_started">Getting started with CSS</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/First_steps/How_CSS_is_structured">How CSS is structured</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/First_steps/How_CSS_works">How CSS works</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/First_steps/Using_your_new_knowledge">Using your new knowledge</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>CSS building blocks</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks">CSS building blocks overview</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Cascade_and_inheritance">Cascade and inheritance</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Selectors">CSS selectors</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/The_box_model">The box model</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Backgrounds_and_borders">Backgrounds and borders</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Handling_different_text_directions">Handling different text directions</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Overflowing_content">Overflowing content</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Values_and_units">Values and units</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Sizing_items_in_CSS">Sizing items in CSS</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Images_media_form_elements">Images, media, and form elements</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Styling_tables">Styling tables</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Debugging_CSS">Debugging CSS</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Organizing">Organizing your CSS</a></li>
      </ol></details>
  </li>
  <li class="toggle">
      <details>
          <summary>样式化文字</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/CSS/Styling_text">样式化文字概述</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Styling_text/Fundamentals">基础文字与字体样式化</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Styling_text/Styling_lists">样式化列表</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Styling_text/Styling_links">样式化链接</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Styling_text/Web_fonts">Web 字体</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Styling_text/Typesetting_a_homepage">作业：排版社区大学首页</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>CSS 排版概述</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout">CSS 版面配置概述</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Introduction">介绍</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Normal_Flow">Normal Flow</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Flexbox">弹性区块</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Grids">网格</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Floats">浮动</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Positioning">定位</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Multiple-column_Layout">Multiple-column Layout</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Responsive_Design">Responsive design</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Media_queries">Beginner&apos;s guide to media queries</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Legacy_Layout_Methods">Legacy Layout Methods</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Supporting_Older_Browsers">Supporting Older Browsers</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Fundamental_Layout_Comprehension">Fundamental Layout Comprehension</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="closed"><a href="/zh-CN/docs/Learn/JavaScript"><strong>JavaScript — 用户端动态脚本</strong></a></li>
  <li class="toggle">
      <details>
          <summary>JavaScript 第一步</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps">JavaScript 第一步概述</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/What_is_JavaScript">什么是 JavaScript？</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/A_first_splash">初次接触 JavaScript</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/What_went_wrong">出现了什么问题？JavaScript 疑难解答</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/Variables">储存你所需的信息 — 变量</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/Math">JavaScript 基础概念 — 数字与运算符</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/Strings">处理文字 — JavaScript 中的字符串</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/Useful_string_methods">有用的字符串方法</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/Arrays">数组</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/Silly_story_generator">作业：傻瓜故事产生器</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>JavaScript 基础要件</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks">JavaScript 基础要件概述</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/conditionals">在代码中决策 — 条件</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/Looping_code">代码循环</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/Functions">函数 - 可重复利用的代码块</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/Build_your_own_function">建立自己的函数</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/Return_values">函数回传值</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/Events">事件介绍</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/Image_gallery">作业：图库</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>JavaScript 对象介绍</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects">JavaScript 对象概述</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/Basics">对象基础概念</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/Object-oriented_JS">适合新手的面向对象 JavaScript</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/Object_prototypes">对象原型</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/Inheritance">JavaScript 中的继承</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/JSON">使用 JSON 资料</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/Object_building_practice">对象构建实践</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/Adding_bouncing_balls_features">作业：为弹跳球展示新增功能</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Asynchronous JavaScript</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous">Asynchronous JavaScript overview</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Concepts">General asynchronous programming concepts</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Introducing">Introducing asynchronous JavaScript</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals">Cooperative asynchronous Java​Script: Timeouts and intervals</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Promises">Graceful asynchronous programming with Promises</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Async_await">Making asynchronous programming easier with async and await</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Choosing_the_right_approach">Choosing the right approach</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>客户端网页 API</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs">客户端网页 API</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Introduction">网页 API 介绍</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents">操纵文档</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data">从服务器获取数据</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Third_party_APIs">第三方 API</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Drawing_graphics">画图</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Video_and_audio_APIs">视频与音频 API</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Client-side_storage">客户端存储</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/zh-CN/docs/Learn/Forms"><strong>Web forms — Working with user data</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Core forms learning pathway</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Forms">Web forms overview</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Your_first_form">Your first form</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/How_to_structure_a_web_form">How to structure a web form</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Basic_native_form_controls">Basic native form controls</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/HTML5_input_types">The HTML5 input types</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Other_form_controls">Other form controls</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Styling_web_forms">Styling web forms</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Advanced_form_styling">Advanced form styling</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/UI_pseudo-classes">UI pseudo-classes</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Form_validation">Client-side form validation</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Sending_and_retrieving_form_data">Sending form data</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Advanced forms articles</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Forms/How_to_build_custom_form_controls">How to build custom form controls</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Sending_forms_through_JavaScript">Sending forms through JavaScript</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Property_compatibility_table_for_form_controls">CSS property compatibility table for form controls</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/zh-CN/docs/Learn/Accessibility"><strong>可访问性 — 使每个人都能使用 Web</strong></a></li>
  <li class="toggle">
    <details>
        <summary>可访问性指南</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Accessibility">可访问性概览</a></li>
          <li><a href="/zh-CN/docs/Learn/Accessibility/What_is_accessibility">什么是可访问性</a></li>
          <li><a href="/zh-CN/docs/Learn/Accessibility/HTML">HTML: 可访问性的好基础</a></li>
          <li><a href="/zh-CN/docs/Learn/Accessibility/CSS_and_JavaScript">CSS 和 JavaScript 可访问性最佳实践</a></li>
          <li><a href="/zh-CN/docs/Learn/Accessibility/WAI-ARIA_basics">WAI-ARIA 基础</a></li>
          <li><a href="/zh-CN/docs/Learn/Accessibility/Multimedia">可访问性多媒体</a></li>
          <li><a href="/zh-CN/docs/Learn/Accessibility/Mobile">移动端可访问性</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>可访问性测评</summary>
        <ol>
            <li><a href="/zh-CN/docs/Learn/Accessibility/Accessibility_troubleshooting">作业：可访问性疑难解答</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/zh-CN/docs/Learn/Tools_and_testing"><strong>工具与测试</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Client-side web development tools</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Understanding_client-side_tools">Client-side web development tools index</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Overview">Client-side tooling overview</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Command_line">Command line crash course</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Package_management">Package management basics</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Introducing_complete_toolchain">Introducing a complete toolchain</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Deployment">Deploying our app</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Introduction to client-side frameworks</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Introduction">Client-side frameworks overview</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Main_features">Framework main features</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>React</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started">Getting started with React</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_todo_list_beginning">Beginning our React todo list</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_components">Componentizing our React app</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state">React interactivity: Events and state</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_filtering_conditional_rendering">React interactivity: Editing, filtering, conditional rendering</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_accessibility">Accessibility in React</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_resources">React resources</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Ember</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_getting_started">Getting started with Ember</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_structure_componentization">Ember app structure and componentization</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_interactivity_events_state">Ember interactivity: Events, classes and state</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_conditional_footer">Ember Interactivity: Footer functionality, conditional rendering</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_routing">Routing in Ember</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_resources">Ember resources and troubleshooting</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Vue</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_getting_started">Getting started with Vue</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_first_component">Creating our first Vue component</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_rendering_lists">Rendering a list of Vue components</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_methods_events_models">Adding a new todo form: Vue events, methods, and models</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_styling">Styling Vue components with CSS</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_computed_properties">Using Vue computed properties</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_conditional_rendering  ">Vue conditional rendering: editing existing todos</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_refs_focus_management">Focus management with Vue refs</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_resources">Vue resources</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Svelte</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_getting_started">Getting started with Svelte</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_Todo_list_beginning">Starting our Svelte Todo list app</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_variables_props">Dynamic behavior in Svelte: working with variables and props</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_components">Componentizing our Svelte app</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_reactivity_lifecycle_accessibility">Advanced Svelte: Reactivity, lifecycle, accessibility</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_stores">Working with Svelte stores</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_TypeScript  ">TypeScript support in Svelte</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_deployment_next">Deployment and next steps</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Git and GitHub</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/GitHub">Git and GitHub overview</a></li>
          <li><a href="https://guides.github.com/activities/hello-world/">Hello World</a></li>
          <li><a href="https://guides.github.com/introduction/git-handbook/">Git Handbook</a></li>
          <li><a href="https://guides.github.com/activities/forking/">Forking Projects</a></li>
          <li><a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests">About pull requests</a></li>
          <li><a href="https://guides.github.com/features/issues/">Mastering Issues</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>跨浏览器测试</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing">跨浏览器测试概述</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/Introduction">跨浏览器测试介绍</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/Testing_strategies">执行测试策略</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/HTML_and_CSS">处理常见的 HTML 与 CSS 问题</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/JavaScript">处理常见的 JavaScript 问题</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/Accessibility">处理常见的可访问性问题</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/Feature_detection">建置功能侦测</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/Automated_testing">自动测试介绍</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment">设置您的自动测试环境</a></li>
        </ol>
    </details>
  </li>
  <li data-default-state="closed"><a href="/zh-CN/docs/Learn/Server-side"><strong>服务端网页编程</strong></a></li>
  <li class="toggle">
    <details>
        <summary>第一步</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Server-side/First_steps">第一步概述</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/First_steps/Introduction">服务端介绍</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/First_steps/Client-Server_overview">用户端概述</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/First_steps/Web_frameworks">服务端网络框架</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/First_steps/Website_security">网站安全</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Django 网站框架 (Python)</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django">Django 网站框架 (Python) 概述</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Introduction">介绍</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/development_environment">搭建开发环境</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Tutorial_local_library_website">在线教学：本地图书馆网站</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/skeleton_website">在线教学 2：建立网站框架</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Models">在线教学 3：使用模型</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Admin_site">在线教学 4：Django 管理网站</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Home_page">在线教学 5：建立我们的首页</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Generic_views">在线教学 6：通用列表与细节检查</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Sessions">在线教学 7：会话框架</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Authentication">在线教学 8：用户授权与许可</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Forms">在线教学 9：搭配表单</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Testing">在线教学 10：测试 Django 的 Web 应用</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Deployment">在线教学 11：部署 Django 至产品</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/web_application_security">Web 应用安全性</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/django_assessment_blog">作业：DIY 博客</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Express 网页框架 (node.js/JavaScript)</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs">Express 网页框架 (Node.js/JavaScript) 概览</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/Introduction">Express/Node 介绍</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/development_environment">架设 Node (Express) 开发环境</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/Tutorial_local_library_website">Express 教程： 本地图书馆网站</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/skeleton_website">Express 教程 2： 新建网站骨架</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/mongoose">Express 教程 3： 使用数据库 (Mongoose)</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/routes">Express 教程 4： 路由和控制器</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/Displaying_data">Express 教程 5： 呈现图书馆数据</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/forms">Express 教程 6： 使用表单</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/deployment">Express 教程 7： 部署至生产环境</a></li>
        </ol>
    </details>
  </li>
  <li><a href="#"><strong>更多资源</strong></a></li>
  <li class="toggle">
    <details>
        <summary>常见问题</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/HTML/Howto">HTML 问题</a></li>
          <li><a href="/zh-CN/docs/Learn/CSS/Howto">CSS 问题</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Howto">JavaScript questions</a></li>
          <li><a href="/zh-CN/docs/Learn/Common_questions#How_the_Web_works">Web 是如何运作的</a></li>
          <li><a href="/zh-CN/docs/Learn/Common_questions#Tools_and_setup">工具与安装</a></li>
          <li><a href="/zh-CN/docs/Learn/Common_questions#Design_and_accessibility">设计与可访问性</a></li>
        </ol>
    </details>
  </li>
  <li data-default-state="closed"><a href="/zh-CN/docs/Learn/How_to_contribute">如何贡献</a></li>
</ol>

</section></div>

<div><div class="prevnext">
  <a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Promises" class="button"><i class="icon-arrow-left"></i><span class="label"> 上一页 </span></a><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous" class="button"><i class="icon-arrow-up"></i> Overview: Asynchronous</a><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Choosing_the_right_approach" class="button"><span class="label"> 下一页  </span><i class="icon-arrow-right"></i></a>
</div></div>

<p class="summary"><a href="/en-US/docs/Web/JavaScript/Reference/Statements/async_function">async functions</a> 和 <code><a href="/en-US/docs/Web/JavaScript/Reference/Operators/await">await</a></code> 关键字是最近添加到JavaScript语言里面的。它们是ECMAScript 2017 JavaScript版的一部分（参见<a href="/en-US/docs/Web/JavaScript/New_in_JavaScript/ECMAScript_Next_support_in_Mozilla">ECMAScript Next support in Mozilla</a>）。简单来说，它们是基基于promises的语法糖，使异步代码更易于编写和阅读。通过使用它们，异步代码看起来更像是老式同步代码，因此它们非常值得学习。本文为您提供了您需要了解的内容。</p>

<table class="learn-box standard-table">
 <tbody>
  <tr>
   <th scope="row">先决条件:</th>
   <td>基本的计算机知识，较好理解 JavaScript 基础，以及理解一般异步代码和 promises 。</td>
  </tr>
  <tr>
   <th scope="row">目标:</th>
   <td>理解并使用 promise</td>
  </tr>
 </tbody>
</table>

<h2 id="asyncawait_基础">async/await 基础</h2>

<p>在代码中使用 async / await 有两个部分。</p>

<h3 id="async_关键字">async 关键字</h3>

<p>首先，我们使用 <code>async</code> 关键字，把它放在函数声明之前，使其成为 <a href="/en-US/docs/Web/JavaScript/Reference/Statements/async_function">async function</a>。异步函数是一个知道怎样使用 <code>await</code> 关键字调用异步代码的函数。</p>

<p>尝试在浏览器的JS控制台中键入以下行：</p>

<pre class="brush: js notranslate">function hello() { return &quot;Hello&quot; };
hello();</pre>

<p>该函数返回“Hello” —— 没什么特别的，对吧？</p>

<p>如果我们将其变成异步函数呢？请尝试以下方法：</p>

<pre class="brush: js notranslate">async function hello() { return &quot;Hello&quot; };
hello();</pre>

<p>哈。现在调用该函数会返回一个 promise。这是异步函数的特征之一 —— 它保证函数的返回值为 promise。</p>

<p>你也可以创建一个异步函数表达式（参见 <a href="/en-US/docs/Web/JavaScript/Reference/Operators/async_function">async function expression</a> ），如下所示:</p>

<pre class="brush: js notranslate">let hello = async function() { return &quot;Hello&quot; };
hello();</pre>

<p>你可以使用箭头函数：</p>

<pre class="brush: js notranslate">let hello = async () =&gt; { return &quot;Hello&quot; };</pre>

<p>这些都基本上是一样的。</p>

<p>要实际使用promise完成时返回的值，我们可以使用<code>.then()</code>块，因为它返回的是 promise：</p>

<pre class="brush: js notranslate">hello().then((value) =&gt; console.log(value))</pre>

<p>甚至只是简写如</p>

<pre class="brush: js notranslate">hello().then(console.log)</pre>

<p>这就像我们在上一篇文章中看到的那样。</p>

<p>将 <code>async</code> 关键字加到函数申明中，可以告诉它们返回的是 promise，而不是直接返回值。此外，它避免了同步函数为支持使用 <font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">await</span></font> 带来的任何潜在开销。在函数声明为 <code>async</code> 时，JavaScript引擎会添加必要的处理，以优化你的程序。爽！</p>

<h3 id="await关键字">await关键字</h3>

<p>当 <a href="/en-US/docs/Web/JavaScript/Reference/Operators/await">await</a> 关键字与异步函数一起使用时，它的真正优势就变得明显了 —— 事实上， <strong><font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">await</span></font> 只在异步函数里面才起作用</strong>。它可以放在任何异步的，基于 promise 的函数之前。它会暂停代码在该行上，直到 promise 完成，然后返回结果值。在暂停的同时，其他正在等待执行的代码就有机会执行了。</p>

<p>您可以在调用任何返回Promise的函数时使用 <strong><font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">await</span></font></strong>，包括Web API函数。</p>

<p>这是一个简单的示例：</p>

<pre class="brush: js notranslate">async function hello() {
  return greeting = await Promise.resolve(&quot;Hello&quot;);
};

hello().then(alert);</pre>

<p>当然，上面的示例不是很有用，但它确实展示了语法。让我们继续，看一个真实示例。</p>

<h2 id="使用_asyncawait_重写_promise_代码"> 使用 async/await 重写 promise 代码</h2>

<p>让我们回顾一下我们在上一篇文章中简单的 fetch 示例：</p>

<pre class="brush: js notranslate">fetch(&apos;coffee.jpg&apos;)
.then(response =&gt; response.blob())
.then(myBlob =&gt; {
  let objectURL = URL.createObjectURL(myBlob);
  let image = document.createElement(&apos;img&apos;);
  image.src = objectURL;
  document.body.appendChild(image);
})
.catch(e =&gt; {
  console.log(&apos;There has been a problem with your fetch operation: &apos; + e.message);
});</pre>

<p>到现在为止，你应该对 promises 及其工作方式有一个较好的理解。让我们将其转换为使用async / await看看它使事情变得简单了多少：</p>

<pre class="brush: js notranslate">async function myFetch() {
  let response = await fetch(&apos;coffee.jpg&apos;);
  let myBlob = await response.blob();

  let objectURL = URL.createObjectURL(myBlob);
  let image = document.createElement(&apos;img&apos;);
  image.src = objectURL;
  document.body.appendChild(image);
}

myFetch()
.catch(e =&gt; {
  console.log(&apos;There has been a problem with your fetch operation: &apos; + e.message);
});</pre>

<p>它使代码简单多了，更容易理解 —— 去除了到处都是 <code>.then()</code> 代码块！</p>

<p>由于 <code>async</code> 关键字将函数转换为 promise，您可以重构以上代码 —— 使用 promise 和 await 的混合方式，将函数的后半部分抽取到新代码块中。这样做可以更灵活：</p>

<pre class="brush: js notranslate">async function myFetch() {
  let response = await fetch(&apos;coffee.jpg&apos;);
  return await response.blob();
}

myFetch().then((blob) =&gt; {
  let objectURL = URL.createObjectURL(blob);
  let image = document.createElement(&apos;img&apos;);
  image.src = objectURL;
  document.body.appendChild(image);
});</pre>

<p>您可以尝试自己输入示例，或运行我们的 <a href="https://mdn.github.io/learning-area/javascript/asynchronous/async-await/simple-fetch-async-await.html">live example</a> （另请参阅<a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/async-await/simple-fetch-async-await.html">source code</a>）。</p>

<h3 id="它到底是如何工作的？">它到底是如何工作的？</h3>

<p>您会注意到我们已经将代码封装在函数中，并且我们在 <code>function</code> 关键字之前包含了 <code>async</code> 关键字。这是必要的 –– 您必须创建一个异步函数来定义一个代码块，在其中运行异步代码; <font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">await</span></font> 只能在异步函数内部工作。</p>

<p>在<code>myFetch()</code>函数定义中，您可以看到代码与先前的 promise 版本非常相似，但存在一些差异。不需要附加 <code>.then()</code> 代码块到每个promise-based方法的结尾，你只需要在方法调用前添加 <font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">await</span></font> 关键字，然后把结果赋给变量。<font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">await</span></font> 关键字使JavaScript运行时暂停于此行，允许其他代码在此期间执行，直到异步函数调用返回其结果。一旦完成，您的代码将继续从下一行开始执行。例如：</p>

<pre class="brush: js notranslate">let response = await fetch(&apos;coffee.jpg&apos;);</pre>

<p>解析器会在此行上暂停，直到当服务器返回的响应变得可用时。此时 <code>fetch()</code> 返回的 promise 将会完成（fullfilled），返回的 response 会被赋值给 <code>response</code> 变量。一旦服务器返回的响应可用，解析器就会移动到下一行，从而创建一个<code><a href="/en-US/docs/Web/API/Blob">Blob</a></code>。Blob这行也调用基于异步promise的方法，因此我们也在此处使用<code>await</code>。当操作结果返回时，我们将它从<code>myFetch()</code>函数中返回。</p>

<p>这意味着当我们调用<code>myFetch()</code>函数时，它会返回一个promise，因此我们可以将<code>.then()</code>链接到它的末尾，在其中我们处理显示在屏幕上的<code>blob</code>。</p>

<p>你可能已经觉得“这真的很酷！”，你是对的 —— 用更少的.<code>then()</code>块来封装代码，同时它看起来很像同步代码，所以它非常直观。</p>

<h3 id="添加错误处理">添加错误处理</h3>

<p>如果你想添加错误处理，你有几个选择。</p>

<p>您可以将同步的 <code><a href="/en-US/docs/Web/JavaScript/Reference/Statements/try...catch">try...catch</a></code> 结构和 <code>async/await</code> 一起使用 。此示例扩展了我们上面展示的第一个版本代码：</p>

<pre class="brush: js notranslate">async function myFetch() {
  try {
    let response = await fetch(&apos;coffee.jpg&apos;);
    let myBlob = await response.blob();

    let objectURL = URL.createObjectURL(myBlob);
    let image = document.createElement(&apos;img&apos;);
    image.src = objectURL;
    document.body.appendChild(image);
  } catch(e) {
    console.log(e);
  }
}

myFetch();</pre>

<p><code>catch() {}</code> 代码块会接收一个错误对象 <code>e</code> ; 我们现在可以将其记录到控制台，它将向我们提供详细的错误消息，显示错误被抛出的代码中的位置。</p>

<p>如果你想使用我们上面展示的第二个（重构）代码版本，你最好继续混合方式并将 <code>.catch()</code> 块链接到 <code>.then()</code> 调用的末尾，就像这样：</p>

<pre class="brush: js notranslate">async function myFetch() {
  let response = await fetch(&apos;coffee.jpg&apos;);
  return await response.blob();
}

myFetch().then((blob) =&gt; {
  let objectURL = URL.createObjectURL(blob);
  let image = document.createElement(&apos;img&apos;);
  image.src = objectURL;
  document.body.appendChild(image);
})
.catch((e) =&gt;
  console.log(e)
);</pre>

<p>这是因为 <code>.catch()</code> 块将捕获来自异步函数调用和promise链中的错误。如果您在此处使用了<code>try/catch</code> 代码块，则在调用 <code>myFetch()</code> 函数时，您仍可能会收到未处理的错误。</p>

<p>您可以在GitHub上找到这两个示例：</p>

<ul>
 <li><a href="https://mdn.github.io/learning-area/javascript/asynchronous/async-await/simple-fetch-async-await-try-catch.html">simple-fetch-async-await-try-catch.html</a> (参见 <a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/async-await/simple-fetch-async-await-try-catch.html">源码</a>)</li>
 <li><a href="https://mdn.github.io/learning-area/javascript/asynchronous/async-await/simple-fetch-async-await-promise-catch.html">simple-fetch-async-await-promise-catch.html</a> (参见 <a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/async-await/simple-fetch-async-await-promise-catch.html">源码</a>)</li>
</ul>

<h2 id="等待Promise.all">等待Promise.all()</h2>

<p><code>async / await</code> 建立在 <a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promises</a> 之上，因此它与promises提供的所有功能兼容。这包括<code><a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all">Promise.all()</a></code> –– 你完全可以通过调用 <code>await</code> <code>Promise.all()</code> 将所有结果返回到变量中，就像同步代码一样。让我们再次回到<a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/promises/promise-all.html">上一篇中看到的例子</a>。在单独的选项卡中打开它，以便您可以与下面显示的新版本进行比较和对比。</p>

<p>将其转换为 async / await（请参阅 <a href="https://mdn.github.io/learning-area/javascript/asynchronous/async-await/promise-all-async-await.html">样例</a> 和 <a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/async-await/promise-all-async-await.html">源码</a>），现在看起来像这样：</p>

<pre class="brush: js notranslate">async function fetchAndDecode(url, type) {
  let response = await fetch(url);

  let content;

  if(type === &apos;blob&apos;) {
    content = await response.blob();
  } else if(type === &apos;text&apos;) {
    content = await response.text();
  }

  return content;
}

async function displayContent() {
  let coffee = fetchAndDecode(&apos;coffee.jpg&apos;, &apos;blob&apos;);
  let tea = fetchAndDecode(&apos;tea.jpg&apos;, &apos;blob&apos;);
  let description = fetchAndDecode(&apos;description.txt&apos;, &apos;text&apos;);

  let values = await Promise.all([coffee, tea, description]);

  let objectURL1 = URL.createObjectURL(values[0]);
  let objectURL2 = URL.createObjectURL(values[1]);
  let descText = values[2];

  let image1 = document.createElement(&apos;img&apos;);
  let image2 = document.createElement(&apos;img&apos;);
  image1.src = objectURL1;
  image2.src = objectURL2;
  document.body.appendChild(image1);
  document.body.appendChild(image2);

  let para = document.createElement(&apos;p&apos;);
  para.textContent = descText;
  document.body.appendChild(para);
}

displayContent()
.catch((e) =&gt;
  console.log(e)
);</pre>

<p>可以看到 <code>fetchAndDecode()</code> 函数只进行了一丁点的修改就转换成了异步函数。请看<code>Promise.all()</code> 行：</p>

<pre class="brush: js notranslate">let values = await Promise.all([coffee, tea, description]);</pre>

<p>在这里，通过使用<code>await</code>，我们能够在三个promise的结果都可用的时候，放入<code>values</code>数组中。这看起来非常像同步代码。我们需要将所有代码封装在一个新的异步函数<code>displayContent()</code> 中，尽管没有减少很多代码，但能够将大部分代码从 <code>.then()</code> 代码块移出，使代码得到了简化，更易读。</p>

<p>为了错误处理，我们在 <code>displayContent()</code> 调用中包含了一个 <code>.catch()</code> 代码块;这将处理两个函数中出现的错误。</p>

<div class="note notecard">
<p><strong>注意</strong>: 也可以在异步函数中使用同步 <code><a href="/en-US/docs/Web/JavaScript/Reference/Statements/try...catch#The_finally_clause">finally</a></code> 代码块代替 <code><a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/finally">.finally()</a></code> 异步代码块，以显示操作如何进行的最终报告——您可以在我们的 <a href="https://mdn.github.io/learning-area/javascript/asynchronous/async-await/promise-finally-async-await.html">live example</a> （查看<a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/async-await/promise-finally-async-await.html">源代码</a>）中看到这一点。</p>
</div>

<h2 id="asyncawait的缺陷">async/await的缺陷</h2>

<p>了解<code>Async/await</code>是非常有用的，但还有一些缺点需要考虑。</p>

<p><code>Async/await</code> 让你的代码看起来是同步的，在某种程度上，也使得它的行为更加地同步。 <code>await</code> 关键字会阻塞其后的代码，直到promise完成，就像执行同步操作一样。它确实可以允许其他任务在此期间继续运行，但您自己的代码被阻塞。</p>

<p>这意味着您的代码可能会因为大量<code>await</code>的promises相继发生而变慢。每个<code>await</code>都会等待前一个完成，而你实际想要的是所有的这些promises同时开始处理（就像我们没有使用<code>async/await</code>时那样）。</p>

<p>有一种模式可以缓解这个问题——通过将 <code>Promise</code> 对象存储在变量中来同时开始它们，然后等待它们全部执行完毕。让我们看一些证明这个概念的例子。</p>

<p>我们有两个可用的例子 —— <a href="https://mdn.github.io/learning-area/javascript/asynchronous/async-await/slow-async-await.html">slow-async-await.html</a>（参见<a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/async-await/slow-async-await.html">source code</a>）和<a href="https://mdn.github.io/learning-area/javascript/asynchronous/async-await/fast-async-await.html">fast-async-await.html</a>（参见<a href="https://github.com/mdn/learning-area/blob/master/javascript/asynchronous/async-await/fast-async-await.html">source code</a>）。它们都以自定义promise函数开始，该函数使用<code>setTimeout()</code> 调用伪造异步进程：</p>

<pre class="brush: js notranslate">function timeoutPromise(interval) {
  return new Promise((resolve, reject) =&gt; {
    setTimeout(function(){
      resolve(&quot;done&quot;);
    }, interval);
  });
};</pre>

<p>然后每个包含一个 <code>timeTest()</code> 异步函数，等待三个 <code>timeoutPromise()</code> 调用：</p>

<pre class="brush: js notranslate">async function timeTest() {
  ...
}</pre>

<p>每一个都以记录开始时间结束，查看 <code>timeTest()</code> promise 需要多长时间才能完成，然后记录结束时间并报告操作总共需要多长时间：</p>

<pre class="brush: js notranslate">let startTime = Date.now();
timeTest().then(() =&gt; {
  let finishTime = Date.now();
  let timeTaken = finishTime - startTime;
  alert(&quot;Time taken in milliseconds: &quot; + timeTaken);
})</pre>

<p><code>timeTest()</code> 函数在每种情况下都不同。</p>

<p>在<a href="https://mdn.github.io/learning-area/javascript/asynchronous/async-await/slow-async-await.html">slow-async-await.html</a>示例中，<code>timeTest()</code> 如下所示：</p>

<pre class="brush: js notranslate">async function timeTest() {
  await timeoutPromise(3000);
  await timeoutPromise(3000);
  await timeoutPromise(3000);
}</pre>

<p>在这里，我们直接等待所有三个timeoutPromise（）调用，使每个调用3秒钟。后续的每一个都被迫等到最后一个完成 - 如果你运行第一个例子，你会看到弹出框报告的总运行时间大约为9秒。</p>

<p>在<a href="https://mdn.github.io/learning-area/javascript/asynchronous/async-await/fast-async-await.html">fast-async-await.html</a>示例中，<code>timeTest()</code> 如下所示：</p>

<pre class="brush: js notranslate">async function timeTest() {
  const timeoutPromise1 = timeoutPromise(3000);
  const timeoutPromise2 = timeoutPromise(3000);
  const timeoutPromise3 = timeoutPromise(3000);

  await timeoutPromise1;
  await timeoutPromise2;
  await timeoutPromise3;
}</pre>

<p>在这里，我们将三个Promise对象存储在变量中，这样可以同时启动它们关联的进程。</p>

<p>接下来，我们等待他们的结果 - 因为promise都在基本上同时开始处理，promise将同时完成;当您运行第二个示例时，您将看到弹出框报告总运行时间仅超过3秒！</p>

<p>您必须仔细测试您的代码，并在性能开始受损时牢记这一点。</p>

<p>另一个小小的不便是你必须将等待执行的promise封装在异步函数中。</p>

<h2 id="Asyncawait_的类方法">Async/await 的类方法</h2>

<p>最后值得一提的是，我们可以在类/对象方法前面添加<code>async</code>，以使它们返回promises，并<code>await</code>它们内部的promises。查看 <a href="/en-US/docs/Learn/JavaScript/Objects/Inheritance#ECMAScript_2015_Classes">ES class code we saw in our object-oriented JavaScript article</a>，然后查看使用异步方法的修改版本：</p>

<pre class="brush: js notranslate">class Person {
  constructor(first, last, age, gender, interests) {
    this.name = {
      first,
      last
    };
    this.age = age;
    this.gender = gender;
    this.interests = interests;
  }

  async greeting() {
    return await Promise.resolve(`Hi! I&apos;m ${this.name.first}`);
  };

  farewell() {
    console.log(`${this.name.first} has left the building. Bye for now!`);
  };
}

let han = new Person(&apos;Han&apos;, &apos;Solo&apos;, 25, &apos;male&apos;, [&apos;Smuggling&apos;]);</pre>

<p>第一个实例方法可以使用如下：</p>

<pre class="brush: js notranslate">han.greeting().then(console.log);</pre>

<h2 id="浏览器的支持">浏览器的支持</h2>

<p>决定是否使用 async/await 时的一个考虑因素是支持旧浏览器。它们适用于大多数浏览器的现代版本，与promise相同; 主要的支持问题存在于Internet Explorer和Opera Mini。</p>

<p>如果你想使用async/await但是担心旧的浏览器支持，你可以考虑使用<a href="https://babeljs.io/">BabelJS</a>库 —— 这允许你使用最新的JavaScript编写应用程序，让Babel找出用户浏览器需要的更改。在遇到不支持async/await 的浏览器时，Babel的 polyfill 可以自动提供适用于旧版浏览器的实现。</p>

<h2 id="总结">总结</h2>

<p>async/await提供了一种很好的，简化的方法来编写更易于阅读和维护的异步代码。即使浏览器支持在撰写本文时比其他异步代码机制更受限制，但无论是现在还是将来，都值得学习和考虑使用。</p>

<div class="prevnext">
  <a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Promises" class="button"><i class="icon-arrow-left"></i><span class="label"> 上一页 </span></a><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous" class="button"><i class="icon-arrow-up"></i> Overview: Asynchronous</a><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Choosing_the_right_approach" class="button"><span class="label"> 下一页  </span><i class="icon-arrow-right"></i></a>
</div>

<h2 id="本章内容">本章内容</h2>

<ul>
 <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Concepts">异步编程的基本概念</a></li>
 <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Introducing">JavaScript异步简介</a></li>
 <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals">合作异步的JavaScript：超时和间隔</a></li>
 <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Promises">使用Promises：优雅的异步编程</a></li>
 <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Async_await">使用async和await：让异步更简单</a></li>
 <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Choosing_the_right_approach">选择正确的方法</a></li>
</ul>
