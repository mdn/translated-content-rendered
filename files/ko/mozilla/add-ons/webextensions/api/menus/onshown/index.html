---
title: menus.onShown
slug: Mozilla/Add-ons/WebExtensions/API/menus/onShown
translation_of: Mozilla/Add-ons/WebExtensions/API/menus/onShown
original_slug: Mozilla/Add-ons/WebExtensions/API/contextMenus/onShown
---
<div><section class="Quick_links" id="Quick_Links">
  <ol>
    <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions"><strong>브라우저 확장 기능</strong></a></li>
    <li class="toggle">
      <details>
        <summary>시작하기</summary>
        <ol>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions">확장 기능이 무엇인가요?</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension">첫 번째 확장 기능</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension">두 번째 확장 기능</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">확장 기능의 구조</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Examples">확장 기능 예시</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/What_next_">다음은 무엇인가요?</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>개념</summary>
        <ol>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs">JavaScript API 사용하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">컨텐츠 스크립트</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">일치 패턴</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Working_with_files">파일 작업</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Internationalization">국제화</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy">컨텐츠 보안 정책</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Native_messaging">네이티브 메시징</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations">API 구현간의 차이점</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities">Chrome 비호환성</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>사용자 인터페이스</summary>
        <ol>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface">사용자 인터페이스</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action">도구 모음 버튼</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions">주소 표시줄 버튼</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars">사이드바</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items">컨텍스트 메뉴 항목</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages">옵션 페이지</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">확장 기능 페이지</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications">알림</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox">주소 표시줄 제안</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels">개발자 도구 패널</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>방법</summary>
        <ol>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests">HTTP 요청 가로채기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page">웹 페이지 수정하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page">외부 컨텐츠 삽입하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts">Share objects with page scripts</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar">도구 모음에 버튼 추가하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page">설정 페이지 구현하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API">Tabs API 사용하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API">Bookmarks API 사용하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API">Cookies API 사용하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities">contextual identities 사용하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension">Build a cross-browser extension</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators">Firefox의 차별화</a></summary>
      </details>
    </li>
    <li class="toggle">
      <details open>
        <summary>JavaScript APIs</summary>
        <ol><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs">Browser support for JavaScript APIs</a></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/browsingData">browsingData</a></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts">contentScripts</a></li><li class="webextension-api-sidebar"><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/contextMenus">contextMenus</a><ol></ol></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/pageAction">pageAction</a></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/storage">storage</a></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/tabs">tabs</a></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/webRequest">webRequest</a></li></ol>
      </details>
    </li>
    <li class="toggle">
      <details>
      <summary>Manifest 키</summary>
      <ol><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts">content_scripts</a></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action">page_action</a></li></ol>
      </details>
    </li>
     <li class="toggle">
      <details>
        <summary>Extension Workshop</summary>
        <ol>
          <li><a href="https://extensionworkshop.com/documentation/develop/">Develop</a></li>
          <li><a href="https://extensionworkshop.com/documentation/publish/">Publish</a></li>
          <li><a href="https://extensionworkshop.com/documentation/manage/">Manage</a></li>
          <li><a href="https://extensionworkshop.com/documentation/enterprise/">Enterprise</a></li>
        </ol>
      </details>
    </li>
    <li><a href="/ko/docs/Mozilla/Add-ons/Contact_us"><strong>연락하기</strong></a></li>
    <li class="toggle">
      <details>
        <summary>채널</summary>
        <ol>
          <li><a href="https://blog.mozilla.org/addons">부가 기능 블로그</a></li>
          <li><a href="https://discourse.mozilla.org/c/add-ons">부가 기능 포럼</a></li>
          <li><a href="https://chat.mozilla.org/#/room/%23addons:mozilla.org">Add-ons chat</a></li>
        </ol>
      </details>
    </li>
  </ol>
</section></div>

<p>Fired when the browser has shown a menu.</p>

<p>An extension can use this event to update its menu items using information that&apos;s only available once the menu is shown. Typically an extension will figure out the update in its <code>onShown</code> handler and then call <a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/menus/refresh" title="The documentation about this has not yet been written; please consider contributing!"><code>menus.refresh()</code></a> to update the menu itself.</p>

<p>The handler can add, remove, or update menu items.</p>

<p>For example, the <a href="https://github.com/mdn/webextensions-examples/tree/master/menu-labelled-open">menu-labelled-open</a> example extension adds a menu item that&apos;s shown when the user clicks a link, and that, when clicked, just opens the link. It uses <code>onShown</code> and <code>refresh()</code> to annotate the menu item with the hostname for the link, so the user can easily see where they will go before they click.</p>

<p>Note that an extension should not take too much time before calling <code>refresh()</code>, or the update will be noticeable to the user.</p>

<p>The handler is passed some information about the menu and its contents, and some information from the page (such as the link and/or selection text). To get access to the information from the page, your extension must have the <a href="/en-US/Add-ons/WebExtensions/manifest.json/permissions#Host_permissions">host permission</a> for it.</p>

<p>If the <code>onShown</code> handler calls any asynchronous APIs, then it&apos;s possible that the menu has been closed again before the handler resumes execution. Because of this, if a handler calls any asynchronous APIs, it should check that the menu is still being displayed before it updates the menu. For example:</p>

<pre class="brush: js notranslate">var lastMenuInstanceId = 0;
var nextMenuInstanceId = 1;

browser.menus.onShown.addListener(async function(info, tab) {
  var menuInstanceId = nextMenuInstanceId++;
  lastMenuInstanceId = menuInstanceId;

  // Call an async function
  await .... ;

  // After completing the async operation, check whether the menu is still shown.
  if (menuInstanceId !== lastMenuInstanceId) {
    return; // Menu was closed and shown again.
  }
  // Now use menus.create/update + menus.refresh.
});

browser.menus.onHidden.addListener(function() {
  lastMenuInstanceId = 0;
});</pre>

<p>Note that it is possible to call menus API functions synchronously, and in this case you don&apos;t have to perform this check:</p>

<pre class="brush: js notranslate">browser.menus.onShown.addListener(async function(info, tab) {
  browser.menus.update(menuId, ...);
   // Note: Not waiting for returned promise.
  browser.menus.refresh();
});</pre>

<p>However, if you call these APIs asynchronously, then you do have to perform the check:</p>

<pre class="brush: js notranslate">browser.menus.onShown.addListener(async function(info, tab) {
  var menuInstanceId = nextMenuInstanceId++;
  lastMenuInstanceId = menuInstanceId;

  await browser.menus.update(menuId, ...);
  // must now perform the check
  if (menuInstanceId !== lastMenuInstanceId) {
    return;
  }
  browser.menus.refresh();
});</pre>

<p>Firefox makes this event available via the <code>contextMenus</code> namespace as well as the <code>menus</code> namespace.</p>

<h2 id="문법">문법</h2>

<pre class="syntaxbox brush:js notranslate">browser.menus.onShown.addListener(listener)
browser.menus.onShown.removeListener(listener)
browser.menus.onShown.hasListener(listener)
</pre>

<p>Events have three functions:</p>

<dl>
 <dt><code>addListener(listener)</code></dt>
 <dd>Adds a listener to this event.</dd>
 <dt><code>removeListener(listener)</code></dt>
 <dd>Stop listening to this event. The <code>listener</code> argument is the listener to remove.</dd>
 <dt><code>hasListener(listener)</code></dt>
 <dd>Check whether <code>listener</code> is registered for this event. Returns <code>true</code> if it is listening, <code>false</code> otherwise.</dd>
</dl>

<h2 id="addListener_syntax">addListener syntax</h2>

<h3 id="매개변수">매개변수</h3>

<dl>
 <dt><code>callback</code></dt>
 <dd>
 <p>Function that will be called when this event occurs. The function will be passed the following arguments:</p>

 <dl class="reference-values">
  <dt><code>info</code></dt>
  <dd>
  <p><code>Object</code>. This is just like the <a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/menus/OnClickData" title="The documentation about this has not yet been written; please consider contributing!"><code>menus.OnClickData</code></a> object, except it contains two extra properties:</p>

  <ul>
   <li><code>contexts</code>: an array of all the <a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/menus/ContextType"><code>contexts</code></a> that are applicable to this menu.</li>
   <li><code>menuIds</code>: an array of IDs of all menu items belonging to this extension that are being shown in this menu.</li>
  </ul>

  <p>Compared with <code>menus.OnClickData</code>, the <code>info</code> object also omits the <code>menuItemId</code> and <code>modifiers</code> properties, because of course these are not available until a menu item has been selected.</p>

  <p>The <code>contexts</code>, <code>menuIds</code>, <code>frameId</code>, and <code>editable</code> properties are always provided. All the other properties in <code>info</code> are only provided if the extension has the <a href="/en-US/Add-ons/WebExtensions/manifest.json/permissions#Host_permissions">host permission</a> for the page.</p>
  </dd>
 </dl>

 <dl class="reference-values">
  <dt><code>tab</code></dt>
  <dd><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab" title="The documentation about this has not yet been written; please consider contributing!"><code>tabs.Tab</code></a>. The details of the tab where the click took place. If the click did not take place in or on a tab, this parameter will be missing.</dd>
 </dl>
 </dd>
</dl>

<h2 id="브라우저_호환성">브라우저 호환성</h2>

<p class="hidden">The compatibility table in this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</p>

<div class="bc-data" id="bcd:webextensions.api.menus.onShown"></div>

<h2 id="예제">예제</h2>

<p>This example listens for the context menu to be shown over a link, then updates the <code>openLabelledId</code> menu item with the link&apos;s hostname:</p>

<pre class="brush: js notranslate">function updateMenuItem(linkHostname) {
  browser.menus.update(openLabelledId, {
    title: `Open (${linkHostname})`
  });
  browser.menus.refresh();
}

browser.menus.onShown.addListener(info =&gt; {
  if (!info.linkUrl) {
    return;
  }
  let linkElement = document.createElement(&quot;a&quot;);
  linkElement.href = info.linkUrl;
  updateMenuItem(linkElement.hostname);
});
</pre>
